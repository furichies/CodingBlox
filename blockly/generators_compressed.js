"use strict";Blockly.Arduino=new Blockly.Generator("Arduino"),Blockly.Arduino.addReservedWords("setup,loop,if,else,for,switch,case,while,do,break,continue,return,goto,define,include,HIGH,LOW,INPUT,OUTPUT,INPUT_PULLUP,true,false,integer, constants,floating,point,void,bookean,char,unsigned,byte,int,word,long,float,double,string,String,array,static, volatile,const,sizeof,pinMode,digitalWrite,digitalRead,analogReference,analogRead,analogWrite,tone,noTone,shiftOut,shitIn,pulseIn,millis,micros,delay,delayMicroseconds,min,max,abs,constrain,map,pow,sqrt,sin,cos,tan,randomSeed,random,lowByte,highByte,bitRead,bitWrite,bitSet,bitClear,bit,attachInterrupt,detachInterrupt,interrupts,noInterrupts,Servo,servo,keypad,Keypad,serial,Serial,Serial1, Serial2, Serial3,HardwareSerial,irremote,lcd,Lcd,stepper,Stepper,SoftwareSerial,bt_serial,fnc_bt_serial_namepin,LiquidCrystal_I2C,encoder,rtc,bt_serial,gps,gps_serial,fnc_gps_update,gps_lat,gps_lon,gps_speed_kmph,gps_speed_mph,gps_altitude,gps_course,gps_fixed,gps_day,gps_month,gps_year,gps_hour,gps_min,gps_sec,gps_hund,sd_file,fnc_sd_print,fnc_sd_filesize,fnc_sd_readbyte,fnc_sd_writebyte,fnc_EEPROM_readDouble,fnc_EEPROM_writeDouble,keypad_3x4_keys,keypad_3x4_rp,keypad_3x4_cp,keypad_3x4,fnc_adxl335,mqtt_mac,mqtt_broker,mqtt_port,mqtt_clientid,mqtt_user,mqtt_pass,mqtt_state,mqtt_payload,mqtt_ipclient,mqtt_client,mqtt_payload2double,mqtt_loop,mqtt_callback,mqtt_subscribe,mqtt_publish,mqtt_payload2string,pi,PI,Pi,pI,neo_pixel,lcd_customchar_,mfrc522,fnc_rfid_readID,l298n,l298n_,l298n_in1,l298_in2,l298n_in3,l298n_in4,l298n_ena,l298n_enb,button_debounced,button,Button,ir_rx,ir_tx,otto,robot_otto,Otto,AFMotor,AF_Stepper,AF_DCMotor,motorshield,fnc_dynamic_analogWrite,fnc_dynamic_analogRead,fnc_dynamic_digitalRead,fnc_dynamic_digitalWrite,_3dbot,fnc_3dbot_move,fnc_3dbot_motor,_3dbot_encoder,fnc_3dbot_distance,fnc_3dbot_ntc,nunchuk,ledmatrix,adxl345,fnc_adxl345,l298p,l298p_en1,l298p_en2,l298p_m1,l298p_m2,fnc_pm25,fnc_tcs34725_capturecolor,fnc_tcs34725_iscolor,tcs34725,Adafruit_TCS34725,tcs34725_r,tcs34725_g,tcs34725_b,tcs34725_clear,tcs34725_h,tcs34725_s,tcs34725_v,time_timer,fnc_interruptHandler,attachInterrupt,digitalPinToInterrupt,oscillator,pzem,pcf8574,bmp180,ds18b20,ina219,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11,d12,d13,d14,d15,d16,time_snooze_sleeping,fnc_snooze,fnc_snooze_wakeup,fnc_snooze_sleep,rtc_time_text,rtc_date_text,rtcbuffer,mp3_player,paj7620,ccs811"),Blockly.Arduino.ORDER_ATOMIC=0,Blockly.Arduino.ORDER_UNARY_POSTFIX=1,Blockly.Arduino.ORDER_UNARY_PREFIX=2,Blockly.Arduino.ORDER_MULTIPLICATIVE=3,Blockly.Arduino.ORDER_ADDITIVE=4,Blockly.Arduino.ORDER_SHIFT=5,Blockly.Arduino.ORDER_RELATIONAL=6,Blockly.Arduino.ORDER_EQUALITY=7,Blockly.Arduino.ORDER_BITWISE_AND=8,Blockly.Arduino.ORDER_BITWISE_XOR=9,Blockly.Arduino.ORDER_BITWISE_OR=10,Blockly.Arduino.ORDER_LOGICAL_AND=11,Blockly.Arduino.ORDER_LOGICAL_OR=12,Blockly.Arduino.ORDER_CONDITIONAL=13,Blockly.Arduino.ORDER_ASSIGNMENT=14,Blockly.Arduino.ORDER_NONE=99;var profile={wemos_d1:{description:"WeMos D1 / Mini",micro:"esp8266",digital:[["D0","16"],["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"],["RX","3"],["TX","1"]],rxtx:[["D0","16"],["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"],["RX","3"],["TX","1"]],PWM:[["D1","5"],["D2","4"],["D3","0"],["D5","14"],["D6","12"],["D7","13"],["D8","15"],["RX","3"],["TX","1"]],analog:[["A0","A0"]],ir_rx:[["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"]],ir_tx:[["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"]],encoder_clk:[["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"]],encoder_dt:[["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"]],spi_mosi:[["D7","13"]],spi_miso:[["D6","12"]],spi_clk:[["D5","14"]],sd_cs:[["D8","15"]],picture:"media/WeMosD1.jpg",miniPicture:"media/WeMosD1_mini.jpg",serial:9600,logic_levels:[["ON","HIGH"],["OFF","LOW"]],ids:[["1","1"],["2","2"],["3","3"],["4","4"]],sensor_range:[["%","PERCENT"],["0..1023","RAW"]],intPins:[["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"],["RX","3"],["TX","1"]],setupCode:[""],loopCode:["\tyield();\n"]},nodemcu:{description:"NodeMCU",micro:"esp8266",digital:[["D0","16"],["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"],["RX","3"],["TX","1"]],rxtx:[["D0","16"],["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"],["RX","3"],["TX","1"]],PWM:[["D1","5"],["D2","4"],["D3","0"],["D5","14"],["D6","12"],["D7","13"],["D8","15"],["RX","3"],["TX","1"]],analog:[["A0","A0"]],ir_rx:[["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"],["RX","3"],["TX","1"]],ir_tx:[["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"],["RX","3"],["TX","1"]],encoder_clk:[["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"],["RX","3"],["TX","1"]],encoder_dt:[["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"],["RX","3"],["TX","1"]],spi_mosi:[["D7","13"]],spi_miso:[["D6","12"]],spi_clk:[["D5","14"]],sd_cs:[["D8","15"]],picture:"media/NodeMCU.jpg",miniPicture:"media/ModeMCU_mini.jpg",serial:9600,logic_levels:[["ON","HIGH"],["OFF","LOW"]],ids:[["1","1"],["2","2"],["3","3"],["4","4"]],sensor_range:[["%","PERCENT"],["0..1023","RAW"]],intPins:[["D1","5"],["D2","4"],["D3","0"],["D4","2"],["D5","14"],["D6","12"],["D7","13"],["D8","15"],["RX","3"],["TX","1"]],setupCode:[""],loopCode:["\tyield();\n"]},arduino_promicro:{description:"Arduino Pro Micro",micro:"atmelavr",digital:[["0-RX","0"],["1-TX","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"]],rxtx:[["0-RX","0"],["1-TX","1"],["8","8"],["9","9"],["10","10"],["11","11"]],PWM:[["3","3"],["5","5"],["6","6"],["9","9"],["10","10"],["11","11"]],analog:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"]],ir_rx:[["0-RX","0"],["1-TX","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"]],ir_tx:[["3","3"]],encoder_clk:[["2","2"]],encoder_dt:[["3","3"]],spi_mosi:[["11","11"]],spi_miso:[["12","12"]],spi_clk:[["13","13"]],sd_cs:[["10","10"]],picture:"media/Arduino-Nano-Pinout.jpg",miniPicture:"media/Arduino-Nano-Pinout-mini.jpg",serial:9600,logic_levels:[["ON","HIGH"],["OFF","LOW"]],ids:[["1","1"],["2","2"],["3","3"],["4","4"]],sensor_range:[["%","PERCENT"],["0..1023","RAW"]],intPins:[["2","2"],["3","3"]],setupCode:[""],loopCode:[""]},arduino_leonardo:{description:"Arduino Leonardo",micro:"atmelavr",digital:[["0-RX","0"],["1-TX","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],rxtx:[["0-RX","0"],["1-TX","1"],["8","8"],["9","9"],["10","10"],["11","11"]],PWM:[["3","3"],["5","5"],["6","6"],["9","9"],["10","10"],["11","11"]],analog:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],ir_rx:[["0-RX","0"],["1-TX","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],ir_tx:[["3","3"]],encoder_clk:[["2","2"]],encoder_dt:[["3","3"]],spi_mosi:[["11","11"]],spi_miso:[["12","12"]],spi_clk:[["13","13"]],sd_cs:[["4","4"]],picture:"media/Arduino-Uno-Pinout.jpg",miniPicture:"media/Arduino-Uno-Pinout-mini.jpg",serial:9600,logic_levels:[["ON","HIGH"],["OFF","LOW"]],ids:[["1","1"],["2","2"],["3","3"],["4","4"]],sensor_range:[["%","PERCENT"],["0..1023","RAW"]],intPins:[["2","2"],["3","3"]],setupCode:[""],loopCode:[""]},arduino_uno:{description:"Arduino Uno",micro:"atmelavr",digital:[["0-RX","0"],["1-TX","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],rxtx:[["0-RX","0"],["1-TX","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"]],PWM:[["3","3"],["5","5"],["6","6"],["9","9"],["10","10"],["11","11"]],analog:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],ir_rx:[["0-RX","0"],["1-TX","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],ir_tx:[["3","3"]],encoder_clk:[["2","2"]],encoder_dt:[["3","3"]],spi_mosi:[["11","11"]],spi_miso:[["12","12"]],spi_clk:[["13","13"]],sd_cs:[["4","4"]],picture:"media/Arduino-Uno-Pinout.jpg",miniPicture:"media/Arduino-Uno-Pinout-mini.jpg",serial:9600,logic_levels:[["ON","HIGH"],["OFF","LOW"]],ids:[["1","1"],["2","2"],["3","3"],["4","4"]],sensor_range:[["%","PERCENT"],["0..1023","RAW"]],intPins:[["2","2"],["3","3"]],setupCode:[""],loopCode:[""]},arduino_uno_easyplug:{description:"Arduino Uno",micro:"atmelavr",digital:[["D5","5"],["D6","6"],["D7","7"],["D8","8"],["D9","9"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"]],rxtx:[["COM-RX","0"],["COM-TX","1"],["D3","3"],["D4","4"]],PWM:[["D5","5"],["D6","6"],["D9","9"]],analog:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"]],analog2:[["A6","A6"],["A7","A7"]],ir_rx:[["D5","5"],["D6","6"],["D7","7"],["D8","8"],["D9","9"]],ir_tx:[["D3","3"]],encoder_clk:[["D2","2"]],encoder_dt:[["D3","3"]],spi_mosi:[["D11","11"]],spi_miso:[["D12","12"]],spi_clk:[["D13","13"]],sd_cs:[["D4","4"]],picture:"media/easyplug.jpg",miniPicture:"media/easyplug_icon.jpg",serial:9600,logic_levels:[["ON","HIGH"],["OFF","LOW"]],ids:[["1","1"],["2","2"],["3","3"],["4","4"]],sensor_range:[["%","PERCENT"],["0..1023","RAW"]],intPins:[["2","2"],["3","3"]],setupCode:[""],loopCode:[""]},arduino_uno_keybot:{description:"Arduino Uno",micro:"atmelavr",digital:[["D3","3"],["D8","8"],["D9","9"],["D10","10"],["D11","11"],["D12","12"],["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"]],rxtx:[["COM-RX","0"],["COM-TX","1"],["D3","3"],["D4","4"]],PWM:[["D9","9"]],analog:[["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"]],ir_rx:[["D11","11"]],ir_tx:[["D3","3"]],encoder_clk:[["D2","2"]],encoder_dt:[["D3","3"]],spi_mosi:[["D11","11"]],spi_miso:[["D12","12"]],spi_clk:[["D13","13"]],sd_cs:[["D4","4"]],picture:"media/keybot.jpg",miniPicture:"media/keybot_icon.jpg",serial:9600,logic_levels:[["ON","HIGH"],["OFF","LOW"]],ids:[["1","1"],["2","2"],["3","3"],["4","4"]],sensor_range:[["%","PERCENT"],["0..1023","RAW"]],intPins:[["2","2"],["3","3"]],setupCode:[""],loopCode:[""]},arduino_nano:{description:"Arduino Nano",micro:"atmelavr",digital:[["0-RX","0"],["1-TX","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"]],rxtx:[["0-RX","0"],["1-TX","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"]],PWM:[["3","3"],["5","5"],["6","6"],["9","9"],["10","10"],["11","11"]],analog:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"]],ir_rx:[["0-RX","0"],["1-TX","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"]],ir_tx:[["3","3"]],encoder_clk:[["2","2"]],encoder_dt:[["3","3"]],spi_mosi:[["11","11"]],spi_miso:[["12","12"]],spi_clk:[["13","13"]],sd_cs:[["10","10"]],picture:"media/Arduino-Nano-Pinout.jpg",miniPicture:"media/Arduino-Nano-Pinout-mini.jpg",serial:9600,logic_levels:[["ON","HIGH"],["OFF","LOW"]],ids:[["1","1"],["2","2"],["3","3"],["4","4"]],sensor_range:[["%","PERCENT"],["0..1023","RAW"]],intPins:[["2","2"],["3","3"]],setupCode:[""],loopCode:[""]},arduino_mega:{description:"Arduino Mega",micro:"atmelavr",digital:[["0-RX","0"],["1-TX","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14-TX(3)","14"],["15-RX(3)","15"],["16-TX(2)","16"],["17-RX(2)","17"],["18-TX(1)","18"],["19-RX(1)","19"],["20","20"],["21","21"],["22","22"],["23","23"],["24","24"],["25","25"],["26","26"],["27","27"],["28","28"],["29","29"],["30","30"],["31","31"],["32","32"],["33","33"],["34","34"],["35","35"],["36","36"],["37","37"],["38","38"],["39","39"],["40","40"],["41","41"],["42","42"],["43","43"],["44","44"],["45","45"],["46","46"],["47","47"],["48","48"],["49","49"],["50","50"],["51","51"],["52","52"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"],["A8","A8"],["A9","A9"],["A10","A10"],["A11","A11"],["A12","A12"],["A13","A13"],["A14","A14"],["A15","A15"]],rxtx:[["0-RX","0"],["1-TX","1"],["10","10"],["11","11"],["12","12"],["13","13"],["14-TX(3)","14"],["15-RX(3)","15"],["16-TX(2)","16"],["17-RX(2)","17"],["18-TX(1)","18"],["19-RX(1)","19"],["50","50"],["51","51"],["52","52"]],PWM:[["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["44","44"],["45","45"],["46","46"]],analog:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"],["A8","A8"],["A9","A9"],["A10","A10"],["A11","A11"],["A12","A12"],["A13","A13"],["A14","A14"],["A15","A15"]],ir_rx:[["0-RX","0"],["1-TX","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14-TX(3)","14"],["15-RX(3)","15"],["16-TX(2)","16"],["17-RX(2)","17"],["18-TX(1)","18"],["19-RX(1)","19"],["20","20"],["21","21"],["22","22"],["23","23"],["24","24"],["25","25"],["26","26"],["27","27"],["28","28"],["29","29"],["30","30"],["31","31"],["32","32"],["33","33"],["34","34"],["35","35"],["36","36"],["37","37"],["38","38"],["39","39"],["40","40"],["41","41"],["42","42"],["43","43"],["44","44"],["45","45"],["46","46"],["47","47"],["48","48"],["49","49"],["50","50"],["51","51"],["52","52"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"],["A8","A8"],["A9","A9"],["A10","A10"],["A11","A11"],["A12","A12"],["A13","A13"],["A14","A14"],["A15","A15"]],ir_tx:[["3","3"]],encoder_clk:[["2","2"]],encoder_dt:[["3","3"]],spi_mosi:[["51","51"]],spi_miso:[["50","50"]],spi_clk:[["52","52"]],sd_cs:[["4","4"]],picture:"media/Arduino-Mega-2560-Pinout.jpg",miniPicture:"media/Arduino-Mega-2560-Pinout-mini.jpg",serial:9600,logic_levels:[["ON","HIGH"],["OFF","LOW"]],ids:[["1","1"],["2","2"],["3","3"],["4","4"]],sensor_range:[["%","PERCENT"],["0..1023","RAW"]],intPins:[["2","2"],["3","3"],["18","18"],["19","19"],["20","20"],["21","21"]],setupCode:[""],loopCode:[""]}};function setupUltrasonic3dBot(){Blockly.Arduino.definitions_fnc_.fnc_ultrasonic_3dbot="double fnc_3dbot_distance(int _t, int _e){\n\tunsigned long dur=0;\n\tdigitalWrite(_t, LOW);\n\tdelayMicroseconds(5);\n\tdigitalWrite(_t, HIGH);\n\tdelayMicroseconds(10);\n\tdigitalWrite(_t, LOW);\n\tdur = pulseIn(_e, HIGH, 18000);\n\treturn (dur/57);\n}\n"}function hexToR(i){return parseInt(cutHex(i).substring(0,2),16)}function hexToG(i){return parseInt(cutHex(i).substring(2,4),16)}function hexToB(i){return parseInt(cutHex(i).substring(4,6),16)}function cutHex(i){return"#"==i.charAt(0)?i.substring(1,7):i}function bluetooth_varDef(i,e){var o="SoftwareSerial bt_serial("+e+","+i+");";return 0==e&&1==i&&(o="HardwareSerial &bt_serial=Serial;",Blockly.Arduino.definitions_.define_hardserial="#include <HardwareSerial.h>\n"),"Arduino Mega"==profile.default.description&&(19==e&&18==i&&(o="HardwareSerial &bt_serial=Serial1;",Blockly.Arduino.definitions_.define_hardserial="#include <HardwareSerial.h>\n"),17==e&&16==i&&(o="HardwareSerial &bt_serial=Serial2;",Blockly.Arduino.definitions_.define_hardserial="#include <HardwareSerial.h>\n"),15==e&&14==i&&(o="HardwareSerial &bt_serial=Serial3;",Blockly.Arduino.definitions_.define_hardserial="#include <HardwareSerial.h>\n")),o}function setupBluetooth(){Blockly.Arduino.definitions_.define_softserial="#include <SoftwareSerial.h>\n",Blockly.Arduino.definitions_.var_bluetooth||(Blockly.Arduino.definitions_.var_bluetooth=bluetooth_varDef(2,3)),Blockly.Arduino.setups_.setup_bluetooth||(Blockly.Arduino.setups_.setup_bluetooth="\tbt_serial.begin(9600);\n")}function setupPzem004t(i,e){Blockly.Arduino.definitions_.define_softserial="#include <SoftwareSerial.h>\n",Blockly.Arduino.definitions_.define_pzem004t='#include "PZEM004T.h"',Blockly.Arduino.definitions_.var_pzem004t||(Blockly.Arduino.definitions_.var_pzem004t="PZEM004T pzem_004t("+i+","+e+");")}function gps_varDef(i,e){var o="SoftwareSerial gps_serial("+e+","+i+");";return 0==e&&1==i&&(o="HardwareSerial &bt_serial=Serial;",Blockly.Arduino.definitions_.define_hardserial="#include <HardwareSerial.h>\n"),"Arduino Mega"==profile.default.description&&(19==e&&18==i&&(o="HardwareSerial &gps_serial=Serial1;",Blockly.Arduino.definitions_.define_hardserial="#include <HardwareSerial.h>\n"),17==e&&16==i&&(o="HardwareSerial &gps_serial=Serial2;",Blockly.Arduino.definitions_.define_hardserial="#include <HardwareSerial.h>\n"),15==e&&14==i&&(o="HardwareSerial &gps_serial=Serial3;",Blockly.Arduino.definitions_.define_hardserial="#include <HardwareSerial.h>\n")),o}function setupGps(){Blockly.Arduino.definitions_.define_softserial="#include <SoftwareSerial.h>\n",Blockly.Arduino.definitions_.define_gps='#include "ABlocks_TinyGPS.h"',Blockly.Arduino.definitions_.var_gps="TinyGPS gps;",Blockly.Arduino.definitions_.var_gps_lat="float gps_lat=0;",Blockly.Arduino.definitions_.var_gps_long="float gps_long=0;",Blockly.Arduino.definitions_.var_gps_speed_kmph="float gps_speed_kmph=0;",Blockly.Arduino.definitions_.var_gps_speed_mph="float gps_speed_mph=0;",Blockly.Arduino.definitions_.var_gps_altitude="float gps_altitude=0;",Blockly.Arduino.definitions_.var_gps_course="float gps_course=0;",Blockly.Arduino.definitions_.var_gps_fixed="bool gps_fixed=false;",Blockly.Arduino.definitions_.var_gps_day="byte gps_day=0;",Blockly.Arduino.definitions_.var_gps_month="byte gps_month=0;",Blockly.Arduino.definitions_.var_gps_year="int gps_year=0;",Blockly.Arduino.definitions_.var_gps_hour="byte gps_hour=0;",Blockly.Arduino.definitions_.var_gps_min="byte gps_min=0;",Blockly.Arduino.definitions_.var_gps_sec="byte gps_sec=0;",Blockly.Arduino.definitions_.var_gps_hund="byte gps_hund=0;",Blockly.Arduino.definitions_.var_gps_serial||(Blockly.Arduino.definitions_.var_gps_serial=gps_varDef(2,3)),Blockly.Arduino.setups_.setup_gps='\tgps_serial.begin(9600);\ngps_serial.println("$PMTK220,1000*1F");';var i="void fnc_gps_update()\n{\n\tunsigned long fix_age;\n",e=Blockly.Arduino.definitions_.var_gps_serial;e&&e.startsWith("SoftwareSerial")&&(i+="\tgps_serial.listen();\n"),Blockly.Arduino.definitions_fnc_.fnc_gps=i+"\twhile (gps_serial.available()){\n\t\tif(gps.encode(gps_serial.read())){\n\t\t\tgps_fixed=false;\n\t\t\tgps_lat=gps_long=gps_speed_kmph=gps_speed_mph=gps_course=0;\n\t\t\tgps_day=gps_month=gps_year=gps_hour=gps_min=gps_sec=0;\n\t\t\tgps.f_get_position(&gps_lat, &gps_long, &fix_age);\n\t\t\tif (fix_age != TinyGPS::GPS_INVALID_AGE && fix_age<5000){\n\t\t\t\tgps_fixed=true;\n\t\t\t\tgps.crack_datetime(&gps_year, &gps_month, &gps_day,&gps_hour, &gps_min, &gps_sec, &gps_hund, &fix_age);\n\t\t\t\tgps_altitude=gps.f_altitude();\n\t\t\t\tgps_course=gps.f_course();\n\t\t\t\tgps_speed_kmph=gps.f_speed_kmph();\n\t\t\t\tgps_speed_mph=gps.f_speed_mph();\n\t\t\t}\n\t\t}\n\t}\n}\n\n",Blockly.Arduino.loops_.loop_gps="\tfnc_gps_update();"}function setupUltrasonicKeybot(){Blockly.Arduino.definitions_fnc_.fnc_ultrasonic_keybot="double fnc_keybot_distance(int _t, int _e){\n\tunsigned long dur=0;\n\tdigitalWrite(_t, LOW);\n\tdelayMicroseconds(5);\n\tdigitalWrite(_t, HIGH);\n\tdelayMicroseconds(10);\n\tdigitalWrite(_t, LOW);\n\tdur = pulseIn(_e, HIGH, 18000);\n\treturn (dur/57);\n}\n"}function setup_keypad_init(){Blockly.Arduino.definitions_fnc_.fnc_keypad_keystr='String fnc_keypad_keystr(int _key)\n{\n\tString v="";\n\tif(_key==1)v="1";\n\tif(_key==2)v="2";\n\tif(_key==3)v="3";\n\tif(_key==4)v="4";\n\tif(_key==5)v="5";\n\tif(_key==6)v="6";\n\tif(_key==7)v="7";\n\tif(_key==8)v="8";\n\tif(_key==9)v="9";\n\tif(_key==10)v="*";\n\tif(_key==11)v="0";\n\tif(_key==12)v="#";\n\tif(_key==13)v="A";\n\tif(_key==14)v="B";\n\tif(_key==15)v="C";\n\tif(_key==16)v="D";\n\treturn v;\n}\n'}function setupLCD(){Blockly.Arduino.definitions_.define_lcd||(Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_lcd='#include "ABlocks_LiquidCrystal_I2C.h"'),Blockly.Arduino.definitions_.var_lcd||(Blockly.Arduino.definitions_.var_lcd="LiquidCrystal_I2C lcd(0x27,16,2);"),Blockly.Arduino.setups_.setup_lcd||(Blockly.Arduino.setups_.setup_lcd="lcd.begin();lcd.noCursor();lcd.backlight();")}function mqttserial_varDef(i,e){var o="SoftwareSerial mqtt_esp8266_serial("+e+","+i+");";return 0==e&&1==i&&(o="HardwareSerial &mqtt_esp8266_serial=Serial;",Blockly.Arduino.definitions_.define_hardserial="#include <HardwareSerial.h>\n"),"Arduino Mega"==profile.default.description&&(19==e&&18==i&&(o="HardwareSerial &mqtt_esp8266_serial=Serial1;",Blockly.Arduino.definitions_.define_hardserial="#include <HardwareSerial.h>\n"),17==e&&16==i&&(o="HardwareSerial &mqtt_esp8266_serial=Serial2;",Blockly.Arduino.definitions_.define_hardserial="#include <HardwareSerial.h>\n"),15==e&&14==i&&(o="HardwareSerial &mqtt_esp8266_serial=Serial3;",Blockly.Arduino.definitions_.define_hardserial="#include <HardwareSerial.h>\n")),o}function setupMQTT(i,e,o){var n;for(n in""!=i&&(Blockly.Arduino.definitions_.define_contype="//ABlocksIOT: "+i),"ethernet"==i&&(Blockly.Arduino.definitions_.define_spi="#include <SPI.h>\n",Blockly.Arduino.definitions_.define_ethernet="#include <Ethernet.h>\n",Blockly.Arduino.definitions_.define_mqtt='#include "ABlocksIOTMQTTEthernet.h"\n',Blockly.Arduino.definitions_.var_mqtt_mac||(Blockly.Arduino.definitions_.var_mqtt_mac="const byte mqtt_mac[] = {  0xDE, 0xED, 0xBA, 0xFE, 0xFE, 0x01 };")),"esp8266"==i&&(Blockly.Arduino.definitions_.define_softserial="#include <SoftwareSerial.h>\n",Blockly.Arduino.definitions_.define_mqtt='#include "ABlocksIOTMQTTESP8266.h"\n',Blockly.Arduino.definitions_.var_mqtt_esp8266=mqttserial_varDef(e,o)+"\nESP8266 mqtt_esp8266_wifi(&mqtt_esp8266_serial);"),Blockly.Arduino.definitions_.var_mqtt_broker||(Blockly.Arduino.definitions_.var_mqtt_broker='const char mqtt_broker[]="iot.eclipse.org";'),Blockly.Arduino.definitions_.var_mqtt_port||(Blockly.Arduino.definitions_.var_mqtt_port="const int mqtt_port=1883;"),Blockly.Arduino.definitions_.var_mqtt_user||(Blockly.Arduino.definitions_.var_mqtt_user='const char mqtt_user[]="";'),Blockly.Arduino.definitions_.var_mqtt_pass||(Blockly.Arduino.definitions_.var_mqtt_pass='const char mqtt_pass[]="";'),Blockly.Arduino.definitions_.var_mqtt_clientid||(Blockly.Arduino.definitions_.var_mqtt_clientid='const char mqtt_clientid[]="AB_client";'),Blockly.Arduino.definitions_.var_mqtt_payload="char mqtt_payload[64];",Blockly.Arduino.definitions_fnc_.fnc_mqtt_payload2double="\ndouble mqtt_payload2double(unsigned char *_payload, int _length){\n\tint i;\n\tfor (i = 0; i<_length && i<64; i++){\n\t\tmqtt_payload[i] = _payload[i];\n\t}\n\tmqtt_payload[i] = 0;\n\treturn atof(mqtt_payload);\n}",Blockly.Arduino.definitions_fnc_.fnc_mqtt_payload2string="\nString mqtt_payload2string(unsigned char *_payload, int _length){\n\tint i;\n\tfor (i = 0; i<_length && i<64; i++){\n\t\tmqtt_payload[i] = _payload[i];\n\t}\n\tmqtt_payload[i] = 0;\n\treturn String(mqtt_payload);\n}",Blockly.Arduino.loops_.loop_iot="\tABlocksIOT.loop();",Blockly.Arduino.definitions_.var_mqtt_esp8266&&(Blockly.Arduino.loops_.loop_iot="\tmqtt_esp8266_serial.listen(); ABlocksIOT.loop();"),(i=Blockly.Arduino.definitions_.var_mqtt_esp8266)&&i.startsWith("HardwareSerial")&&(Blockly.Arduino.loops_.loop_iot="\tABlocksIOT.loop();"),i="void mqtt_callback(char* _topic, unsigned char* _payload, unsigned int _payloadlength){\n\tdouble v=mqtt_payload2double(_payload,_payloadlength);\n\tString vt=mqtt_payload2string(_payload,_payloadlength);\n",Blockly.Arduino.mqtt_sub_)i=(e=Blockly.Arduino.mqtt_sub_[n]).startsWith("s_")?i+"\tif(String(_topic)==String("+n+"))"+e+"=vt;\n":i+"\tif(String(_topic)==String("+n+"))"+e+"=v;\n";for(n in Blockly.Arduino.definitions_fnc_.fnc_mqtt_callback=i+"}\n",i="void mqtt_subscribe(){\n",Blockly.Arduino.mqtt_sub_)i+="\tABlocksIOT.Subscribe(String("+n+"));\n";Blockly.Arduino.definitions_fnc_.fnc_mqtt_subscribe=i+"}\n"}function setupMQTT_ESP(){var i;Blockly.Arduino.definitions_.define_esp8266wifi='#include "ESP8266WiFi.h"\n',Blockly.Arduino.definitions_.define_mqtt='#include "PubSubClient.h"\n',Blockly.Arduino.definitions_.var_wificlient="WiFiClient mqtt_wifiClient;",Blockly.Arduino.definitions_.var_mqtt="PubSubClient mqtt_client(mqtt_wifiClient);",Blockly.Arduino.definitions_.var_mqtt_broker||(Blockly.Arduino.definitions_.var_mqtt_broker='const char mqtt_broker[]="iot.eclipse.org";'),Blockly.Arduino.definitions_.var_mqtt_port||(Blockly.Arduino.definitions_.var_mqtt_port="const int mqtt_port=1883;"),Blockly.Arduino.definitions_.var_mqtt_user||(Blockly.Arduino.definitions_.var_mqtt_user='const char mqtt_user[]="";'),Blockly.Arduino.definitions_.var_mqtt_pass||(Blockly.Arduino.definitions_.var_mqtt_pass='const char mqtt_pass[]="";'),Blockly.Arduino.definitions_.var_mqtt_clientid||(Blockly.Arduino.definitions_.var_mqtt_clientid='const char mqtt_clientid[]="AB_client";'),Blockly.Arduino.definitions_.var_mqtt_payload="char mqtt_payload[64];",Blockly.Arduino.definitions_fnc_.fnc_mqtt_setupwifi="\nvoid mqtt_setup(){\n\tdelay(10);;\n\tWiFi.begin(mqtt_wifi_ssid,mqtt_wifi_pass);\n\twhile (WiFi.status() != WL_CONNECTED) delay(500);\n\trandomSeed(micros());\n  mqtt_client.setServer(mqtt_broker, mqtt_port);\n  mqtt_client.setCallback(mqtt_callback);\n\tmqtt_subscribe();\n}",Blockly.Arduino.definitions_fnc_.fnc_mqtt_loop="\nvoid mqtt_loop(){\n\tif (!mqtt_client.connected()) {\n\t\tmqtt_client.connect(mqtt_clientid,mqtt_user,mqtt_pass);\n\t\tmqtt_subscribe();\n\t}\n\tif (mqtt_client.connected()) {\n  \tmqtt_client.loop();\n\t}\n}",Blockly.Arduino.definitions_fnc_.fnc_mqtt_payload2double="\ndouble mqtt_payload2double(unsigned char *_payload, int _length){\n\tint i;\n\tfor (i = 0; i<_length && i<64; i++){\n\t\tmqtt_payload[i] = _payload[i];\n\t}\n\tmqtt_payload[i] = 0;\n\treturn atof(mqtt_payload);\n}",Blockly.Arduino.definitions_fnc_.fnc_mqtt_payload2string="\nString mqtt_payload2string(unsigned char *_payload, int _length){\n\tint i;\n\tfor (i = 0; i<_length && i<64; i++){\n\t\tmqtt_payload[i] = _payload[i];\n\t}\n\tmqtt_payload[i] = 0;\n\treturn String(mqtt_payload);\n}",Blockly.Arduino.loops_.loop_mqtt="\tmqtt_loop();";var e="void mqtt_callback(char* _topic, unsigned char* _payload, unsigned int _payloadlength){\n\tdouble v=mqtt_payload2double(_payload,_payloadlength);\n\tString vt=mqtt_payload2string(_payload,_payloadlength);\n";for(i in Blockly.Arduino.mqtt_sub_){var o=Blockly.Arduino.mqtt_sub_[i];e=o.startsWith("s_")?e+"\tif(String(_topic)==String("+i+"))"+o+"=vt;\n":e+"\tif(String(_topic)==String("+i+"))"+o+"=v;\n"}for(i in Blockly.Arduino.definitions_fnc_.fnc_mqtt_callback=e+"}\n",e="void mqtt_subscribe(){\n",Blockly.Arduino.mqtt_sub_)e="esp8266"==profile.default.micro?e+"\tmqtt_client.subscribe(String("+i+").c_str());\n":e+"\tmqtt_client.Subscribe(String("+i+"));\n";Blockly.Arduino.definitions_fnc_.fnc_mqtt_subscribe=e+"}\n"}function hexToR(i){return parseInt(cutHex(i).substring(0,2),16)}function hexToG(i){return parseInt(cutHex(i).substring(2,4),16)}function hexToB(i){return parseInt(cutHex(i).substring(4,6),16)}function cutHex(i){return"#"==i.charAt(0)?i.substring(1,7):i}function setupOtto(){Blockly.Arduino.definitions_.define_servo="#include <Servo.h>",Blockly.Arduino.definitions_.define_otto='#include "Otto.h"',Blockly.Arduino.definitions_.define_us='#include "US.h"',Blockly.Arduino.definitions_.define_oscillator='#include "Oscillator.h"',Blockly.Arduino.definitions_.var_otto||(Blockly.Arduino.definitions_.var_otto="Otto robot_otto;"),Blockly.Arduino.setups_.setup_otto||(Blockly.Arduino.setups_.setup_otto="robot_otto.init(2,3,4,5,false,A6,13,8,9);")}function setupRFID(){Blockly.Arduino.definitions_.define_rfid||(Blockly.Arduino.definitions_.define_spi="#include <SPI.h>\n",Blockly.Arduino.definitions_.define_rfid='#include "ABlocks_MFRC522.h"'),Blockly.Arduino.definitions_.var_rfid||(Blockly.Arduino.definitions_.var_rfid="MFRC522 mfrc522(10, 9);\n"),Blockly.Arduino.setups_.setup_rfid||(Blockly.Arduino.setups_.setup_rfid="SPI.begin(); mfrc522.PCD_Init();\n"),Blockly.Arduino.definitions_fnc_.fnc_rfid='String fnc_rfid_readID(){\n\tString v="";\n\tif(!mfrc522.PICC_ReadCardSerial()) return v;\n\tfor ( uint8_t i = 0; i < mfrc522.uid.size; i++) {\n\t\tuint8_t _baux=(uint8_t)mfrc522.uid.uidByte[i];\n\t\tv+=String((uint8_t)_baux, HEX);\n\t}\n\tmfrc522.PICC_HaltA();\n\treturn v;\n}\n'}function setupRtc(){Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_rtc='#include "ABlocks_DS3231rtc.h"',Blockly.Arduino.definitions_.var_rtc="DS3231rtc rtc;\n",Blockly.Arduino.setups_.setup_rtc="rtc.begin();\n"}function setupSD(){Blockly.Arduino.definitions_.define_spi="#include <SPI.h>\n",Blockly.Arduino.definitions_.define_sd="#include <SD.h>\n",Blockly.Arduino.definitions_.var_sdfile||(Blockly.Arduino.definitions_.var_sdfile="File sd_file;\n"),Blockly.Arduino.setups_.setup_sd||(Blockly.Arduino.setups_.setup_sd="\tSD.begin(4);\n")}function setupUltrasonic(){Blockly.Arduino.definitions_fnc_.fnc_ultrasonic="double fnc_ultrasonic_distance(int _t, int _e){\n\tunsigned long dur=0;\n\tdigitalWrite(_t, LOW);\n\tdelayMicroseconds(5);\n\tdigitalWrite(_t, HIGH);\n\tdelayMicroseconds(10);\n\tdigitalWrite(_t, LOW);\n\tdur = pulseIn(_e, HIGH, 18000);\n\treturn (dur/57);\n}\n"}function setupEncoder(i,e){Blockly.Arduino.definitions_.var_encoder="volatile long encoder_pos=0;",Blockly.Arduino.definitions_.var_encoder_A="boolean encoder_A_set =false;",Blockly.Arduino.definitions_.var_encoder_B="boolean encoder_B_set =false;",Blockly.Arduino.definitions_.var_encoder_rotating="static boolean encoder_rotating=false;",Blockly.Arduino.definitions_fnc_.fnc_encoder_intA="void fnc_encoder_intA(){\n\tif ( encoder_rotating ) delay (1);\n\tif( digitalRead(2) != encoder_A_set ) {\n\t\tencoder_A_set = !encoder_A_set;\n\t\tif ( encoder_A_set && !encoder_B_set ) encoder_pos += 1;\n\t\tencoder_rotating = false;\n\t}\n}\n\n",Blockly.Arduino.definitions_fnc_.fnc_encoder_intB="void fnc_encoder_intB(){\n\tif ( encoder_rotating ) delay (1);\n\tif( digitalRead(3) != encoder_B_set ) {\n\t\tencoder_B_set = !encoder_B_set;\n\t\tif ( encoder_B_set && !encoder_A_set ) encoder_pos -= 1;\n\t\tencoder_rotating = false;\n\t}\n}\n\n",Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",Blockly.Arduino.setups_["setup_input_"+e]="pinMode("+e+", INPUT);",Blockly.Arduino.setups_["setup_pullup_"+i]="digitalWrite("+i+",HIGH);",Blockly.Arduino.setups_["setup_pullup_"+e]="digitalWrite("+e+",HIGH);",Blockly.Arduino.setups_["setup_encoder_int_"+i]="attachInterrupt(0, fnc_encoder_intA, CHANGE);",Blockly.Arduino.setups_["setup_encoder_int_"+e]="attachInterrupt(1, fnc_encoder_intB, CHANGE);"}function setupColorSensorTCS34725(){Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_TCS34725='#include "Adafruit_TCS34725.h"\n',Blockly.Arduino.definitions_.define_colorconverter='#include "ColorConverterLib.h"\n',Blockly.Arduino.definitions_.var_TCS34725="Adafruit_TCS34725 tcs34725 = Adafruit_TCS34725(TCS34725_INTEGRATIONTIME_50MS, TCS34725_GAIN_1X);",Blockly.Arduino.definitions_.var_TCS34725_r="double  tcs34725_r=0;",Blockly.Arduino.definitions_.var_TCS34725_g="double  tcs34725_g=0;",Blockly.Arduino.definitions_.var_TCS34725_b="double  tcs34725_b=0;",Blockly.Arduino.definitions_.var_TCS34725_clear="uint16_t  tcs34725_clear=0;",Blockly.Arduino.definitions_.var_TCS34725_h="double  tcs34725_h=0;",Blockly.Arduino.definitions_.var_TCS34725_s="double  tcs34725_s=0;",Blockly.Arduino.definitions_.var_TCS34725_v="double  tcs34725_v=0;",Blockly.Arduino.setups_.setup_TCS34725="tcs34725.begin();",Blockly.Arduino.definitions_fnc_.fnc_tcs34725="void fnc_tcs34725_capturecolor()\n{\n\tuint16_t tcs_red, tcs_green, tcs_blue;\n\ttcs34725.getRawData(&tcs_red, &tcs_green, &tcs_blue, &tcs34725_clear);\n\tif (tcs34725_clear == 0) {\n\t\ttcs34725_r=tcs34725_g=tcs34725_b=0;\n\t\treturn;\n\t}\n\ttcs34725_r = ((float)tcs_red / (float)tcs34725_clear * 255.0);\n\ttcs34725_g = ((float)tcs_green / (float)tcs34725_clear * 255.0);\n\ttcs34725_b = ((float)tcs_blue / (float)tcs34725_clear * 255.0);\n\tColorConverter::RgbToHsv(static_cast<uint8_t>(tcs34725_r), static_cast<uint8_t>(tcs34725_g), static_cast<uint8_t>(tcs34725_b), tcs34725_h, tcs34725_s,tcs34725_v);\n\ttcs34725_h=tcs34725_h*360;\n\ttcs34725_s=tcs34725_s*100;\n\ttcs34725_v=tcs34725_v*100;\n}\n"}function setupSerial(){Blockly.Arduino.setups_.setup_serial||(Blockly.Arduino.setups_.setup_serial="Serial.begin(9600);\n")}profile.default=profile.arduino_uno,Blockly.Arduino.init=function(i){if(Blockly.gencode_allowed_blocks=["control_arduino_setup","control_arduino_loop","procedures_defnoreturn","procedures_defreturn","io_interrupt"],Blockly.Arduino.neopixel_count=0,Blockly.Arduino.ledmatrix_count=0,Blockly.Arduino.oled_count=0,Blockly.Arduino.definitions_=Object.create(null),Blockly.Arduino.definitions_fnc_=Object.create(null),Blockly.Arduino.setups_=Object.create(null),Blockly.Arduino.loops_=Object.create(null),Blockly.Arduino.mqtt_sub_=Object.create(null),Blockly.Arduino.functionNames_=Object.create(null),Blockly.Variables){Blockly.Arduino.variableDB_?(Blockly.Arduino.variableDB_.reset(),Blockly.Arduino.variableDB_Text_.reset(),Blockly.Arduino.variableDB_Bool_.reset()):(Blockly.Arduino.variableDB_=new Blockly.Names(Blockly.Arduino.RESERVED_WORDS_),Blockly.Arduino.variableDB_Text_=new Blockly.Names(Blockly.Arduino.RESERVED_WORDS_),Blockly.Arduino.variableDB_Bool_=new Blockly.Names(Blockly.Arduino.RESERVED_WORDS_));for(var e=[],o=Blockly.Variables.allVariables(i),n=0;n<o.length;n++)e[n]="double "+Blockly.Arduino.variableDB_.getName(o[n],Blockly.Variables.NAME_TYPE)+";";for(Blockly.Arduino.definitions_.variables=e.join("\n")+"\n",e=Blockly.Variables.allVariablesText(i),o=[],n=0;n<e.length;n++)o[n]="String s_"+Blockly.Arduino.variableDB_Text_.getName(e[n],Blockly.Variables.NAME_TYPE)+";";for(Blockly.Arduino.definitions_.variables_text=o.join("\n")+"\n",i=Blockly.Variables.allVariablesBool(i),e=[],n=0;n<i.length;n++)e[n]="boolean b_"+Blockly.Arduino.variableDB_Bool_.getName(i[n],Blockly.Variables.NAME_TYPE)+";";Blockly.Arduino.definitions_.variables_bool=e.join("\n")+"\n"}},Blockly.Arduino.finish=function(i){for(var e=[],o=0;o<profile.default.loopCode.length;o++)""!=profile.default.loopCode[o]&&e.push(profile.default.loopCode[o]);for(var n in Blockly.Arduino.loops_)o=Blockly.Arduino.loops_[n],e.push(o);i=(i="  "+i.replace(/\n/g,"\n  ")).replace(/\n\s+$/,"\n"),i="void loop() \n{\n"+e.join("\n")+"\n"+i+"\n}",e=[];var t=[];for(n in Blockly.Arduino.definitions_)(o=Blockly.Arduino.definitions_[n]).match(/^#include/)?e.push(o):t.push(o);var l=[];for(n in Blockly.Arduino.definitions_fnc_)o=Blockly.Arduino.definitions_fnc_[n],l.push(o);var r=[];for(o=0;o<profile.default.setupCode.length;o++)""!=profile.default.setupCode[o]&&r.push(profile.default.setupCode[o]);for(n in Blockly.Arduino.setups_)"arduino_setup"!=n&&r.push(Blockly.Arduino.setups_[n]);return(n=Blockly.Arduino.setups_.arduino_setup)&&r.push(n),(e.join("\n")+"\n\n"+t.join("\n")+"\n\n"+l.join("\n")+"\n\nvoid setup() \n{\n  "+r.join("\n")+"\n}\n\n").replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+i},Blockly.Arduino.scrubNakedValue=function(i){return i+";\n"},Blockly.Arduino.quote_=function(i){return'"'+(i=i.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+'"'},Blockly.Arduino.scrub_=function(i,e){if(null===e)return"";var o="";if(!i.outputConnection||!i.outputConnection.targetConnection){var n=i.getCommentText();n&&(o+=Blockly.Arduino.prefixLines(n,"// ")+"\n");for(var t=0;t<i.inputList.length;t++)i.inputList[t].type==Blockly.INPUT_VALUE&&(n=i.inputList[t].connection.targetBlock())&&(n=Blockly.Arduino.allNestedComments(n))&&(o+=Blockly.Arduino.prefixLines(n,"// "))}return t=i.nextConnection&&i.nextConnection.targetBlock(),o+e+(t=Blockly.Arduino.blockToCode(t))},Blockly.Arduino.pinDigitalValidator=function(i){return profile.defaultBoard.digital.indexOf(i)<0?null:i},Blockly.Arduino.pinGroveDigitalValidator=function(i){var e=profile.defaultBoard.digital.indexOf(i);return 0<=e&&(e=parseInt(i)+1,e=profile.defaultBoard.digital.indexOf(String(e))),e<0?null:i},Blockly.Arduino.pinPWMValidator=function(i){return profile.defaultBoard.PWM.indexOf(i)<0?null:i},Blockly.Arduino.pinAnalogValidator=function(i){return profile.defaultBoard.analog.indexOf(i)<0?null:i},Blockly.Arduino.pinGroveAnalogValidator=function(i){var e=profile.defaultBoard.analog.indexOf(i);return 0<=e&&(e="A"+(parseInt(i.slice(1,i.length))+1),e=profile.defaultBoard.analog.indexOf(String(e))),e<0?null:i},Blockly.Arduino.pinDualValidator=function(i){return profile.defaultBoard.analog.indexOf(i)+profile.defaultBoard.digital.indexOf(i)<0?null:i},Blockly.Arduino.control={},Blockly.Arduino.control_arduino_loop=function(){return Blockly.Arduino.statementToCode(this,"DO")},Blockly.Arduino.control_group=function(){return Blockly.Arduino.statementToCode(this,"DO")},Blockly.Arduino.control_arduino_setup=function(){var i=Blockly.Arduino.statementToCode(this,"DO");return i&&(Blockly.Arduino.setups_.arduino_setup=i),null},Blockly.Arduino.controls_for=function(){var i=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),e=Blockly.Arduino.valueToCode(this,"FROM",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",o=Blockly.Arduino.valueToCode(this,"TO",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",n=Blockly.Arduino.valueToCode(this,"BY",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",t=Blockly.Arduino.statementToCode(this,"DO");if(Blockly.Arduino.INFINITE_LOOP_TRAP&&(t=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+t),e.match(/^-?\d+(\.\d+)?$/)&&o.match(/^-?\d+(\.\d+)?$/)){var l=parseFloat(e)<=parseFloat(o);l="for ("+i+" = "+e+"; "+i+(l?" <= ":" >= ")+o+"; "+i+"="+i+(l?"+":"-")+n+") {\n"+t+"}\n"}else{l="";var r=e;e.match(/^\w+$/)||e.match(/^-?\d+(\.\d+)?$/)||(l+="int "+(r=Blockly.Arduino.variableDB_.getDistinctName(i+"_start",Blockly.Variables.NAME_TYPE))+" = "+e+";\n"),(e=o).match(/^\w+$/)||o.match(/^-?\d+(\.\d+)?$/)||(l+="int "+(e=Blockly.Arduino.variableDB_.getDistinctName(i+"_end",Blockly.Variables.NAME_TYPE))+" = "+o+";\n"),l+="for ("+i+" = "+r+";\n    ("+r+" <= "+e+") ? "+i+" <= "+e+" : "+i+" >= "+e+";\n    "+i+" += ("+r+" <= "+e+") ? +"+n+" : -"+n+") {\n"+t+"}\n"}return l},Blockly.Arduino.controls_repeat_ext=function(){var i=Blockly.Arduino.valueToCode(this,"TIMES",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",e=Blockly.Arduino.statementToCode(this,"DO");Blockly.Arduino.INFINITE_LOOP_TRAP&&(e=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e);var o=Blockly.Arduino.variableDB_.getName("count",Blockly.Variables.NAME_TYPE);return"for (int "+o+" = 0; "+o+" < "+i+"; "+o+"++) {\n"+e+"}\n"},Blockly.Arduino.controls_whileUntil=function(){var i=Blockly.Arduino.valueToCode(this,"BOOL",Blockly.Arduino.ORDER_NONE)||"false",e=Blockly.Arduino.statementToCode(this,"DO");return Blockly.Arduino.INFINITE_LOOP_TRAP&&(e=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e),"UNTIL"==this.getTitleValue("MODE")&&(i.match(/^\w+$/)||(i="("+i+")"),i="!"+i),"while ("+i+") {\n"+e+"}\n"},Blockly.Arduino.control_wait_whileUntil=function(){var i=Blockly.Arduino.valueToCode(this,"CONDITION",Blockly.Arduino.ORDER_ATOMIC)||"0";return"WHILE"==this.getFieldValue("MODE")?"while("+i+");\n":"while(!("+i+"));\n"},Blockly.Arduino.lists={},Blockly.Arduino.lists_create_with=function(){this.getFieldValue("TYPE");for(var i=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),e=this.itemCount_,o=Array(this.itemCount_),n=0;n<this.itemCount_;n++)o[n]=Blockly.Arduino.valueToCode(this,"ADD"+n,Blockly.Arduino.ORDER_NONE)||"0";return Blockly.Arduino.definitions_["var_ld_"+i]="double ld_"+i+"["+e+"]={"+o.join(", ")+"};\n",Blockly.Arduino.definitions_["var_ld_"+i+"_size"]="int ld_"+i+"_size="+e+";\n",""},Blockly.Arduino.lists_getIndex=function(){var i=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),e=Blockly.Arduino.valueToCode(this,"AT",Blockly.Arduino.ORDER_ADDITIVE)||"0";return e.match(/^\d+$/)&&(e=parseInt(e,10)),["ld_"+i+"[(int)("+e+")]",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.lists_setIndex=function(){var i=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),e=Blockly.Arduino.valueToCode(this,"AT",Blockly.Arduino.ORDER_ADDITIVE)||"0",o=Blockly.Arduino.valueToCode(this,"TO",Blockly.Arduino.ORDER_ASSIGNMENT)||"0";return e.match(/^\d+$/)&&(e=parseInt(e,10)),"ld_"+i+"[(int)("+e+")] = "+o+";\n"},Blockly.Arduino.lists_length=function(){return["ld_"+Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+"_size",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.lists_create_with_text=function(){this.getFieldValue("TYPE");for(var i=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),e=this.itemCount_,o=Array(this.itemCount_),n=0;n<this.itemCount_;n++)o[n]=Blockly.Arduino.valueToCode(this,"ADD"+n,Blockly.Arduino.ORDER_NONE)||'String("")';return Blockly.Arduino.definitions_["var_ls_"+i]="String ls_"+i+"["+e+"]={"+o.join(", ")+"};\n",Blockly.Arduino.definitions_["var_ls_"+i+"_size"]="int ls_"+i+"_size="+e+";\n",""},Blockly.Arduino.lists_getIndex_text=function(){var i=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),e=Blockly.Arduino.valueToCode(this,"AT",Blockly.Arduino.ORDER_ADDITIVE)||"0";return e.match(/^\d+$/)&&(e=parseInt(e,10)),["ls_"+i+"[(int)("+e+")]",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.lists_setIndex_text=function(){var i=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),e=Blockly.Arduino.valueToCode(this,"AT",Blockly.Arduino.ORDER_ADDITIVE)||"0",o=Blockly.Arduino.valueToCode(this,"TO",Blockly.Arduino.ORDER_ASSIGNMENT)||"0";return e.match(/^\d+$/)&&(e=parseInt(e,10)),"ls_"+i+"[(int)("+e+")] = "+o+";\n"},Blockly.Arduino.lists_length_text=function(){return["ls_"+Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+"_size",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.logic={},Blockly.Arduino.controls_if=function(){var i=0,e=Blockly.Arduino.valueToCode(this,"IF"+i,Blockly.Arduino.ORDER_NONE)||"false",o=Blockly.Arduino.statementToCode(this,"DO"+i),n="if ("+e+") {\n"+o+"\n}";for(i=1;i<=this.elseifCount_;i++)n+=" else if ("+(e=Blockly.Arduino.valueToCode(this,"IF"+i,Blockly.Arduino.ORDER_NONE)||"false")+") {\n"+(o=Blockly.Arduino.statementToCode(this,"DO"+i))+"}";return this.elseCount_&&(n+=" else {\n"+(o=Blockly.Arduino.statementToCode(this,"ELSE"))+"\n}"),n+"\n"},Blockly.Arduino.logic_compare=function(){var i=this.getFieldValue("OP"),e="=="==(i=Blockly.Arduino.logic_compare.OPERATORS[i])||"!="==i?Blockly.Arduino.ORDER_EQUALITY:Blockly.Arduino.ORDER_RELATIONAL;return["("+(Blockly.Arduino.valueToCode(this,"A",e)||"0")+" "+i+" "+(Blockly.Arduino.valueToCode(this,"B",e)||"0")+")",e]},Blockly.Arduino.logic_compare.OPERATORS={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="},Blockly.Arduino.logic_compare_bool=function(){var i=this.getFieldValue("OP"),e="=="==(i=Blockly.Arduino.logic_compare.OPERATORS[i])||"!="==i?Blockly.Arduino.ORDER_EQUALITY:Blockly.Arduino.ORDER_RELATIONAL;return["("+(Blockly.Arduino.valueToCode(this,"A",e)||"0")+" "+i+" "+(Blockly.Arduino.valueToCode(this,"B",e)||"0")+")",e]},Blockly.Arduino.logic_operation=function(){var i="AND"==this.getFieldValue("OP")?"&&":"||",e="&&"==i?Blockly.Arduino.ORDER_LOGICAL_AND:Blockly.Arduino.ORDER_LOGICAL_OR;return["("+(Blockly.Arduino.valueToCode(this,"A",e)||"false")+" "+i+" "+(Blockly.Arduino.valueToCode(this,"B",e)||"false")+")",e]},Blockly.Arduino.logic_negate=function(){var i=Blockly.Arduino.ORDER_UNARY_PREFIX;return["(!"+(Blockly.Arduino.valueToCode(this,"BOOL",i)||"false")+")",i]},Blockly.Arduino.logic_boolean=function(){return["TRUE"==this.getFieldValue("BOOL")?"true":"false",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.logic_boolean2=function(){return["TRUE"==this.getFieldValue("BOOL")?"true":"false",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.math={},Blockly.Arduino.math_number=function(){var i=window.parseFloat(this.getFieldValue("NUM"));return[i,i<0?Blockly.Arduino.ORDER_UNARY_PREFIX:Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.math_to_int=function(){var i="(long)("+(Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC)||"0")+")";return[i,i<0?Blockly.Arduino.ORDER_UNARY_PREFIX:Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.math_to_uint=function(){var i="(unsigned long)("+(Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC)||"0")+")";return[i,i<0?Blockly.Arduino.ORDER_UNARY_PREFIX:Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.math_angle=function(){var i=window.parseInt(this.getFieldValue("ANGLE"));return[i,i<0?Blockly.Arduino.ORDER_UNARY_PREFIX:Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.math_atan2=function(){return["atan2("+(Blockly.Arduino.valueToCode(this,"NUM1",Blockly.Arduino.ORDER_ATOMIC)||"0")+","+(Blockly.Arduino.valueToCode(this,"NUM2",Blockly.Arduino.ORDER_ATOMIC)||"0")+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.math_arithmetic=function(){var i=this.getFieldValue("OP"),e=Blockly.Arduino.math_arithmetic.OPERATORS[i];i=e[0],e=e[1];var o=Blockly.Arduino.valueToCode(this,"A",e)||"0",n=Blockly.Arduino.valueToCode(this,"B",e)||"0";return i?["("+o+i+n+")",e]:["pow("+o+", "+n+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.math_arithmetic.OPERATORS={ADD:[" + ",Blockly.Arduino.ORDER_ADDITIVE],MINUS:[" - ",Blockly.Arduino.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.Arduino.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.Arduino.ORDER_MULTIPLICATIVE],POWER:[null,Blockly.Arduino.ORDER_NONE]},Blockly.Arduino.math_single=function(){var i=this.getFieldValue("OP");if("NEG"==i){var e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_UNARY_PREFIX)||"0";return"-"==e[0]&&(e=" "+e),["-"+e,Blockly.Arduino.ORDER_UNARY_PREFIX]}switch(e="ABS"==i||"ROUND"==i.substring(0,5)?Blockly.Arduino.valueToCode(block,"NUM",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"0":"SIN"==i||"COS"==i||"TAN"==i||"ASIN"==i||"ACOS"==i||"ATAN"==i?Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0":Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE)||"0",i){case"ROOT":i="sqrt("+e+")";break;case"LOG":i="log("+e+")";break;case"LOG10":i="log10("+e+")";break;case"ABS":i="abs("+e+")";break;case"ROUND":i="round("+e+")";break;case"ROUNDUP":i="ceil("+e+")";break;case"ROUNDDOWN":i="floor("+e+")";break;case"SIN":i="sin("+e+")";break;case"COS":i="cos("+e+")";break;case"TAN":i="tan("+e+")";break;case"ASIN":i="asin("+e+")";break;case"ACOS":i="acos("+e+")";break;case"ATAN":i="atan("+e+")";break;default:throw"Unknown math operator: "+i}return i?[i,Blockly.Arduino.ORDER_UNARY_POSTFIX]:[i,Blockly.Arduino.ORDER_MULTIPLICATIVE]},Blockly.Arduino.math_change=function(){var i=Blockly.Arduino.valueToCode(this,"DELTA",Blockly.Arduino.ORDER_ADDITIVE)||"0",e=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);return e+"="+e+"+("+i+");\n"},Blockly.Arduino.math_round=Blockly.Arduino.math_single,Blockly.Arduino.math_trig=Blockly.Arduino.math_single,Blockly.Arduino.math_modulo=function(){return["(((int)"+(Blockly.Arduino.valueToCode(this,"DIVIDEND",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0")+") % ((int)"+(Blockly.Arduino.valueToCode(this,"DIVISOR",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0")+"))",Blockly.Arduino.ORDER_MULTIPLICATIVE]},Blockly.Arduino.math_map=function(){return["map("+(Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ATOMIC)||"0")+", "+(Blockly.Arduino.valueToCode(this,"FROMLOW",Blockly.Arduino.ORDER_ATOMIC)||"0")+","+(Blockly.Arduino.valueToCode(this,"FROMHIGH",Blockly.Arduino.ORDER_ATOMIC)||"Infinity")+","+(Blockly.Arduino.valueToCode(this,"TOLOW",Blockly.Arduino.ORDER_ATOMIC)||"0")+","+(Blockly.Arduino.valueToCode(this,"TOHIGH",Blockly.Arduino.ORDER_ATOMIC)||"Infinity")+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.math_constrain=function(){return["constrain("+(Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ATOMIC)||"0")+", "+(Blockly.Arduino.valueToCode(this,"LOW",Blockly.Arduino.ORDER_ATOMIC)||"0")+","+(Blockly.Arduino.valueToCode(this,"HIGH",Blockly.Arduino.ORDER_ATOMIC)||"Infinity")+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.math_random_int=function(){Blockly.Arduino.setups_.setup_random="randomSeed(analogRead(0));";var i=Blockly.Arduino.valueToCode(this,"FROM",Blockly.Arduino.ORDER_ATOMIC)||"0",e=Blockly.Arduino.valueToCode(this,"TO",Blockly.Arduino.ORDER_ATOMIC)||"0";return[Blockly.Arduino.provideFunction_("math_random_int",["double "+Blockly.Arduino.FUNCTION_NAME_PLACEHOLDER_+"(int a,int b) {","  if (a > b) {","    int c = a;","    a = b;","    b = c;","  }","  return (double)random(a,b+1);","}"])+"("+i+", "+e+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.procedures={},Blockly.Arduino.procedures_defreturn=function(){var i=Blockly.Arduino.variableDB_.getName(this.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),e=Blockly.Arduino.statementToCode(this,"STACK");Blockly.Arduino.INFINITE_LOOP_TRAP&&(e=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e);for(var o=Blockly.Arduino.valueToCode(this,"RETURN",Blockly.Arduino.ORDER_NONE)||"",n=(o=o&&"  return "+o+";\n")?"double":"void",t=[],l=0;l<this.arguments_.length;l++)t[l]="double "+Blockly.Arduino.variableDB_.getName(this.arguments_[l],Blockly.Variables.NAME_TYPE);return e=n+" "+i+"("+t.join(", ")+") {\n"+e+o+"}\n",e=Blockly.Arduino.scrub_(this,e),Blockly.Arduino.definitions_fnc_[i]=e,null},Blockly.Arduino.procedures_defnoreturn=Blockly.Arduino.procedures_defreturn,Blockly.Arduino.procedures_callreturn=function(){for(var i=Blockly.Arduino.variableDB_.getName(this.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),e=[],o=0;o<this.arguments_.length;o++)e[o]=Blockly.Arduino.valueToCode(this,"ARG"+o,Blockly.Arduino.ORDER_NONE)||"null";return[i+"("+e.join(", ")+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.procedures_callnoreturn=function(){for(var i=Blockly.Arduino.variableDB_.getName(this.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),e=[],o=0;o<this.arguments_.length;o++)e[o]=Blockly.Arduino.valueToCode(this,"ARG"+o,Blockly.Arduino.ORDER_NONE)||"null";return i+"("+e.join(", ")+");\n"},Blockly.Arduino.texts={},Blockly.Arduino.text=function(){return["String("+Blockly.Arduino.quote_(this.getFieldValue("TEXT"))+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.text_format=function(){var i=this.getFieldValue("FORMAT");return["String((long)"+(Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC)||"0")+","+i+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_tonumber=function(){return["String("+(Blockly.Arduino.valueToCode(this,"TXT",Blockly.Arduino.ORDER_ATOMIC)||"")+").toFloat()",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_format_decimal=function(){var i=this.getFieldValue("DECIMALS");return["String("+(Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC)||"0")+","+i+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_join=function(i){for(var e="",o=0;o<i.itemCount_;o++){var n=Blockly.Arduino.valueToCode(i,"ADD"+o,Blockly.Arduino.ORDER_ATOMIC)||"";""!=n&&(""!=e&&(e+="+"),e=n.startsWith("String(")?e+n:e+"String("+n+")")}return[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.text_length=function(i){return["String("+(Blockly.Arduino.valueToCode(i,"VALUE",Blockly.Arduino.ORDER_ATOMIC)||'""')+").length()",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_compare=function(i){var e=Blockly.Arduino.valueToCode(i,"TEXT1",Blockly.Arduino.ORDER_ATOMIC)||'""';i=Blockly.Arduino.valueToCode(i,"TEXT2",Blockly.Arduino.ORDER_ATOMIC)||'""';var o=this.getFieldValue("TYPE"),n="";return"equals"==o&&(n="String("+e+").equals("+i+")"),"startswith"==o&&(n="String("+e+").startsWith("+i+")"),"endswith"==o&&(n="String("+e+").endsWith("+i+")"),[n,Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_indexof=function(i){var e=Blockly.Arduino.valueToCode(i,"TEXT1",Blockly.Arduino.ORDER_ATOMIC)||'""';i=Blockly.Arduino.valueToCode(i,"TEXT2",Blockly.Arduino.ORDER_ATOMIC)||'""';var o=this.getFieldValue("TYPE"),n="";return"indexof"==o&&(n="(String("+e+").indexOf("+i+")+1)"),"lastindexof"==o&&(n="(String("+e+").lastIndexOf("+i+")+1)"),[n,Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_replace=function(i){return"s_"+this.getFieldValue("VARTEXT")+".replace("+(Blockly.Arduino.valueToCode(i,"TEXT2",Blockly.Arduino.ORDER_ATOMIC)||'""')+","+(i=Blockly.Arduino.valueToCode(i,"TEXT3",Blockly.Arduino.ORDER_ATOMIC)||'""')+");\n"},Blockly.Arduino.text_contains=function(i){return["(String("+(Blockly.Arduino.valueToCode(i,"TEXT1",Blockly.Arduino.ORDER_ATOMIC)||'""')+").indexOf("+(i=Blockly.Arduino.valueToCode(i,"TEXT2",Blockly.Arduino.ORDER_ATOMIC)||'""')+")!=-1)",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_substring=function(i){return["String("+(i=Blockly.Arduino.valueToCode(i,"TEXT1",Blockly.Arduino.ORDER_ATOMIC)||'""')+").substring(("+(Blockly.Arduino.valueToCode(this,"START",Blockly.Arduino.ORDER_ATOMIC)||"0")+")-1,"+(Blockly.Arduino.valueToCode(this,"END",Blockly.Arduino.ORDER_ATOMIC)||"0")+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_ascii=function(i){return["('"+this.getFieldValue("CHAR")+"')",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.variables={},Blockly.Arduino.variables_set=function(){var i=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0";return Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" = "+i+";\n"},Blockly.Arduino.variables_get=function(){return[Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.variables_set_text=function(){var i=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||'""';return"s_"+Blockly.Arduino.variableDB_Text_.getName(this.getFieldValue("VARTEXT"),Blockly.Variables.NAME_TYPE)+" = "+i+";\n"},Blockly.Arduino.variables_get_text=function(){return["s_"+Blockly.Arduino.variableDB_Text_.getName(this.getFieldValue("VARTEXT"),Blockly.Variables.NAME_TYPE),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.variables_set_bool=function(){var i=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"false";return"b_"+Blockly.Arduino.variableDB_Bool_.getName(this.getFieldValue("VARBOOL"),Blockly.Variables.NAME_TYPE)+" = "+i+";\n"},Blockly.Arduino.variables_get_bool=function(){return["b_"+Blockly.Arduino.variableDB_Bool_.getName(this.getFieldValue("VARBOOL"),Blockly.Variables.NAME_TYPE),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino._3dbot_move=function(){var i=this.getFieldValue("MOV"),e=this.getFieldValue("SPEED");Blockly.Arduino.setups_.setup_output_7="pinMode(7, OUTPUT);",Blockly.Arduino.setups_.setup_output_8="pinMode(8, OUTPUT);",Blockly.Arduino.setups_.setup_output_9="pinMode(9, OUTPUT);",Blockly.Arduino.setups_.setup_output_10="pinMode(10, OUTPUT);",Blockly.Arduino.setups_.setup_output_12="pinMode(12, OUTPUT);",Blockly.Arduino.setups_.setup_output_13="pinMode(13, OUTPUT);",Blockly.Arduino.definitions_fnc_.fnc_3dbot_move="void fnc_3dbot_move(int _t, int _speed){\n\tswitch(_t){\n\t\tcase 0: //stop\n\t\t\tdigitalWrite(9, LOW);\n\t\t\tdigitalWrite(10, LOW);\n\t\t\tbreak;\n\t\tcase 1: //fw\n\t\t\tdigitalWrite(7, LOW);\n\t\t\tdigitalWrite(8, HIGH);\n\t\t\tdigitalWrite(12, LOW);\n\t\t\tdigitalWrite(13, HIGH);\n\t\t\tanalogWrite(9,_speed);\n\t\t\tanalogWrite(10,_speed);\n\t\t\tbreak;\n\t\tcase 2: //bw\n\t\t\tdigitalWrite(7, HIGH);\n\t\t\tdigitalWrite(8, LOW);\n\t\t\tdigitalWrite(12, HIGH);\n\t\t\tdigitalWrite(13, LOW);\n\t\t\tanalogWrite(9,_speed);\n\t\t\tanalogWrite(10,_speed);\n\t\t\tbreak;\n\t\tcase 3: //left\n\t\t\tdigitalWrite(7, LOW);\n\t\t\tdigitalWrite(8, HIGH);\n\t\t\tdigitalWrite(12, LOW);\n\t\t\tdigitalWrite(13, HIGH);\n\t\t\tanalogWrite(9,0);\n\t\t\tanalogWrite(10,_speed);\n\t\t\tbreak;\n\t\tcase 4: //right\n\t\t\tdigitalWrite(7, LOW);\n\t\t\tdigitalWrite(8, HIGH);\n\t\t\tdigitalWrite(12, LOW);\n\t\t\tdigitalWrite(13, HIGH);\n\t\t\tanalogWrite(9,_speed);\n\t\t\tanalogWrite(10,0);\n\t\t\tbreak;\n\t\tcase 5: //rotate left\n\t\t\tdigitalWrite(7, HIGH);\n\t\t\tdigitalWrite(8, LOW);\n\t\t\tdigitalWrite(12, LOW);\n\t\t\tdigitalWrite(13, HIGH);\n\t\t\tanalogWrite(9,_speed);\n\t\t\tanalogWrite(10,_speed);\n\t\t\tbreak;\n\t\tcase 6: //rotate right\n\t\t\tdigitalWrite(7, LOW);\n\t\t\tdigitalWrite(8, HIGH);\n\t\t\tdigitalWrite(12, HIGH);\n\t\t\tdigitalWrite(13, LOW);\n\t\t\tanalogWrite(9,_speed);\n\t\t\tanalogWrite(10,_speed);\n\t\t\tbreak;\n\t\tcase 7: //left bw\n\t\t\tdigitalWrite(7, HIGH);\n\t\t\tdigitalWrite(8, LOW);\n\t\t\tdigitalWrite(12, HIGH);\n\t\t\tdigitalWrite(13, LOW);\n\t\t\tanalogWrite(9,0);\n\t\t\tanalogWrite(10,_speed);\n\t\t\tbreak;\n\t\tcase 8: //right bw\n\t\t\tdigitalWrite(7, HIGH);\n\t\t\tdigitalWrite(8, LOW);\n\t\t\tdigitalWrite(12, HIGH);\n\t\t\tdigitalWrite(13, LOW);\n\t\t\tanalogWrite(9,_speed);\n\t\t\tanalogWrite(10,0);\n\t\t\tbreak;\n\t}\n}\n\n";var o="220";return"FAST"==e&&(o=255),"NORMAL"==e&&(o=220),"SLOW"==e&&(o=180),"fnc_3dbot_move("+i+","+o+");\n"},Blockly.Arduino._3dbot_steps=function(){var i=Blockly.Arduino.valueToCode(this,"STEPS",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_.setup_output_A1="pinMode(A1, INPUT);",Blockly.Arduino.definitions_.define_button_debounced='#include "ABlocks_Button.h"',Blockly.Arduino.definitions_.var_3dbot_encoder="Button _3dbot_encoder(A1,5);\n",Blockly.Arduino.definitions_fnc_.fnc_3dbot_steps="void fnc_3dbot_steps(int _s){\n\tint ns=0;\n\twhile(ns<_s){\n\t\tif(_3dbot_encoder.pressed()){\n\t\t\tns++;\n\t\t}\n\t}\n}\n","fnc_3dbot_steps("+i+");\n"},Blockly.Arduino._3dbot_motor=function(){var i=this.getFieldValue("MOTOR"),e=this.getFieldValue("DIR"),o=Blockly.Arduino.valueToCode(this,"SPEED",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_.setup_output_7="pinMode(7, OUTPUT);",Blockly.Arduino.setups_.setup_output_8="pinMode(8, OUTPUT);",Blockly.Arduino.setups_.setup_output_9="pinMode(9, OUTPUT);",Blockly.Arduino.setups_.setup_output_10="pinMode(10, OUTPUT);",Blockly.Arduino.setups_.setup_output_12="pinMode(12, OUTPUT);",Blockly.Arduino.setups_.setup_output_13="pinMode(13, OUTPUT);",Blockly.Arduino.definitions_fnc_.fnc_3dbot_motor="void fnc_3dbot_motor(int _m, int _dir, int _speed){\n\tint pin1=7;\n\tint pin2=8;\n\tint pin3=9;\n\tswitch(_m){\n\t\tcase 0: //left\n\t\t\tpin1=7;\n\t\t\tpin2=8;\n\t\t\tpin3=9;\n\t\t\tbreak;\n\t\tcase 1: //right\n\t\t\tpin1=12;\n\t\t\tpin2=13;\n\t\t\tpin3=10;\n\t\t\tbreak;\n\t}\n\tswitch(_dir){\n\t\tcase 0: //stop\n\t\t\tanalogWrite(pin3,0);\n\t\t\tbreak;\n\t\tcase 1: //forward\n\t\t\tdigitalWrite(pin1, LOW);\n\t\t\tdigitalWrite(pin2, HIGH);\n\t\t\tanalogWrite(pin3,_speed);\n\t\t\tbreak;\n\t\tcase 2: //backward\n\t\t\tdigitalWrite(pin1, HIGH);\n\t\t\tdigitalWrite(pin2, LOW);\n\t\t\tanalogWrite(pin3,_speed);\n\t\t\tbreak;\n\t}\n}\n\n","fnc_3dbot_motor("+i+","+e+","+o+");\n"},Blockly.Arduino._3dbot_distance=function(){return Blockly.Arduino.setups_.setup_output_4="pinMode(4, OUTPUT);",Blockly.Arduino.setups_.setup_input_2="pinMode(2, INPUT);",setupUltrasonic3dBot(),["fnc_3dbot_distance(4,2)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino._3dbot_distance2=function(){return Blockly.Arduino.setups_.setup_output_4="pinMode(4, OUTPUT);",Blockly.Arduino.setups_.setup_input_2="pinMode(2, INPUT);",Blockly.Arduino.valueToCode(this,"MAXDISTANCE",Blockly.Arduino.ORDER_ATOMIC),setupUltrasonic3dBot(),["fnc_3dbot_distance(4,2)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino._3dbot_ldr=function(){return Blockly.Arduino.setups_.setup_input_A2="pinMode(A2, INPUT);",["analogRead(A2)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino._3dbot_ntc=function(){return Blockly.Arduino.setups_.setup_input_A3="pinMode(A3, INPUT);",Blockly.Arduino.definitions_.define_math="#include <math.h>",Blockly.Arduino.definitions_fnc_.fnc_3dbot_ntc="double fnc_3dbot_ntc(int _rawval){\n\tlong Resistance;\n\tdouble Temp;\n\tResistance=6000.0*((1024.0/_rawval) - 1); \n\tTemp = log(Resistance); \n\tTemp = 1 / (0.001129148 + (0.000234125 * Temp) + (0.0000000876741 * Temp * Temp * Temp)); \n\tTemp = Temp - 273.15;\n\treturn Temp;\n}\n",["fnc_3dbot_ntc(analogRead(A3))",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino._3dbot_irsensor=function(){var i=this.getFieldValue("IRSENSOR"),e=5;return"LEFT"==i&&(e=5),"RIGHT"==i&&(e=6),Blockly.Arduino.setups_["setup_input_"+e]="pinMode("+e+", INPUT);",["(!digitalRead("+e+"))",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino._3dbot_buzzer=function(){Blockly.Arduino.definitions_.define_tone='#include "ABLocks_TimerFreeTone.h"';var i=Blockly.Arduino.valueToCode(this,"TONE",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"MS",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_.setup_output_A0="pinMode(A0, OUTPUT);","TimerFreeTone(A0,"+i+","+e+");\n"},Blockly.Arduino._3dbot_buzzer_rttl=function(){Blockly.Arduino.definitions_.define_tone="#include <ABLocks_TimerFreeTone.h>",this.getFieldValue("PIN");var i=Blockly.Arduino.valueToCode(this,"RTTTL",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_.setup_output_A0="pinMode(A0, OUTPUT);","TimerFreeToneRtttl(A0,(const char *)"+i+".c_str());\n"},Blockly.Arduino._3dbot_buzzer_rttl_melody=function(){var i=this.getFieldValue("RTTTL_MELODY"),e=this.getField("RTTTL_MELODY"),o='""';if(e){for(var n=-1,t=e.getOptions_(),l=0;l<t.length;l++)t[l][1]==e.value_&&(n=l);0<=n&&(Blockly.Arduino.definitions_["var_rttl_melody_"+n]="String rtt_melody_"+n+'="'+i+'";',o="rtt_melody_"+n)}return[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino._3dbot_led_pwm=function(){var i=this.getFieldValue("LED"),e=6;return"RED"==i&&(e=6),"YELLOW"==i&&(e=5),"GREEN"==i&&(e=3),i=Blockly.Arduino.valueToCode(this,"PWM",Blockly.Arduino.ORDER_ATOMIC),Blockly.Arduino.setups_["setup_output_"+e]="pinMode("+e+", OUTPUT);","analogWrite("+e+","+i+");\n"},Blockly.Arduino._3dbot_button=function(){var i=this.getFieldValue("STATUS");Blockly.Arduino.setups_.setup_input_2="pinMode(2, INPUT);",Blockly.Arduino.definitions_.define_button_debounced='#include "ABlocks_Button.h"',Blockly.Arduino.definitions_.var_3dbot_button="Button _3dbot_button(2,50);\n";var e="";return"pressed"==i&&(e="_3dbot_button.pressed()"),"released"==i&&(e="_3dbot_button.released()"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino._3dbot_irremote_rx=function(){return Blockly.Arduino.irrx=!0,Blockly.Arduino.setups_.setup_ir_rx="ir_rx.enableIRIn();",Blockly.Arduino.definitions_.define_ir_rx='#include "IRremote.h"',Blockly.Arduino.definitions_.var_ir_rx="IRrecv ir_rx(11);\ndecode_results ir_rx_results;",Blockly.Arduino.definitions_fnc_.fnc_ir_rx="unsigned long fnc_3dbot_irrx()\n{\n\tbool decoded=false;\n\tif( ir_rx.decode(&ir_rx_results))\n\t{\n\t\tdecoded=true;\n\t\tir_rx.resume();\n\t}\n\t if(decoded) return ir_rx_results.value; else return 0;\n }\n",["(unsigned long)fnc_3dbot_irrx()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino._3dbot_irremote_keys=function(){return["("+this.getFieldValue("KEY")+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino._3dbot_irremote_tx=function(){Blockly.Arduino.definitions_.define_irremote='#include "IRremote.h"',Blockly.Arduino.definitions_.var_ir_tx="IRsend ir_tx;";var i=this.getFieldValue("PROTOCOL"),e=Blockly.Arduino.valueToCode(this,"CODE",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"BITS",Blockly.Arduino.ORDER_ATOMIC);n="ir_tx.sendRC5(","RC5"==i&&(n="ir_tx.sendRC5("),"RC6"==i&&(n="ir_tx.sendRC6("),"NEC"==i&&(n="ir_tx.sendNEC("),"SONY"==i&&(n="ir_tx.sendSony("),"JVC"==i&&(n="ir_tx.sendJVC("),"SAMSUNG"==i&&(n="ir_tx.sendSAMSUNG("),"WHYNTER"==i&&(n="ir_tx.sendWhynter("),"AIWA"==i&&(n="ir_tx.sendAiwaRCT501("),"LG"==i&&(n="ir_tx.sendLG("),"DISH"==i&&(n="ir_tx.sendDISH("),"DENON"==i&&(n="ir_tx.sendDenon(");var n=n+"(unsigned long)"+e;return n="JVC"==i?n+","+o+",1);\n":"AIWA"==i?n+");\n":n+","+o+");\n",Blockly.Arduino.setups_.setup_ir_rx&&(n+="ir_rx.enableIRIn();\n"),n},Blockly.Arduino._3dbot_digital_write=function(){var i=Blockly.Arduino.valueToCode(this,"STAT",Blockly.Arduino.ORDER_ATOMIC)||"false";return Blockly.Arduino.setups_.setup_output_A1="pinMode(A1, OUTPUT);","digitalWrite(A1, "+("true"==i||"false"==i||"HIGH"==i||"LOW"==i?"true"==i||"HIGH"==i?"HIGH":"LOW":"("+i+"!=0)")+");\n"},Blockly.Arduino._3dbot_digital_read=function(){return Blockly.Arduino.setups_.setup_input_A1="pinMode(A1, INPUT);",["digitalRead(A1)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino._3dbot_analog_read=function(){return Blockly.Arduino.setups_.setup_input_A1="pinMode(A1, INPUT);",["analogRead(A1)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino._3dbot_nunchuk=function(){var i=this.getFieldValue("ID");return Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_nunchuck='#include "ArduinoNunchuk.h"\n',Blockly.Arduino.definitions_.var_nunchuck="ArduinoNunchuk nunchuk = ArduinoNunchuk();",Blockly.Arduino.setups_.setup_nunchuck="nunchuk.init();",Blockly.Arduino.loops_.loop_nunchuck="\tnunchuk.update();",["nunchuk."+i,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino._3dbot_irremote_keys=function(){return["("+this.getFieldValue("KEY")+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.actuator={},Blockly.Arduino.actuator_led=function(){var i=this.getFieldValue("PIN"),e=this.getFieldValue("STAT");return Blockly.Arduino.setups_["setup_output_"+i]="pinMode("+i+", OUTPUT);","digitalWrite("+i+","+e+");\n"},Blockly.Arduino.actuator_led_EP=Blockly.Arduino.actuator_led,Blockly.Arduino.actuator_led_pwm=function(){var i=this.getFieldValue("PIN"),e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_["setup_output_"+i]="pinMode("+i+", OUTPUT);","analogWrite("+i+","+e+");\n"},Blockly.Arduino.actuator_led_pwm_EP=Blockly.Arduino.actuator_led_pwm,Blockly.Arduino.actuator_led_rgb=function(){var i=this.getFieldValue("PIN_R"),e=this.getFieldValue("PIN_G"),o=this.getFieldValue("PIN_B"),n=this.getFieldValue("COLOR"),t=hexToR(n),l=hexToG(n);return n=hexToB(n),Blockly.Arduino.setups_["setup_output_"+i]="pinMode("+i+", OUTPUT);",Blockly.Arduino.setups_["setup_output_"+e]="pinMode("+e+", OUTPUT);",Blockly.Arduino.setups_["setup_output_"+o]="pinMode("+o+", OUTPUT);","CA"==this.getFieldValue("TYPE")&&(t=255-t,l=255-l,n=255-n),"analogWrite("+i+","+t+");analogWrite("+e+","+l+");analogWrite("+o+","+n+");\n"},Blockly.Arduino.actuator_relay=function(){var i=this.getFieldValue("PIN"),e=this.getFieldValue("STAT");return Blockly.Arduino.setups_["setup_output_"+i]="pinMode("+i+", OUTPUT);","digitalWrite("+i+","+e+");\n"},Blockly.Arduino.actuator_relay_EP=Blockly.Arduino.actuator_relay,Blockly.Arduino.actuator_buzzer=function(){Blockly.Arduino.definitions_.define_tone="#include <ABLocks_TimerFreeTone.h>";var i=this.getFieldValue("PIN"),e=Blockly.Arduino.valueToCode(this,"TONE",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"MS",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_["setup_output_"+i]="pinMode("+i+", OUTPUT);","TimerFreeTone("+i+","+e+","+o+");\n"},Blockly.Arduino.actuator_buzzer_blox=function(){var i=this.getFieldValue("PIN"),e=Blockly.Arduino.valueToCode(this,"TONE",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"MS",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_["setup_output_"+i]="pinMode("+i+", OUTPUT);","tone("+i+","+e+","+o+");\n"},Blockly.Arduino.actuator_buzzer_EP=Blockly.Arduino.actuator_buzzer,Blockly.Arduino.actuator_buzzer_rttl=function(){Blockly.Arduino.definitions_.define_tone="#include <ABLocks_TimerFreeTone.h>";var i=this.getFieldValue("PIN"),e=Blockly.Arduino.valueToCode(this,"RTTTL",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_["setup_output_"+i]="pinMode("+i+", OUTPUT);","TimerFreeToneRtttl("+i+",(const char *)"+e+".c_str());\n"},Blockly.Arduino.actuator_buzzer_rttl_EP=Blockly.Arduino.actuator_buzzer_rttl,Blockly.Arduino.actuator_buzzer_tone=function(){return[this.getFieldValue("NOTE"),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.actuator_buzzer_rttl_melody=function(){var i=this.getFieldValue("RTTTL_MELODY"),e=this.getField("RTTTL_MELODY"),o='""';if(e){for(var n=-1,t=e.getOptions_(),l=0;l<t.length;l++)t[l][1]==e.value_&&(n=l);0<=n&&(Blockly.Arduino.definitions_["var_rttl_melody_"+n]="String rtt_melody_"+n+'="'+i+'";',o="rtt_melody_"+n)}return[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.actuator_fanmotor_EP=function(){var i=this.getFieldValue("DIR");return Blockly.Arduino.setups_.setup_output_4="pinMode(4, OUTPUT);",Blockly.Arduino.setups_.setup_output_3="pinMode(3, OUTPUT);","L"==i?"digitalWrite(4,HIGH);\ndigitalWrite(3,LOW);\n":"R"==i?"digitalWrite(4,LOW);\ndigitalWrite(3,HIGH);\n":"digitalWrite(4,LOW);\ndigitalWrite(3,LOW);\n"},Blockly.Arduino.actuator_irtx=function(){Blockly.Arduino.definitions_.define_irremote='#include "IRremote.h"',Blockly.Arduino.definitions_.var_ir_tx="IRsend ir_tx;";var i=this.getFieldValue("PROTOCOL"),e=Blockly.Arduino.valueToCode(this,"CODE",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"BITS",Blockly.Arduino.ORDER_ATOMIC);n="ir_tx.sendRC5(","RC5"==i&&(n="ir_tx.sendRC5("),"RC6"==i&&(n="ir_tx.sendRC6("),"NEC"==i&&(n="ir_tx.sendNEC("),"SONY"==i&&(n="ir_tx.sendSony("),"JVC"==i&&(n="ir_tx.sendJVC("),"SAMSUNG"==i&&(n="ir_tx.sendSAMSUNG("),"WHYNTER"==i&&(n="ir_tx.sendWhynter("),"AIWA"==i&&(n="ir_tx.sendAiwaRCT501("),"LG"==i&&(n="ir_tx.sendLG("),"DISH"==i&&(n="ir_tx.sendDISH("),"DENON"==i&&(n="ir_tx.sendDenon(");var n=n+"(unsigned long)"+e;return n="JVC"==i?n+","+o+",1);\n":"AIWA"==i?n+");\n":n+","+o+");\n",Blockly.Arduino.setups_.setup_ir_rx&&(n+="ir_rx.enableIRIn();\n"),n},Blockly.Arduino.actuator_irtx_EP=Blockly.Arduino.actuator_irtx,Blockly.Arduino.bluetooth={},Blockly.Arduino.bluetooth_init=function(){var i=this.getFieldValue("BAUD"),e=this.getFieldValue("RX"),o=this.getFieldValue("TX");return setupBluetooth(),Blockly.Arduino.definitions_.var_bluetooth=bluetooth_varDef(e,o),Blockly.Arduino.setups_.setup_bluetooth="bt_serial.begin("+i+");\n",""},Blockly.Arduino.bluetooth_init2=function(){var i=this.getFieldValue("BAUD");return Blockly.Arduino.definitions_.var_bluetooth="HardwareSerial &bt_serial=Serial;",Blockly.Arduino.setups_.setup_bluetooth="bt_serial.begin("+i+");\n",""},Blockly.Arduino.bluetooth_init2_EP=Blockly.Arduino.bluetooth_init2,Blockly.Arduino.bluetooth_name=function(){return setupBluetooth(),Blockly.Arduino.definitions_fnc_.fnc_bt_serial_namepin='void fnc_bt_serial_namepin(String _name,String _pin){\n\tdelay(2000);\n\tbt_serial.print(String("AT+NAME")+_name);\n\tdelay(1000);\n\tbt_serial.print(String("AT+PIN")+_pin);\n\tdelay(1000);\n\twhile(bt_serial.available()>0)bt_serial.read();\n\tbt_serial.flush();\n}\n\n',"fnc_bt_serial_namepin("+(Blockly.Arduino.valueToCode(this,"DEVNAME",Blockly.Arduino.ORDER_ATOMIC)||"'ArduinoBlocks'")+","+(Blockly.Arduino.valueToCode(this,"DEVPIN",Blockly.Arduino.ORDER_ATOMIC)||"'1234'")+");\n"},Blockly.Arduino.bluetooth_name2=function(){var i=this.getFieldValue("VERSION");return setupBluetooth(),Blockly.Arduino.definitions_fnc_.fnc_bt_serial_namepin="standard"==i?'void fnc_bt_serial_namepin(String _name,String _pin){\n\tdelay(2000);\n\tbt_serial.print(String("AT+NAME")+_name);\n\tdelay(1000);\n\tbt_serial.print(String("AT+PIN")+_pin);\n\tdelay(1000);\n\twhile(bt_serial.available()>0)bt_serial.read();\n\tbt_serial.flush();\n}\n\n':'void fnc_bt_serial_namepin(String _name,String _pin){\n\tdelay(2000);\n\tbt_serial.println(String("AT+NAME=")+_name);\n\tdelay(1000);\n\tbt_serial.println(String("AT+PSWD:\\"")+_pin+"\\"");\n\tdelay(1000);\n\twhile(bt_serial.available()>0)bt_serial.read();\n\tbt_serial.flush();\n}\n\n',"fnc_bt_serial_namepin("+(i=Blockly.Arduino.valueToCode(this,"DEVNAME",Blockly.Arduino.ORDER_ATOMIC)||"'ArduinoBlocks'")+","+(Blockly.Arduino.valueToCode(this,"DEVPIN",Blockly.Arduino.ORDER_ATOMIC)||"'1234'")+");\n"},Blockly.Arduino.bluetooth_timeout=function(){return setupBluetooth(),"bt_serial.setTimeout("+Blockly.Arduino.valueToCode(this,"MS",Blockly.Arduino.ORDER_ATOMIC)+");\n"},Blockly.Arduino.bluetooth_print=function(){setupBluetooth();var i=Blockly.Arduino.valueToCode(this,"STRINGOUTPUT",Blockly.Arduino.ORDER_ATOMIC)||"''";return"TRUE"==this.getFieldValue("NEWLINE")?"bt_serial.println("+i+");\n":"bt_serial.print("+i+");\n"},Blockly.Arduino.bluetooth_println=function(){return setupBluetooth(),"bt_serial.println("+(Blockly.Arduino.valueToCode(this,"STRINGOUTPUT",Blockly.Arduino.ORDER_ATOMIC)||"''")+");\n"},Blockly.Arduino.bluetooth_write_byte=function(){return setupBluetooth(),"bt_serial.write((byte)"+(Blockly.Arduino.valueToCode(this,"BYTE",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"},Blockly.Arduino.bluetooth_read_float=function(){return setupBluetooth(),["TRUE"==this.getFieldValue("NEWLINE")?"atof((bt_serial.readStringUntil('\\n')).c_str())":"bt_serial.parseFloat()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.bluetooth_read_byte=function(){return setupBluetooth(),["bt_serial.read()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.bluetooth_read_string=function(){return setupBluetooth(),["TRUE"==this.getFieldValue("NEWLINE")?"bt_serial.readStringUntil('\\n')":"bt_serial.readString()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.bluetooth_read_string_line=function(){return setupBluetooth(),["bt_serial.readStringUntil('\\n')",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.bluetooth_read_available=function(){return setupBluetooth(),["(bt_serial.available()>0)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.domotics={},Blockly.Arduino.domotics_pzem004t_init=function(){var i=this.getFieldValue("RX");return setupPzem004t(this.getFieldValue("TX"),i),""},Blockly.Arduino.domotics_pzem004t_value=function(){var i=this.getFieldValue("ID"),e=this.getFieldValue("TYPE");Blockly.Arduino.definitions_["var_pzem004t_ip"+i]="IPAddress pzem_004t_ip"+i+"(192,168,1,"+i+");";var o="pzem_004t.";return[("V"==e?o+"voltage":"I"==e?o+"current":"W"==e?o+"power":"WH"==e?o+"energy":o+"voltage")+"(pzem_004t_ip"+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.domotics_pzem004t_setaddress=function(){var i=this.getFieldValue("ID");return Blockly.Arduino.definitions_["var_pzem004t_ip"+i]="IPAddress pzem_004t_ip"+i+"(192,168,1,"+i+");","pzem_004t.setAddress(pzem_004t_ip"+i+");\n"},Blockly.Arduino.domotics_ina219_init=function(){var i=this.getFieldValue("ID"),e=this.getFieldValue("ADDR");Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_ina219="#include <Adafruit_INA219.h>\n",Blockly.Arduino.definitions_["var_ina219_"+i]="Adafruit_INA219 ina219_"+i+"("+e+");",Blockly.Arduino.setups_["setup_ina219_"+i]="ina219_"+i+".begin();"},Blockly.Arduino.domotics_ina219_value=function(){var i=this.getFieldValue("ID"),e=this.getFieldValue("TYPE");return Blockly.Arduino.definitions_["var_ina219_"+i]?(i="ina219_"+i+".","V"==e?i+="getBusVoltage_V()":"I"==e?i+="getCurrent_mA()":"W"==e&&(i+="getPower_mW()")):i="",[i,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.eeprom={},Blockly.Arduino.eeprom_read_var=function(){return Blockly.Arduino.definitions_.define_eeprom="#include <EEPROM.h>\n",Blockly.Arduino.definitions_fnc_.fnc_eeprom_read="double fnc_EEPROM_readDouble(int ee)\n{\ndouble value = 0.0;\nbyte* p = (byte*)(void*)&value;\nfor (int i = 0; i < sizeof(value); i++)\n*p++ = EEPROM.read(ee++);\nreturn value;\n}\n\n",["fnc_EEPROM_readDouble((int)("+(Blockly.Arduino.valueToCode(this,"DIR",Blockly.Arduino.ORDER_ATOMIC)||"0")+"*4))",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.eeprom_write_var=function(){return Blockly.Arduino.definitions_.define_eeprom="#include <EEPROM.h>\n",Blockly.Arduino.definitions_fnc_.fnc_eeprom_write="void fnc_EEPROM_writeDouble(int ee, double value)\n{\nbyte* p = (byte*)(void*)&value;\nfor (int i = 0; i < sizeof(value); i++)\nEEPROM.write(ee++, *p++);\n}\n\n","fnc_EEPROM_writeDouble((int)("+(Blockly.Arduino.valueToCode(this,"DIR",Blockly.Arduino.ORDER_ATOMIC)||"0")+"*4),"+(Blockly.Arduino.valueToCode(this,"VAL",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"},Blockly.Arduino.ESP={},Blockly.Arduino.esp_wdt=function(){var i=this.getFieldValue("WDT"),e=Blockly.Arduino.valueToCode(this,"MS",Blockly.Arduino.ORDER_ATOMIC),o="ESP.wdtDisable();\n";return 1==i&&(o="ESP.wdtEnable("+e+");"),o},Blockly.Arduino.esp_wdt_reset=function(){return"ESP.wdtFeed();\n"},Blockly.Arduino.esp_restart=function(){return"ESP.restart();\n"},Blockly.Arduino.esp_chipid=function(){return["String(ESP.getChipId(),HEX)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.esp_yield=function(){return"yield();\n"},Blockly.Arduino.gps={},Blockly.Arduino.gps_init=function(){var i=this.getFieldValue("RX"),e=this.getFieldValue("TX");return setupGps(),Blockly.Arduino.definitions_.var_gps_serial=gps_varDef(i,e),""},Blockly.Arduino.gps_getposition=function(){setupGps();var i=this.getFieldValue("TYPE"),e="gps_lat";return"lat"==i&&(e="gps_lat"),"long"==i&&(e="gps_long"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.gps_getdatetime=function(){setupGps();var i=this.getFieldValue("TYPE"),e="gps_day";return"day"==i&&(e="gps_day"),"month"==i&&(e="gps_month"),"year"==i&&(e="gps_year"),"hour"==i&&(e="gps_hour"),"min"==i&&(e="gps_min"),"sec"==i&&(e="gps_sec"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.gps_getspeed=function(){setupGps();var i=this.getFieldValue("TYPE"),e="gps_speed_kmph";return"kph"==i&&(e="gps_speed_kmph"),"mph"==i&&(e="gps_speed_mph"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.gps_getaltitude=function(){return setupGps(),["gps_altitude",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.gps_getcourse=function(){return setupGps(),["gps_course",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.gps_validdata=function(){return setupGps(),["gps_fixed",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.gps_distancebetween=function(){setupGps();var i=Blockly.Arduino.valueToCode(this,"LAT1",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"LON1",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"LAT2",Blockly.Arduino.ORDER_ATOMIC),n=Blockly.Arduino.valueToCode(this,"LON2",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.definitions_fnc_.fnc_gps_distance="double fnc_gps_distance(float lat1,float lon1,float lat2, float lon2)\n{\n\tunsigned long dist=(unsigned long)TinyGPS::distance_between(lat1,lon1,lat2,lon2);\n\tif(dist== 0xFFFFFFFF)dist=0;\n\treturn (double)dist;}\n\n",["fnc_gps_distance("+i+","+e+","+o+","+n+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.io={},Blockly.Arduino.io_pinmode=function(){return"pinMode("+Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+","+this.getFieldValue("MODE")+");\n"},Blockly.Arduino.io_digital_write=function(){var i=this.getFieldValue("PIN"),e=this.getFieldValue("STAT");return Blockly.Arduino.setups_["setup_output_"+i]="pinMode("+i+", OUTPUT);","digitalWrite("+i+", "+e+");\n"},Blockly.Arduino.io_digital_write2=function(){var i=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"0",e=Blockly.Arduino.valueToCode(this,"STAT",Blockly.Arduino.ORDER_ATOMIC)||"false";return Blockly.Arduino.definitions_fnc_.fnc_dynamic_digitalWrite="\nvoid fnc_dynamic_digitalWrite(int _pin, int _e){\n\tpinMode(_pin,OUTPUT);\n\tdigitalWrite(_pin,_e);\n}\n","fnc_dynamic_digitalWrite("+i+", "+("true"==e||"false"==e||"HIGH"==e||"LOW"==e?"true"==e||"HIGH"==e?"HIGH":"LOW":"("+e+"!=0)")+");\n"},Blockly.Arduino.io_digital_read=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["digitalRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.io_digital_read2=function(){var i=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"0";return Blockly.Arduino.definitions_fnc_.fnc_dynamic_digitalRead="\nint fnc_dynamic_digitalRead(int _pin){\n\tpinMode(_pin,INPUT);\n\treturn digitalRead(_pin);\n}\n",["fnc_dynamic_digitalRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.io_analog_write=function(){var i=this.getFieldValue("PIN"),e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_["setup_output_"+i]="pinMode("+i+", OUTPUT);","analogWrite("+i+", "+e+");\n"},Blockly.Arduino.io_analog_write2=function(){var i=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"0",e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC)||"0";return Blockly.Arduino.definitions_fnc_.fnc_dynamic_analogWrite="\nvoid fnc_dynamic_analogWrite(int _pin, int _e){\n\tpinMode(_pin,OUTPUT);\n\tanalogWrite(_pin,_e);\n}\n","fnc_dynamic_analogWrite("+i+", "+e+");\n"},Blockly.Arduino.io_analog_read=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["analogRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.io_analog_read2=function(){var i=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"0";return Blockly.Arduino.definitions_fnc_.fnc_dynamic_analogRead="\nint fnc_dynamic_analogRead(int _pin){\n\tpinMode(_pin,INPUT);\n\treturn analogRead(_pin);\n}\n",["fnc_dynamic_analogRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.io_pulsein=function(){var i=this.getFieldValue("PIN"),e=this.getFieldValue("STAT");return["pulseIn("+i+","+("true"==e||"false"==e||"HIGH"==e||"LOW"==e?"true"==e||"HIGH"==e?"HIGH":"LOW":"("+e+"!=0)")+","+(Blockly.Arduino.valueToCode(this,"TIMEOUT",Blockly.Arduino.ORDER_ATOMIC)||"0")+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.io_interrupt=function(){var i=this.getFieldValue("PIN"),e=this.getFieldValue("MODE"),o=Blockly.Arduino.statementToCode(this,"DO");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",Blockly.Arduino.setups_["setup_interruptHandler_"+i]="attachInterrupt(digitalPinToInterrupt("+i+"),fnc_interruptHandler_"+i+","+e+");",e="void fnc_interruptHandler_"+i+"(){\r\n"+o+"\r\n}\r\n\r\n",Blockly.Arduino.definitions_fnc_["fnc_interruptHandler_"+i]=e,""},Blockly.Arduino.io_digital_write_i2c=function(){var i=this.getFieldValue("ADDR"),e=this.getFieldValue("PIN"),o=this.getFieldValue("STAT");return Blockly.Arduino.definitions_.define_wire="#include <Wire.h>","esp8266"==profile.default.micro?(Blockly.Arduino.definitions_.define_pcf8574="#include <PCF8574_esp.h>\n",Blockly.Arduino.definitions_["var_pcf8574_"+i]="PCF8574_ESP pcf8574_"+i+"("+i+");\n",Blockly.Arduino.setups_["setup_pcf8574_"+i]="pcf8574_"+i+".begin();\n"):(Blockly.Arduino.definitions_.define_pcf8574="#include <PCF8574.h>\n",Blockly.Arduino.definitions_["var_pcf8574_"+i]="PCF8574 pcf8574_"+i+";\n",Blockly.Arduino.setups_["setup_pcf8574_"+i]="pcf8574_"+i+".begin("+i+");\n"),Blockly.Arduino.setups_["setup_pcf8574_"+i+"_"+e]="pcf8574_"+i+".pinMode("+e+",OUTPUT);\n","pcf8574_"+i+".digitalWrite("+e+", "+o+");\n"},Blockly.Arduino.io_digital_write2_i2c=function(){var i=this.getFieldValue("ADDR"),e=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"0",o=Blockly.Arduino.valueToCode(this,"STAT",Blockly.Arduino.ORDER_ATOMIC)||"false";Blockly.Arduino.definitions_.define_wire="#include <Wire.h>","esp8266"==profile.default.micro?(Blockly.Arduino.definitions_.define_pcf8574="#include <PCF8574_esp.h>\n",Blockly.Arduino.definitions_["var_pcf8574_"+i]="PCF8574_ESP pcf8574_"+i+"("+i+");\n",Blockly.Arduino.setups_["setup_pcf8574_"+i]="pcf8574_"+i+".begin();\n"):(Blockly.Arduino.definitions_.define_pcf8574="#include <PCF8574.h>\n",Blockly.Arduino.definitions_["var_pcf8574_"+i]="PCF8574 pcf8574_"+i+";\n",Blockly.Arduino.setups_["setup_pcf8574_"+i]="pcf8574_"+i+".begin("+i+");\n");var n="esp8266"==profile.default.micro?"\nvoid fnc_dynamic_digitalWrite_i2c(PCF8574_ESP *_pcf, int _pin, int _e){\n\t_pcf->pinMode(_pin,OUTPUT);\n\t_pcf->digitalWrite(_pin,_e);\n}\n":"\nvoid fnc_dynamic_digitalWrite_i2c(PCF8574 *_pcf, int _pin, int _e){\n\t_pcf->pinMode(_pin,OUTPUT);\n\t_pcf->digitalWrite(_pin,_e);\n}\n";return Blockly.Arduino.definitions_fnc_.fnc_dynamic_digitalWrite_i2c=n,"fnc_dynamic_digitalWrite_i2c(&pcf8574_"+i+","+e+", "+("true"==o||"false"==o||"HIGH"==o||"LOW"==o?"true"==o||"HIGH"==o?"HIGH":"LOW":"("+o+"!=0)")+");\n"},Blockly.Arduino.io_digital_read_i2c=function(){var i=this.getFieldValue("ADDR"),e=this.getFieldValue("PIN");return Blockly.Arduino.definitions_.define_wire="#include <Wire.h>","esp8266"==profile.default.micro?(Blockly.Arduino.definitions_.define_pcf8574="#include <PCF8574_esp.h>\n",Blockly.Arduino.definitions_["var_pcf8574_"+i]="PCF8574_ESP pcf8574_"+i+"("+i+");\n",Blockly.Arduino.setups_["setup_pcf8574_"+i]="pcf8574_"+i+".begin();\n"):(Blockly.Arduino.definitions_.define_pcf8574="#include <PCF8574.h>\n",Blockly.Arduino.definitions_["var_pcf8574_"+i]="PCF8574 pcf8574_"+i+";\n",Blockly.Arduino.setups_["setup_pcf8574_"+i]="pcf8574_"+i+".begin("+i+");\n"),Blockly.Arduino.setups_["setup_pcf8574_"+i+"_"+e]="pcf8574_"+i+".pinMode("+e+",INPUT);\n",["pcf8574_"+i+".digitalRead("+e+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.io_digital_read2_i2c=function(){var i=this.getFieldValue("ADDR"),e=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"0";Blockly.Arduino.definitions_.define_wire="#include <Wire.h>","esp8266"==profile.default.micro?(Blockly.Arduino.definitions_.define_pcf8574="#include <PCF8574_esp.h>\n",Blockly.Arduino.definitions_["var_pcf8574_"+i]="PCF8574_ESP pcf8574_"+i+"("+i+");\n",Blockly.Arduino.setups_["setup_pcf8574_"+i]="pcf8574_"+i+".begin();\n"):(Blockly.Arduino.definitions_.define_pcf8574="#include <PCF8574.h>\n",Blockly.Arduino.definitions_["var_pcf8574_"+i]="PCF8574 pcf8574_"+i+";\n",Blockly.Arduino.setups_["setup_pcf8574_"+i]="pcf8574_"+i+".begin("+i+");\n");var o="esp8266"==profile.default.micro?"\nint fnc_dynamic_digitalRead_i2c(PCF8574_ESP *_pcf, int _pin){\n\t_pcf->pinMode(_pin,INPUT);\n\treturn _pcf->digitalRead(_pin);\n}\n":"\nint fnc_dynamic_digitalRead_i2c(PCF8574 *_pcf, int _pin){\n\t_pcf->pinMode(_pin,INPUT);\n\treturn _pcf->digitalRead(_pin);\n}\n";return Blockly.Arduino.definitions_fnc_.fnc_dynamic_digitalRead_i2c=o,["fnc_dynamic_digitalRead_i2c(&pcf8574_"+i+","+e+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.io_analog_write_i2c=function(){var i=this.getFieldValue("PIN"),e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC),o=this.getFieldValue("ADDR");return Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_pca9685="#include <Adafruit_PWMServoDriver.h>\n",Blockly.Arduino.definitions_["var_pca9685_"+o]="Adafruit_PWMServoDriver pca9685_"+o+";\n",Blockly.Arduino.setups_["setup_pca9685_"+o]="pca9685_"+o+".begin();  pca9685_"+o+".setPWMFreq(60); //servos optimal frequency \n","pca9685_"+o+".setPWM("+i+",0,"+e+");\n"},Blockly.Arduino.io_analog_write2_i2c=function(){var i=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"0",e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC)||"0",o=this.getFieldValue("ADDR");return Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_pca9685="#include <Adafruit_PWMServoDriver.h>\n",Blockly.Arduino.definitions_["var_pca9685_"+o]="Adafruit_PWMServoDriver pca9685_"+o+";\n",Blockly.Arduino.setups_["setup_pca9685_"+o]="pca9685_"+o+".begin();  pca9685_"+o+".setPWMFreq(60); //servos optimal frequency \n","pca9685_"+o+".setPWM("+i+",0,"+e+");\n"},Blockly.Arduino.keyboardmouse={},Blockly.Arduino.keyboard_code=function(i){var e="('"+(i=this.getFieldValue("CHAR"))+"')";return String(i).startsWith("0x")&&(e="("+i+")"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.keyboard_key=function(){var i=Blockly.Arduino.valueToCode(this,"KEYCODE",Blockly.Arduino.ORDER_ATOMIC)||"''",e=this.getFieldValue("TYPE");return Blockly.Arduino.setups_.setup_keyboard="Keyboard.begin();\n",Blockly.Arduino.definitions_.define_keyboard='#include "Keyboard.h"\n',"PRESS"==e?"Keyboard.press("+i+");\n":"RELEASE"==e?"Keyboard.release("+i+");\n":"Keyboard.write("+i+");\n"},Blockly.Arduino.keyboard_print=function(){var i=Blockly.Arduino.valueToCode(this,"STRINGOUTPUT",Blockly.Arduino.ORDER_ATOMIC)||"''",e=this.getFieldValue("NEWLINE");return Blockly.Arduino.setups_.setup_keyboard="Keyboard.begin();\n",Blockly.Arduino.definitions_.define_keyboard='#include "Keyboard.h"\n',"TRUE"==e?"Keyboard.println("+i+");\n":"Keyboard.print("+i+");\n"},Blockly.Arduino.mouse_press=function(){var i=this.getFieldValue("TYPE"),e=this.getFieldValue("BUTTON");return Blockly.Arduino.definitions_.define_mouse='#include "Mouse.h"\n',Blockly.Arduino.setups_.setup_mouse="Mouse.begin();\n","PRESS"==i?"Mouse.press("+e+");\n":"RELEASE"==i?"Mouse.release("+e+");\n":"Mouse.click("+e+");\n"},Blockly.Arduino.mouse_move=function(){var i=this.getFieldValue("TYPE"),e=Blockly.Arduino.valueToCode(this,"N",Blockly.Arduino.ORDER_ATOMIC)||"0";return Blockly.Arduino.definitions_.define_mouse='#include "Mouse.h"\n',Blockly.Arduino.setups_.setup_mouse="Mouse.begin();\n","X"==i?"Mouse.move("+e+",0,0);\n":"Y"==i?"Mouse.move(0,"+e+",0);\n":"Mouse.move(0,0,"+e+");\n"},Blockly.Arduino.keybot_move=function(){var i=this.getFieldValue("MOV"),e=this.getFieldValue("SPEED");Blockly.Arduino.setups_.setup_output_4="pinMode(4, OUTPUT);",Blockly.Arduino.setups_.setup_output_7="pinMode(7, OUTPUT);",Blockly.Arduino.setups_.setup_output_5="pinMode(5, OUTPUT);",Blockly.Arduino.setups_.setup_output_6="pinMode(6, OUTPUT);",Blockly.Arduino.definitions_fnc_.fnc_keybot_move="void fnc_keybot_move(int _t, int _speed){\n\tswitch(_t){\n\t\tcase 0: //stop\n\t\t\tdigitalWrite(4, LOW);\n\t\t\tdigitalWrite(7, LOW);\n\t\t\tanalogWrite(5,0);\n\t\t\tanalogWrite(6,0);\n\t\t\tbreak;\n\t\tcase 1: //fw\n\t\t\tdigitalWrite(4, HIGH);\n\t\t\tdigitalWrite(7, HIGH);\n\t\t\tanalogWrite(5,_speed);\n\t\t\tanalogWrite(6,_speed);\n\t\t\tbreak;\n\t\tcase 2: //bw\n\t\t\tdigitalWrite(4, LOW);\n\t\t\tdigitalWrite(7, LOW);\n\t\t\tanalogWrite(5,_speed);\n\t\t\tanalogWrite(6,_speed);\n\t\t\tbreak;\n\t\tcase 3: //left\n\t\t\tdigitalWrite(4, HIGH);\n\t\t\tdigitalWrite(7, HIGH);\n\t\t\tanalogWrite(5,0);\n\t\t\tanalogWrite(6,_speed);\n\t\t\tbreak;\n\t\tcase 4: //right\n\t\t\tdigitalWrite(4, HIGH);\n\t\t\tdigitalWrite(7, HIGH);\n\t\t\tanalogWrite(5,_speed);\n\t\t\tanalogWrite(6,0);\n\t\t\tbreak;\n\t\tcase 5: //rotate left\n\t\t\tdigitalWrite(4, LOW);\n\t\t\tdigitalWrite(7, HIGH);\n\t\t\tanalogWrite(5,_speed);\n\t\t\tanalogWrite(6,_speed);\n\t\t\tbreak;\n\t\tcase 6: //rotate right\n\t\t\tdigitalWrite(4, HIGH);\n\t\t\tdigitalWrite(7, LOW);\n\t\t\tanalogWrite(5,_speed);\n\t\t\tanalogWrite(6,_speed);\n\t\t\tbreak;\n\t}\n}\n\n";var o="220";return"VERYFAST"==e&&(o=255),"FAST"==e&&(o=180),"NORMAL"==e&&(o=130),"SLOW"==e&&(o=90),"VERYSLOW"==e&&(o=60),"fnc_keybot_move("+i+","+o+");\n"},Blockly.Arduino.keybot_motor=function(){var i=this.getFieldValue("MOTOR"),e=this.getFieldValue("DIR"),o=Blockly.Arduino.valueToCode(this,"SPEED",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_.setup_output_4="pinMode(4, OUTPUT);",Blockly.Arduino.setups_.setup_output_7="pinMode(7, OUTPUT);",Blockly.Arduino.setups_.setup_output_5="pinMode(5, OUTPUT);",Blockly.Arduino.setups_.setup_output_6="pinMode(6, OUTPUT);",Blockly.Arduino.definitions_fnc_.fnc_keybot_motor="void fnc_keybot_motor(int _m, int _dir, int _speed){\n\tint pin1=4;\n\tint pin2=5;\n\tswitch(_m){\n\t\tcase 0: //left\n\t\t\tpin1=4;\n\t\t\tpin2=5;\n\t\t\tbreak;\n\t\tcase 1: //right\n\t\t\tpin1=7;\n\t\t\tpin2=6;\n\t\t\tbreak;\n\t}\n\tswitch(_dir){\n\t\tcase 0: //stop\n\t\t\tanalogWrite(pin2,0);\n\t\t\tbreak;\n\t\tcase 1: //forward\n\t\t\tdigitalWrite(pin1, HIGH);\n\t\t\tanalogWrite(pin2,_speed);\n\t\t\tbreak;\n\t\tcase 2: //backward\n\t\t\tdigitalWrite(pin1, LOW);\n\t\t\tanalogWrite(pin2,_speed);\n\t\t\tbreak;\n\t}\n}\n\n","fnc_keybot_motor("+i+","+e+","+o+");\n"},Blockly.Arduino.keybot_distance=function(){return Blockly.Arduino.setups_.setup_output_A0="pinMode(A0, OUTPUT);",Blockly.Arduino.setups_.setup_input_2="pinMode(2, INPUT);",setupUltrasonicKeybot(),["fnc_keybot_distance(A0,2)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.keybot_distance2=function(){return Blockly.Arduino.setups_.setup_output_A0="pinMode(A0, OUTPUT);",Blockly.Arduino.setups_.setup_input_2="pinMode(2, INPUT);",Blockly.Arduino.valueToCode(this,"MAXDISTANCE",Blockly.Arduino.ORDER_ATOMIC),setupUltrasonicKeybot(),["fnc_keybot_distance(A0,2)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.keybot_irsensor=function(){var i=this.getFieldValue("IRSENSOR"),e="A2";return"LEFT"==i&&(e="A3"),"MIDDLE"==i&&(e="A2"),"RIGHT"==i&&(e="A1"),Blockly.Arduino.setups_["setup_input_"+e]="pinMode("+e+", INPUT);",["digitalRead("+e+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.keybot_buzzer=function(){Blockly.Arduino.definitions_.define_tone='#include "ABLocks_TimerFreeTone.h"';var i=Blockly.Arduino.valueToCode(this,"TONE",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"MS",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_.setup_output_13="pinMode(13, OUTPUT);","TimerFreeTone(13,"+i+","+e+");\n"},Blockly.Arduino.keybot_buzzer_rttl=function(){Blockly.Arduino.definitions_.define_tone="#include <ABLocks_TimerFreeTone.h>",this.getFieldValue("PIN");var i=Blockly.Arduino.valueToCode(this,"RTTTL",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_.setup_output_13="pinMode(13, OUTPUT);","TimerFreeToneRtttl(13,(const char *)"+i+".c_str());\n"},Blockly.Arduino.keybot_buzzer_rttl_melody=function(){var i=this.getFieldValue("RTTTL_MELODY"),e=this.getField("RTTTL_MELODY"),o='""';if(e){for(var n=-1,t=e.getOptions_(),l=0;l<t.length;l++)t[l][1]==e.value_&&(n=l);0<=n&&(Blockly.Arduino.definitions_["var_rttl_melody_"+n]="String rtt_melody_"+n+'="'+i+'";',o="rtt_melody_"+n)}return[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.keypad={},Blockly.Arduino.keypad_init=function(){var i=this.getFieldValue("ROW1"),e=this.getFieldValue("ROW2"),o=this.getFieldValue("ROW3"),n=this.getFieldValue("ROW4"),t=this.getFieldValue("COL1"),l=this.getFieldValue("COL2"),r=this.getFieldValue("COL3");return Blockly.Arduino.definitions_.define_keypad='#include "ABlocks_Keypad.h"',Blockly.Arduino.definitions_.var_keypad="char keypad_3x4_keys[4][3] = {{1,2,3},{4,5,6},{7,8,9},{10,11,12}};\nbyte keypad_3x4_rp[4] = {"+i+","+e+","+o+","+n+"};\nbyte keypad_3x4_cp[3] = {"+t+","+l+","+r+"};\nKeypad keypad_3x4(makeKeymap(keypad_3x4_keys),keypad_3x4_rp,keypad_3x4_cp,4,3);\n",setup_keypad_init(),""},Blockly.Arduino.keypad_init_34=function(){var i=this.getFieldValue("ROW1"),e=this.getFieldValue("ROW2"),o=this.getFieldValue("ROW3"),n=this.getFieldValue("ROW4"),t=this.getFieldValue("COL1"),l=this.getFieldValue("COL2"),r=this.getFieldValue("COL3");return Blockly.Arduino.definitions_.define_keypad='#include "ABlocks_Keypad.h"',Blockly.Arduino.definitions_.var_keypad="char keypad_keys[4][3] = {{1,2,3},{4,5,6},{7,8,9},{10,11,12}};\nbyte keypad_rp[4] = {"+i+","+e+","+o+","+n+"};\nbyte keypad_cp[3] = {"+t+","+l+","+r+"};\nKeypad keypad(makeKeymap(keypad_keys),keypad_rp,keypad_cp,4,3);\n",setup_keypad_init(),""},Blockly.Arduino.keypad_init_44=function(){var i=this.getFieldValue("ROW1"),e=this.getFieldValue("ROW2"),o=this.getFieldValue("ROW3"),n=this.getFieldValue("ROW4"),t=this.getFieldValue("COL1"),l=this.getFieldValue("COL2"),r=this.getFieldValue("COL3"),d=this.getFieldValue("COL4");return Blockly.Arduino.definitions_.define_keypad='#include "ABlocks_Keypad.h"',Blockly.Arduino.definitions_.var_keypad="char keypad_keys[4][4] = {{1,2,3,13},{4,5,6,14},{7,8,9,15},{10,11,12,16}};\nbyte keypad_rp[4] = {"+i+","+e+","+o+","+n+"};\nbyte keypad_cp[4] = {"+t+","+l+","+r+","+d+"};\nKeypad keypad(makeKeymap(keypad_keys),keypad_rp,keypad_cp,4,4);\n",""},Blockly.Arduino.keypad_getkey=function(){return["keypad.getKey()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.keypad_getkey_str=function(){return["fnc_keypad_keystr((int)keypad.getKey())",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.keypad_key=function(){return[this.getFieldValue("KEY"),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.lcd={},Blockly.Language||(Blockly.Language={}),Blockly.Arduino.lcd_customchar=function(){var i=this.getFieldValue("NUM");--i;var e=this.getFieldValue("DATA");return""!=e&&(Blockly.Arduino.definitions_["var_lcd_customchar_"+i]="byte lcd_customchar_"+i+"[8]={"+e+"};\n",Blockly.Arduino.setups_["setup_lcd_customchar_"+i]="lcd.createChar("+i+", lcd_customchar_"+i+");"),""},Blockly.Arduino.lcd_begin=function(){var i=this.getFieldValue("RS_PIN"),e=this.getFieldValue("ENABLE_PIN"),o=this.getFieldValue("D4_PIN"),n=this.getFieldValue("D5_PIN"),t=this.getFieldValue("D6_PIN"),l=this.getFieldValue("D7_PIN"),r=this.getFieldValue("SIZE"),d="16",u="2";return"2x16"==r&&(d="16",u="2"),"4x20"==r&&(d="20",u="4"),Blockly.Arduino.definitions_.define_lcd="#include <LiquidCrystal.h>",Blockly.Arduino.definitions_.var_lcd="LiquidCrystal lcd("+i+","+e+","+o+","+n+","+t+","+l+");\n",Blockly.Arduino.setups_.setup_lcd="lcd.begin("+d+", "+u+");\n",""},Blockly.Arduino.lcd_begin_i2c=function(){var i=this.getFieldValue("ADDR"),e=this.getFieldValue("SIZE"),o="16",n="2";return"2x16"==e&&(o="16",n="2"),"4x20"==e&&(o="20",n="4"),Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_lcd='#include "ABlocks_LiquidCrystal_I2C.h"',Blockly.Arduino.definitions_.var_lcd="LiquidCrystal_I2C lcd("+i+","+o+","+n+");",Blockly.Arduino.setups_.setup_lcd="lcd.begin();lcd.noCursor();lcd.backlight();",""},Blockly.Arduino.lcd_begin_i2c_EP=Blockly.Arduino.lcd_begin_i2c,Blockly.Arduino.lcd_print=function(){return setupLCD(),"lcd.setCursor("+this.getFieldValue("CURSOR_COLUMN")+", "+this.getFieldValue("CURSOR_ROW")+");\nlcd.print("+(Blockly.Arduino.valueToCode(this,"STRINGOUTPUT",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"''")+");\n"},Blockly.Arduino.lcd_print_customchar=function(){setupLCD();var i=this.getFieldValue("CURSOR_COLUMN"),e=this.getFieldValue("CURSOR_ROW"),o=this.getFieldValue("NUM");--o;var n="";return Blockly.Arduino.definitions_["var_lcd_customchar_"+o]&&(n="lcd.setCursor("+i+", "+e+");\nlcd.write((byte)"+o+");\n"),n},Blockly.Arduino.lcd_print2=function(){setupLCD();var i=Blockly.Arduino.valueToCode(this,"CURSOR_COLUMN",Blockly.Arduino.ORDER_ATOMIC)||"0",e=Blockly.Arduino.valueToCode(this,"CURSOR_ROW",Blockly.Arduino.ORDER_ATOMIC)||"0";return 20<=i&&(i=19),i<0&&(i=0),4<=e&&(e=3),e<0&&(i=0),"lcd.setCursor("+i+", "+e+");\nlcd.print("+(Blockly.Arduino.valueToCode(this,"STRINGOUTPUT",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"''")+");\n"},Blockly.Arduino.lcd_print2_customchar=function(){setupLCD();var i=Blockly.Arduino.valueToCode(this,"CURSOR_COLUMN",Blockly.Arduino.ORDER_ATOMIC)||"0",e=Blockly.Arduino.valueToCode(this,"CURSOR_ROW",Blockly.Arduino.ORDER_ATOMIC)||"0",o=this.getFieldValue("NUM");--o,20<=i&&(i=19),i<0&&(i=0),4<=e&&(e=3),e<0&&(i=0);var n="";return Blockly.Arduino.definitions_["var_lcd_customchar_"+o]&&(n="lcd.setCursor("+i+", "+e+");\nlcd.write((byte)"+o+");\n"),n},Blockly.Arduino.lcd_clear=function(){return setupLCD(),"lcd.clear();\n"},Blockly.Arduino.lcd_display=function(){return setupLCD(),"off"==this.getFieldValue("DISPLAY")?"lcd.noDisplay();\n":"lcd.display();\n"},Blockly.Arduino.lcd_backlight=function(){return setupLCD(),"off"==this.getFieldValue("BACKLIGHT")?"lcd.noBacklight();\n":"lcd.backlight();\n"},Blockly.Arduino.lcd_cursor=function(){setupLCD();var i=this.getFieldValue("CURSOR"),e="off"==i?"lcd.noCursor();":"lcd.cursor();";return"off"==(i=this.getFieldValue("BLINK"))?e+"lcd.noBlink();\n":e+"lcd.blink();\n"},Blockly.Arduino.ledmatrix={},Blockly.Arduino.ledmatrix_init=function(){var i=this.getFieldValue("ADDR"),e=this.getFieldValue("ID"),o=this.getFieldValue("TYPE");return Blockly.Arduino.definitions_.define_spi="#include <SPI.h>",Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_adafruit_gfx="#include <Adafruit_GFX.h>",Blockly.Arduino.definitions_.define_ledmatrix="#include <Adafruit_LEDBackpack.h>",Blockly.Arduino.definitions_["var_ledmatrix_"+e]="Adafruit_8x8matrix ledmatrix_"+e+" =Adafruit_8x8matrix();",Blockly.Arduino.setups_["setup_ledmatrix_"+e]="\tledmatrix_"+e+".begin("+i+");\n\tledmatrix_"+e+".setType("+o+");\n\tledmatrix_"+e+".setTextWrap(false);\n\tledmatrix_"+e+".setTextSize(1);\n",""},Blockly.Arduino.ledmatrix_init_EP=Blockly.Arduino.ledmatrix_init,Blockly.Arduino.ledmatrix_clear=function(){if(!Blockly.Arduino.definitions_.define_ledmatrix)return"";var i=this.getFieldValue("ID");return"ledmatrix_"+i+".clear(); ledmatrix_"+i+".writeDisplay();\n"},Blockly.Arduino.ledmatrix_clear_EP=Blockly.Arduino.ledmatrix_clear,Blockly.Arduino.ledmatrix_drawpixel=function(){if(!Blockly.Arduino.definitions_.define_ledmatrix)return"";var i=this.getFieldValue("ID");return"ledmatrix_"+i+".drawPixel("+Blockly.Arduino.valueToCode(this,"X",Blockly.Arduino.ORDER_ATOMIC)+","+Blockly.Arduino.valueToCode(this,"Y",Blockly.Arduino.ORDER_ATOMIC)+","+this.getFieldValue("COL")+"); ledmatrix_"+i+".writeDisplay();\n"},Blockly.Arduino.ledmatrix_drawpixel_EP=Blockly.Arduino.ledmatrix_drawpixel,Blockly.Arduino.ledmatrix_drawline=function(){if(!Blockly.Arduino.definitions_.define_ledmatrix)return"";var i=this.getFieldValue("ID");return"ledmatrix_"+i+".drawLine("+Blockly.Arduino.valueToCode(this,"X1",Blockly.Arduino.ORDER_ATOMIC)+","+Blockly.Arduino.valueToCode(this,"Y1",Blockly.Arduino.ORDER_ATOMIC)+","+Blockly.Arduino.valueToCode(this,"X2",Blockly.Arduino.ORDER_ATOMIC)+","+Blockly.Arduino.valueToCode(this,"Y2",Blockly.Arduino.ORDER_ATOMIC)+","+this.getFieldValue("COL")+"); ledmatrix_"+i+".writeDisplay();\n"},Blockly.Arduino.ledmatrix_drawline_EP=Blockly.Arduino.ledmatrix_drawline,Blockly.Arduino.ledmatrix_drawrectangle=function(){if(!Blockly.Arduino.definitions_.define_ledmatrix)return"";var i=this.getFieldValue("ID"),e=Blockly.Arduino.valueToCode(this,"X1",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"Y1",Blockly.Arduino.ORDER_ATOMIC),n=Blockly.Arduino.valueToCode(this,"X2",Blockly.Arduino.ORDER_ATOMIC),t=Blockly.Arduino.valueToCode(this,"Y2",Blockly.Arduino.ORDER_ATOMIC),l=this.getFieldValue("COL"),r="drawRect";return"TRUE"==this.getFieldValue("FILL")&&(r="fillRect"),"ledmatrix_"+i+"."+r+"("+e+","+o+","+n+","+t+","+l+"); ledmatrix_"+i+".writeDisplay();\n"},Blockly.Arduino.ledmatrix_drawrectangle_EP=Blockly.Arduino.ledmatrix_drawrectangle,Blockly.Arduino.ledmatrix_drawcircle=function(){if(!Blockly.Arduino.definitions_.define_ledmatrix)return"";var i=this.getFieldValue("ID"),e=Blockly.Arduino.valueToCode(this,"X",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"Y",Blockly.Arduino.ORDER_ATOMIC),n=Blockly.Arduino.valueToCode(this,"R",Blockly.Arduino.ORDER_ATOMIC),t=this.getFieldValue("COL"),l="drawCircle";return"TRUE"==this.getFieldValue("FILL")&&(l="fillCircle"),"ledmatrix_"+i+"."+l+"("+e+","+o+","+n+","+t+"); ledmatrix_"+i+".writeDisplay();\n"},Blockly.Arduino.ledmatrix_drawcircle_EP=Blockly.Arduino.ledmatrix_drawcircle,Blockly.Arduino.ledmatrix_drawtext=function(){if(!Blockly.Arduino.definitions_.define_ledmatrix)return"";var i=Blockly.Arduino.valueToCode(this,"TXT",Blockly.Arduino.ORDER_ATOMIC)||"''",e=this.getFieldValue("ID"),o=Blockly.Arduino.valueToCode(this,"X",Blockly.Arduino.ORDER_ATOMIC),n=Blockly.Arduino.valueToCode(this,"Y",Blockly.Arduino.ORDER_ATOMIC);return this.getFieldValue("COL"),"ledmatrix_"+e+".setCursor("+o+","+n+"); ledmatrix_"+e+".print("+i+"); ledmatrix_"+e+".writeDisplay();\n"},Blockly.Arduino.ledmatrix_drawtext_EP=Blockly.Arduino.ledmatrix_drawtext,Blockly.Arduino.ledmatrix_drawbitmap=function(){if(!Blockly.Arduino.definitions_.define_ledmatrix)return"";var i=this.getFieldValue("DATA"),e=this.getFieldValue("ID");return Blockly.Arduino.definitions_["var_ledmatrixdata_"+Blockly.Arduino.ledmatrix_count]="esp8266"==profile.default.micro?"static const uint8_t ledmatrix_data_"+Blockly.Arduino.ledmatrix_count+"[] = {"+i+"};":"static const uint8_t PROGMEM ledmatrix_data_"+Blockly.Arduino.ledmatrix_count+"[] PROGMEM = {"+i+"};",i="ledmatrix_"+e+".clear(); ledmatrix_"+e+".drawBitmap(0,0,ledmatrix_data_"+Blockly.Arduino.ledmatrix_count+",8,8,LED_ON); ledmatrix_"+e+".writeDisplay();\n",Blockly.Arduino.ledmatrix_count++,i},Blockly.Arduino.ledmatrix_drawbitmap_EP=Blockly.Arduino.ledmatrix_drawbitmap,Blockly.Arduino.ledmatrix_drawsprite=function(){var i=this.getFieldValue("ID"),e=this.getFieldValue("SPRITE"),o="",n="";return"face_normal"==e&&(o="B00000000,B00000000,B01100110,B00000000,B00000000,B00000000,B11111111,B00000000"),"face_happy"==e&&(o="B00000000,B01100110,B01100110,B00000000,B00000000,B11000011,B01100110,B00111100"),"face_sad"==e&&(o="B00000000,B01100110,B00100100,B00000000,B00111100,B01100110,B11000011,B10000001"),"face_angry"==e&&(o="B00000000,B01000010,B01100110,B00000000,B00000000,B11111111,B10100101,B11111111"),"eye_normal"==e&&(o="B01111110,B10000001,B10000001,B10011001,B10011001,B10000001,B10000001,B01111110"),"eye_medium"==e&&(o="B00000000,B00111100,B01000010,B01011010,B01011010,B01000010,B00111100,B00000000"),"eye_small"==e&&(o="B00000000,B00000000,B01111110,B01000010,B01011010,B01111110,B00000000,B00000000"),"eye_closed"==e&&(o="B00000000,B00000000,B00000000,B01111110,B01111110,B00000000,B00000000,B00000000"),"eye_lookL"==e&&(o="B01111110,B10000001,B10000001,B11100001,B11100001,B10000001,B10000001,B01111110"),"eye_lookR"==e&&(o="B01111110,B10000001,B10000001,B10000111,B10000111,B10000001,B10000001,B01111110"),"eye_lookU"==e&&(o="B01111110,B10011001,B10011001,B10000001,B10000001,B10000001,B10000001,B01111110"),"eye_lookD"==e&&(o="B01111110,B10000001,B10000001,B10000001,B10000001,B10011001,B10011001,B01111110"),"eye_angryL"==e&&(o="B01110000,B10001000,B10000100,B10011010,B10011001,B10000001,B01000010,B00111100"),"eye_angryR"==e&&(o="B00001110,B00010001,B00100001,B01011001,B10011001,B10000001,B01000010,B00111100"),"eye_sad"==e&&(o="B00000000,B00000000,B00000000,B11111111,B11111111,B11000011,B01111110,B00000000"),"eye_surprise"==e&&(o="B01111110,B10000001,B10011001,B10111101,B10111101,B10011001,B10000001,B01111110"),"icon_heart"==e&&(o="B01101100,B11111110,B11111110,B11111110,B11111110,B01111100,B00111000,B00010000"),"icon_user"==e&&(o="B00011000,B00111100,B00111100,B00011000,B00000000,B00111100,B01111110,B01111110"),"icon_clock"==e&&(o="B00111100,B01000010,B10001001,B10101001,B10011001,B10000001,B01000010,B00111100"),"icon_arrowU"==e&&(o="B00011000,B00111100,B01111110,B11111111,B00011000,B00011000,B00011000,B00011000"),"icon_arrowD"==e&&(o="B00011000,B00011000,B00011000,B00011000,B11111111,B01111110,B00111100,B00011000"),"icon_arrowL"==e&&(o="B00010000,B00110000,B01110000,B11111111,B11111111,B01110000,B00110000,B00010000"),"icon_arrowR"==e&&(o="B00001000,B00001100,B00001110,B11111111,B11111111,B00001110,B00001100,B00001000"),"icon_headphones"==e&&(o="B00111100,B01000010,B10000001,B10000001,B00100100,B11100111,B11100111,B00100100"),"icon_ray"==e&&(o="B10000000,B01000000,B01101000,B00111100,B00111100,B00010110,B00000010,B00000001"),"icon_invader"==e&&(o="B00111100,B01111110,B11011011,B11111111,B11111111,B00100100,B01011010,B10100101"),"icon_moon"==e&&(o="B01111000,B00011100,B00001110,B00001110,B00001110,B00001110,B00011100,B01110000"),"icon_glasses"==e&&(o="B00000000,B01000010,B10000001,B10000001,B00000000,B11111111,B10111111,B01100110"),"icon_castle"==e&&(o="B10101000,B11111000,B01110000,B01010000,B01010101,B01111111,B01111001,B01111001"),"icon_smile"==e&&(o="B00111100,B01111110,B11011011,B11111111,B10111101,B11000011,B01111110,B00111100"),"icon_planet"==e&&(o="B00000111,B00111001,B01111101,B01111010,B01111010,B10100100,B10011000,B11100000"),"icon_star"==e&&(o="B00010000,B00010000,B00111000,B11111110,B01111100,B00111000,B01101100,B01000100"),"icon_cup"==e&&(o="B01111100,B10111111,B10111101,B10111101,B10111101,B10111111,B11111100,B01111000"),"icon_home"==e&&(o="B00011000,B00111100,B01111110,B11111111,B01111110,B01100110,B01100110,B01100110"),"battery_empty"==e&&(o="B00011100,B00110110,B00100010,B00100010,B00100010,B00100010,B00100010,B00111110"),"battery_medium"==e&&(o="B00011100,B00110110,B00100010,B00100010,B00100010,B00111110,B00111110,B00111110"),"battery_full"==e&&(o="B00011100,B00111110,B00111110,B00111110,B00111110,B00111110,B00111110,B00111110"),""!=o&&(Blockly.Arduino.definitions_["var_ledmatrixdata_sprite_"+e]="esp8266"==profile.default.micro?"static const uint8_t ledmatrix_data_sprite_"+e+"[] = {"+o+"};":"static const uint8_t PROGMEM ledmatrix_data_sprite_"+e+"[] PROGMEM = {"+o+"};",n="ledmatrix_"+i+".clear(); ledmatrix_"+i+".drawBitmap(0,0,ledmatrix_data_sprite_"+e+",8,8,LED_ON); ledmatrix_"+i+".writeDisplay();\n"),n},Blockly.Arduino.ledmatrix_drawsprite_EP=Blockly.Arduino.ledmatrix_drawsprite,Blockly.Arduino.ledmatrix_rotation=function(){return Blockly.Arduino.definitions_.define_ledmatrix?"ledmatrix_"+this.getFieldValue("ID")+".setRotation("+this.getFieldValue("ROT")+");\n":""},Blockly.Arduino.ledmatrix_rotation_EP=Blockly.Arduino.ledmatrix_rotation,Blockly.Arduino.ledmatrix_show=function(){return Blockly.Arduino.definitions_.define_ledmatrix?"ledmatrix_"+this.getFieldValue("ID")+".writeDisplay();\n":""},Blockly.Arduino.ledmatrix_show_EP=Blockly.Arduino.ledmatrix_show,Blockly.Arduino.motor_servo_move=function(){var i=this.getFieldValue("PIN"),e=Blockly.Arduino.valueToCode(this,"DEGREE",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"DELAY_TIME",Blockly.Arduino.ORDER_ATOMIC)||"1000";return Blockly.Arduino.definitions_.define_servo="#include <Servo.h>\n",Blockly.Arduino.definitions_["var_servo"+i]="Servo servo_"+i+";\n",Blockly.Arduino.setups_["setup_servo_"+i]="servo_"+i+".attach("+i+");\n","servo_"+i+".write("+e+");\ndelay("+o+");\n"},Blockly.Arduino.motor_servo_move_i2c=function(){var i=this.getFieldValue("PIN"),e=Blockly.Arduino.valueToCode(this,"DEGREE",Blockly.Arduino.ORDER_ATOMIC),o=this.getFieldValue("ADDR");return Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_pca9685="#include <Adafruit_PWMServoDriver.h>\n",Blockly.Arduino.definitions_["var_pca9685_"+o]="Adafruit_PWMServoDriver pca9685_"+o+";\n",Blockly.Arduino.setups_["setup_pca9685_"+o]="pca9685_"+o+".begin();  pca9685_"+o+".setPWMFreq(60); //servos optimal frequency \n","pca9685_"+o+".setPWM("+i+",0,map("+e+",0,360,102,922));\n"},Blockly.Arduino.motor_servo_move_EP=Blockly.Arduino.motor_servo_move,Blockly.Arduino.motor_servo_read_degrees=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.definitions_.define_servo="#include <Servo.h>\n",Blockly.Arduino.definitions_["var_servo"+i]="Servo servo_"+i+";\n",Blockly.Arduino.setups_["setup_servo_"+i]="servo_"+i+".attach("+i+");\n","servo_"+i+".read();"},Blockly.Arduino.motor_servo_oscillator_set=function(){var i=this.getFieldValue("PIN"),e=this.getFieldValue("TYPE"),o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.definitions_.define_servo="#include <ServoOsc.h>",Blockly.Arduino.definitions_["var_oscillator_"+i]="ServoOsc oscillator_"+i+";\n",Blockly.Arduino.setups_["setup_oscillator_"+i]="oscillator_"+i+".attach("+i+");";var n="";return"A"==e&&(n="oscillator_"+i+".setAmplitude("+o+");\n"),"P"==e&&(n="oscillator_"+i+".setPhase("+o+");\n"),"T"==e&&(n="oscillator_"+i+".setPeriod("+o+");\n"),"O"==e&&(n="oscillator_"+i+".setOffset("+o+");\n"),n},Blockly.Arduino.motor_servo_oscillator_action=function(){var i=this.getFieldValue("PIN"),e=this.getFieldValue("TYPE");Blockly.Arduino.definitions_.define_servo="#include <ServoOsc.h>",Blockly.Arduino.definitions_["var_oscillator_"+i]="ServoOsc oscillator_"+i+";\n",Blockly.Arduino.setups_["setup_oscillator_"+i]="oscillator_"+i+".attach("+i+");";var o="";return"UPDATE"==e&&(o="oscillator_"+i+".update();\n"),"START"==e&&(o="oscillator_"+i+".start();\n"),"STOP"==e&&(o="oscillator_"+i+".stop();\n"),"RESET"==e&&(o="oscillator_"+i+".resetToStart();\n"),o},Blockly.Arduino.motor_servo_oscillator_refresh=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.definitions_.define_servo="#include <Servo.h>",Blockly.Arduino.definitions_.define_otto='#include "Otto.h"',Blockly.Arduino.definitions_.define_oscillator='#include "Oscillator.h"',Blockly.Arduino.definitions_["var_oscillator_"+i]="Oscillator osc_"+i+";\n",Blockly.Arduino.loops_["loop_oscillator_"+i]="\tosc_"+i+".refresh();","osc_"+i+".refresh();\n"},Blockly.Arduino.motor_stepper_init=function(){var i=this.getFieldValue("ID"),e=this.getFieldValue("PIN1"),o=this.getFieldValue("PIN2"),n=this.getFieldValue("PIN3"),t=this.getFieldValue("PIN4"),l=Blockly.Arduino.valueToCode(this,"STEPS",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.definitions_.define_stepper="#include <Stepper.h>\n",Blockly.Arduino.definitions_["var_stepper"+i]="Stepper stepper_"+i+"("+l+","+e+","+n+","+o+","+t+");\n",""},Blockly.Arduino.motor_stepper_setspeed=function(){return"stepper_"+this.getFieldValue("ID")+".setSpeed("+Blockly.Arduino.valueToCode(this,"RPM",Blockly.Arduino.ORDER_ATOMIC)+");\n"},Blockly.Arduino.motor_stepper_step=function(){return"stepper_"+this.getFieldValue("ID")+".step("+Blockly.Arduino.valueToCode(this,"STEP",Blockly.Arduino.ORDER_ATOMIC)+");\n"},Blockly.Arduino.motor_dcpwm=function(){var i=this.getFieldValue("PIN1"),e=this.getFieldValue("PIN2"),o=this.getFieldValue("PIN3"),n=this.getFieldValue("PIN1STATUS"),t=this.getFieldValue("PIN2STATUS"),l=Blockly.Arduino.valueToCode(this,"PWMVAL",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_["setup_output_"+i]="pinMode("+i+", OUTPUT);",Blockly.Arduino.setups_["setup_output_"+e]="pinMode("+e+", OUTPUT);",Blockly.Arduino.setups_["setup_output_"+o]="pinMode("+o+", OUTPUT);","digitalWrite("+i+","+n+");\ndigitalWrite("+e+","+t+");\nanalogWrite("+o+","+l+");\n"},Blockly.Arduino.motor_l298n_init=function(){var i=this.getFieldValue("EN-A"),e=this.getFieldValue("IN1"),o=this.getFieldValue("IN2"),n=this.getFieldValue("IN3"),t=this.getFieldValue("IN4"),l=this.getFieldValue("EN-B");return Blockly.Arduino.setups_["setup_output_"+i]="pinMode("+i+", OUTPUT);",Blockly.Arduino.setups_["setup_output_"+e]="pinMode("+e+", OUTPUT);",Blockly.Arduino.setups_["setup_output_"+o]="pinMode("+o+", OUTPUT);",Blockly.Arduino.setups_["setup_output_"+n]="pinMode("+n+", OUTPUT);",Blockly.Arduino.setups_["setup_output_"+t]="pinMode("+t+", OUTPUT);",Blockly.Arduino.setups_["setup_output_"+l]="pinMode("+l+", OUTPUT);",Blockly.Arduino.definitions_.var_l298n_ena="int l298n_ena="+i+";",Blockly.Arduino.definitions_.var_l298n_in1="int l298n_in1="+e+";",Blockly.Arduino.definitions_.var_l298n_in2="int l298n_in2="+o+";",Blockly.Arduino.definitions_.var_l298n_in3="int l298n_in3="+n+";",Blockly.Arduino.definitions_.var_l298n_in4="int l298n_in4="+t+";",Blockly.Arduino.definitions_.var_l298n_enb="int l298n_enb="+l+";",""},Blockly.Arduino.motor_l298n_move=function(){var i=this.getFieldValue("MOTOR"),e=this.getFieldValue("DIR"),o=Blockly.Arduino.valueToCode(this,"SPEED",Blockly.Arduino.ORDER_ATOMIC),n="";return"A"==i?n=("FW"==e?"digitalWrite(l298n_in1,LOW);\ndigitalWrite(l298n_in2,HIGH);\n":"digitalWrite(l298n_in1,HIGH);\ndigitalWrite(l298n_in2,LOW);\n")+"analogWrite(l298n_ena,("+o+"));\n":"B"==i&&(n=("FW"==e?"digitalWrite(l298n_in3,LOW);\ndigitalWrite(l298n_in4,HIGH);\n":"digitalWrite(l298n_in3,HIGH);\ndigitalWrite(l298n_in4,LOW);\n")+"analogWrite(l298n_enb,("+o+"));\n"),n},Blockly.Arduino.motor_l298p_init=function(){var i=this.getFieldValue("EN1"),e=this.getFieldValue("M1"),o=this.getFieldValue("EN2"),n=this.getFieldValue("M2");return Blockly.Arduino.setups_["setup_output_"+i]="pinMode("+i+", OUTPUT);",Blockly.Arduino.setups_["setup_output_"+e]="pinMode("+e+", OUTPUT);",Blockly.Arduino.setups_["setup_output_"+o]="pinMode("+o+", OUTPUT);",Blockly.Arduino.setups_["setup_output_"+n]="pinMode("+n+", OUTPUT);",Blockly.Arduino.definitions_.var_l298p_en1="int l298p_en1="+i+";",Blockly.Arduino.definitions_.var_l298p_m1="int l298p_m1="+e+";",Blockly.Arduino.definitions_.var_l298p_en2="int l298p_en2="+o+";",Blockly.Arduino.definitions_.var_l298p_m2="int l298p_m2="+n+";",""},Blockly.Arduino.motor_l298p_move=function(){if(!Blockly.Arduino.definitions_.var_l298p_en1||!Blockly.Arduino.definitions_.var_l298p_en2)return"//no motor\n";var i=this.getFieldValue("MOTOR"),e=this.getFieldValue("DIR"),o=Blockly.Arduino.valueToCode(this,"SPEED",Blockly.Arduino.ORDER_ATOMIC),n="";return"A"==i?n=("FW"==e?"digitalWrite(l298p_m1,HIGH);\n":"digitalWrite(l298p_m1,LOW);\n")+"analogWrite(l298p_en1,("+o+"));\n":"B"==i&&(n=("FW"==e?"digitalWrite(l298p_m2,HIGH);\n":"digitalWrite(l298p_m2,LOW);\n")+"analogWrite(l298p_en2,("+o+"));\n"),n},Blockly.Arduino.motorshield_servo_move=function(){var i=this.getFieldValue("ID"),e=10;return 1==i&&(e=10),2==i&&(e=9),i=Blockly.Arduino.valueToCode(this,"DEGREE",Blockly.Arduino.ORDER_ATOMIC),Blockly.Arduino.definitions_.define_servo="#include <Servo.h>\n",Blockly.Arduino.definitions_["var_servo"+e]="Servo servo_"+e+";\n",Blockly.Arduino.setups_["setup_servo_"+e]="servo_"+e+".attach("+e+");\n","servo_"+e+".write("+i+");\n"},Blockly.Arduino.motorshield_stepper_init=function(){var i=this.getFieldValue("ID"),e=Blockly.Arduino.valueToCode(this,"STEPS",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.definitions_.define_motorshield="#include <AFMotor.h>\n",Blockly.Arduino.definitions_["var_motorshield_stepper"+i]="AF_Stepper motorshield_stepper_"+i+"("+e+","+i+");\n",""},Blockly.Arduino.motorshield_stepper_setspeed=function(){var i=this.getFieldValue("ID"),e=Blockly.Arduino.valueToCode(this,"RPM",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.definitions_.define_motorshield="#include <AFMotor.h>\n",Blockly.Arduino.definitions_["var_motorshield_stepper"+i]||(Blockly.Arduino.definitions_["var_motorshield_stepper"+i]="AF_Stepper motorshield_stepper_"+i+"(4096 ,"+i+");\n"),"motorshield_stepper_"+i+".setSpeed("+e+");\n"},Blockly.Arduino.motorshield_stepper_step=function(){var i=this.getFieldValue("ID"),e=Blockly.Arduino.valueToCode(this,"STEP",Blockly.Arduino.ORDER_ATOMIC),o=this.getFieldValue("DIR");return Blockly.Arduino.definitions_.define_motorshield="#include <AFMotor.h>\n",Blockly.Arduino.definitions_["var_motorshield_stepper"+i]||(Blockly.Arduino.definitions_["var_motorshield_stepper"+i]="AF_Stepper motorshield_stepper_"+i+"(4096 ,"+i+");\n"),"motorshield_stepper_"+i+".step("+e+","+o+",SINGLE);\n"},Blockly.Arduino.motorshield_dc_move=function(){var i=this.getFieldValue("ID"),e=this.getFieldValue("DIR");return Blockly.Arduino.definitions_.define_motorshield="#include <AFMotor.h>\n",Blockly.Arduino.definitions_["var_motorshield_dc"+i]="AF_DCMotor motorshield_dc_"+i+"("+i+");\n","motorshield_dc_"+i+".run("+e+");\n"},Blockly.Arduino.motorshield_dc_setspeed=function(){var i=this.getFieldValue("ID"),e=Blockly.Arduino.valueToCode(this,"SPEED",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.definitions_.define_motorshield="#include <AFMotor.h>\n",Blockly.Arduino.definitions_["var_motorshield_dc"+i]||(Blockly.Arduino.definitions_["var_motorshield_dc"+i]="AF_DCMotor motorshield_dc_"+i+"("+i+");\n"),"motorshield_dc_"+i+".setSpeed("+e+");\n"},Blockly.Arduino.mp3={},Blockly.Arduino.mp3_init=function(){var i=this.getFieldValue("RX"),e=this.getFieldValue("TX");return Blockly.Arduino.definitions_.define_mp3="#include <MD_YX5300.h>",Blockly.Arduino.definitions_.var_mp3="MD_YX5300 mp3_player("+e+","+i+");",Blockly.Arduino.setups_.setup_mp3="mp3_player.begin(); mp3_player.setCallback(0); mp3_player.setSynchronous(0); mp3_player.reset();\n",""},Blockly.Arduino.mp3_play_folderfile=function(){return"mp3_player.playSpecific((uint8_t)"+(Blockly.Arduino.valueToCode(this,"FOLDER",Blockly.Arduino.ORDER_ATOMIC)||"0")+",(uint8_t)"+(Blockly.Arduino.valueToCode(this,"FILE",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"},Blockly.Arduino.mp3_volume=function(){return"mp3_player.volume((uint8_t)"+(Blockly.Arduino.valueToCode(this,"VOLUME",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"},Blockly.Arduino.mp3_eq=function(){return"mp3_player.equalizer((uint8_t)"+this.getFieldValue("EQ")+");\n"},Blockly.Arduino.mp3_control=function(){var i=this.getFieldValue("CONTROL"),e="mp3_player.";return("PLAY"==i?e+"playStart()":"STOP"==i?e+"playStop()":"PAUSE"==i?e+"playPause()":"NEXT"==i?e+"playNext()":"PREV"==i?e+"playPrev()":e+"playStart()")+";\n"},Blockly.Arduino.mp3_reset=function(){return"mp3_player.reset();\n"},Blockly.Arduino.mqtt={},Blockly.Arduino.mqtt_init=function(){var i=Blockly.Arduino.quote_(this.getFieldValue("MAC")),e=Blockly.Arduino.quote_(this.getFieldValue("BROKER")),o=this.getFieldValue("PORT"),n=Blockly.Arduino.quote_(this.getFieldValue("USER")),t=Blockly.Arduino.quote_(this.getFieldValue("PASS")),l=Blockly.Arduino.quote_(this.getFieldValue("CLIENTID"));return Blockly.Arduino.definitions_.var_mqtt_mac="byte mqtt_mac[] = {"+i+"};",Blockly.Arduino.definitions_.var_mqtt_broker="const char mqtt_broker[]="+e+";",Blockly.Arduino.definitions_.var_mqtt_port="const int mqtt_port="+o+";",Blockly.Arduino.definitions_.var_mqtt_user="const char mqtt_user[]="+n+";",Blockly.Arduino.definitions_.var_mqtt_pass="const char mqtt_pass[]="+t+";",Blockly.Arduino.definitions_.var_mqtt_clientid="const char mqtt_clientid[]="+l+";",setupMQTT("ethernet",0,0),Blockly.Arduino.setups_.setup_mqtt="\t ABlocksIOT.begin(mqtt_broker,mqtt_port, mqtt_user,mqtt_pass, mqtt_clientid, mqtt_mac, mqtt_callback, mqtt_subscribe);",""},Blockly.Arduino.mqtt_init_EP=Blockly.Arduino.mqtt_init,Blockly.Arduino.mqtt_init_esp8266=function(){var i=Blockly.Arduino.quote_(this.getFieldValue("BROKER")),e=this.getFieldValue("PORT"),o=Blockly.Arduino.quote_(this.getFieldValue("USER")),n=Blockly.Arduino.quote_(this.getFieldValue("PASS")),t=Blockly.Arduino.quote_(this.getFieldValue("CLIENTID")),l=Blockly.Arduino.quote_(this.getFieldValue("WIFINAME")),r=Blockly.Arduino.quote_(this.getFieldValue("WIFIPASS")),d=this.getFieldValue("BAUD"),u=this.getFieldValue("RX"),_=this.getFieldValue("TX");return Blockly.Arduino.definitions_.var_mqtt_broker="const char mqtt_broker[]="+i+";",Blockly.Arduino.definitions_.var_mqtt_port="const int mqtt_port="+e+";",Blockly.Arduino.definitions_.var_mqtt_user="const char mqtt_user[]="+o+";",Blockly.Arduino.definitions_.var_mqtt_pass="const char mqtt_pass[]="+n+";",Blockly.Arduino.definitions_.var_mqtt_clientid="const char mqtt_clientid[]="+t+";",Blockly.Arduino.definitions_.var_mqtt_wifi_ssid="const char mqtt_wifi_ssid[]="+l+";",Blockly.Arduino.definitions_.var_mqtt_wifi_pass="const char mqtt_wifi_pass[]="+r+";",setupMQTT("esp8266",u,_,d),Blockly.Arduino.setups_.setup_mqtt="\tmqtt_esp8266_serial.begin("+d+");\n\tABlocksIOT.begin(mqtt_broker,mqtt_port, mqtt_user,mqtt_pass, mqtt_clientid, mqtt_esp8266_wifi, mqtt_wifi_ssid, mqtt_wifi_pass, mqtt_callback, mqtt_subscribe);",""},Blockly.Arduino.mqtt_init_esp8266_EP=Blockly.Arduino.mqtt_init_esp8266,Blockly.Arduino.mqtt_pub=function(){var i=Blockly.Arduino.valueToCode(this,"TOPIC",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"''",e=Blockly.Arduino.valueToCode(this,"MSG",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"''",o="ABlocksIOT.Publish(String("+i+"), String("+e+"));\n";Blockly.Arduino.definitions_.var_mqtt_esp8266&&(o="mqtt_esp8266_serial.listen(); ABlocksIOT.Publish(String("+i+"), String("+e+"));\n");var n=Blockly.Arduino.definitions_.var_mqtt_esp8266;return n&&n.startsWith("HardwareSerial")&&(o="ABlocksIOT.Publish(String("+i+"), String("+e+"));\n"),"esp8266"==profile.default.micro&&(o="mqtt_client.publish(String("+i+").c_str(),String("+e+").c_str());\n"),o},Blockly.Arduino.mqtt_sub=function(){var i=Blockly.Arduino.valueToCode(this,"TOPIC",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"''",e=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);return Blockly.Arduino.mqtt_sub_[i]=e,"esp8266"==profile.default.micro?setupMQTT_ESP():setupMQTT("",0,0),""},Blockly.Arduino.mqtt_sub_text=function(){var i=Blockly.Arduino.valueToCode(this,"TOPIC",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"''",e=Blockly.Arduino.variableDB_Text_.getName(this.getFieldValue("VARTEXT"),Blockly.Variables.NAME_TYPE);return Blockly.Arduino.mqtt_sub_[i]="s_"+e,"esp8266"==profile.default.micro?setupMQTT_ESP():setupMQTT("",0,0),""},Blockly.Arduino.mqtt_isconnected=function(){var i=Blockly.Arduino.definitions_.var_mqtt_esp8266,e="ABlocksIOT.isConnected()";return Blockly.Arduino.definitions_.var_mqtt_esp8266&&(e="mqtt_esp8266_serial.listen(); ABlocksIOT.isConnected()"),i&&i.startsWith("HardwareSerial")&&(e="ABlocksIOT.isConnected()"),"esp8266"==profile.default.micro&&(e="mqtt_client.connected()"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.mqtt_thingspeak_pub=function(){var i=this.getFieldValue("CHANNEL"),e=this.getFieldValue("FIELD"),o=this.getFieldValue("APIKEY");return[Blockly.Arduino.quote_("channels/"+i+"/publish/fields/"+e+"/"+o),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.mqtt_thingspeak_sub=function(){var i=this.getFieldValue("CHANNEL"),e=this.getFieldValue("FIELD"),o=this.getFieldValue("APIKEY"),n=Blockly.Arduino.quote_("channels/"+i+"/subscribe/fields/"+e+"/"+o);return""==o&&(n=Blockly.Arduino.quote_("channels/"+i+"/subscribe/fields/"+e)),[n,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.mqtt_adafruit_pub=function(){var i=this.getFieldValue("USER"),e=this.getFieldValue("FEED");return[Blockly.Arduino.quote_(i+"/f/"+e),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.mqtt_adafruit_sub=function(){var i=this.getFieldValue("USER"),e=this.getFieldValue("FEED");return[Blockly.Arduino.quote_(i+"/f/"+e),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.mqtt_init_ESP=function(){var i=Blockly.Arduino.quote_(this.getFieldValue("BROKER")),e=this.getFieldValue("PORT"),o=Blockly.Arduino.quote_(this.getFieldValue("USER")),n=Blockly.Arduino.quote_(this.getFieldValue("PASS")),t=Blockly.Arduino.quote_(this.getFieldValue("CLIENTID")),l=Blockly.Arduino.quote_(this.getFieldValue("WIFINAME")),r=Blockly.Arduino.quote_(this.getFieldValue("WIFIPASS"));return Blockly.Arduino.definitions_.var_mqtt_wifi_ssid="const char mqtt_wifi_ssid[]="+l+";",Blockly.Arduino.definitions_.var_mqtt_wifi_pass="const char mqtt_wifi_pass[]="+r+";",Blockly.Arduino.definitions_.var_mqtt_broker="const char mqtt_broker[]="+i+";",Blockly.Arduino.definitions_.var_mqtt_port="const int mqtt_port="+e+";",Blockly.Arduino.definitions_.var_mqtt_user="const char mqtt_user[]="+o+";",Blockly.Arduino.definitions_.var_mqtt_pass="const char mqtt_pass[]="+n+";",Blockly.Arduino.definitions_.var_mqtt_clientid="const char mqtt_clientid[]="+t+";",setupMQTT_ESP(),Blockly.Arduino.setups_.setup_mqtt="\tmqtt_setup();",""},Blockly.Arduino.neopixel={},Blockly.Arduino.neopixel_init=function(){var i=this.getFieldValue("RGBMODE"),e=this.getFieldValue("FREQ"),o=this.getFieldValue("PIN"),n=Blockly.Arduino.valueToCode(this,"LEDCOUNT",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.definitions_.define_neopixel="#include <ABlocks_NeoPixel.h>\n",Blockly.Arduino.definitions_.var_neopixel="Adafruit_NeoPixel neo_pixel = Adafruit_NeoPixel("+n+","+o+","+i+"+"+e+");\n",Blockly.Arduino.setups_.setup_neopixel="neo_pixel.begin();\n",""},Blockly.Arduino.neopixel_clear=function(){return Blockly.Arduino.definitions_.define_neopixel?"neo_pixel.clear();\n":""},Blockly.Arduino.neopixel_setled=function(){return"neo_pixel.setPixelColor("+Blockly.Arduino.valueToCode(this,"LEDNUMBER",Blockly.Arduino.ORDER_ATOMIC)+", neo_pixel.Color("+Blockly.Arduino.valueToCode(this,"R",Blockly.Arduino.ORDER_ATOMIC)+","+Blockly.Arduino.valueToCode(this,"G",Blockly.Arduino.ORDER_ATOMIC)+","+Blockly.Arduino.valueToCode(this,"B",Blockly.Arduino.ORDER_ATOMIC)+"));\n"},Blockly.Arduino.neopixel_setledxy=function(){var i=8,e=8,o=this.getFieldValue("MATRIXSIZE");"8x8"==o&&(e=i=8),"16x16"==o&&(e=i=16),"8x5"==o&&(i=8,e=5),o=Blockly.Arduino.valueToCode(this,"X",Blockly.Arduino.ORDER_ATOMIC);var n=Blockly.Arduino.valueToCode(this,"Y",Blockly.Arduino.ORDER_ATOMIC);return o<1&&(o=1),n<1&&(o=1),i<o&&(o=i),e<n&&(n=e),"neo_pixel.setPixelColor((("+n+"*"+i+")+"+o+"), neo_pixel.Color("+(e=Blockly.Arduino.valueToCode(this,"R",Blockly.Arduino.ORDER_ATOMIC))+","+Blockly.Arduino.valueToCode(this,"G",Blockly.Arduino.ORDER_ATOMIC)+","+Blockly.Arduino.valueToCode(this,"B",Blockly.Arduino.ORDER_ATOMIC)+"));\n"},Blockly.Arduino.neopixel_setled2=function(){var i=Blockly.Arduino.valueToCode(this,"LEDNUMBER",Blockly.Arduino.ORDER_ATOMIC),e=this.getFieldValue("COLOR");return"neo_pixel.setPixelColor("+i+", neo_pixel.Color("+hexToR(e)+","+hexToG(e)+","+(e=hexToB(e))+") );\n"},Blockly.Arduino.neopixel_setled2xy=function(){var i=8,e=8,o=this.getFieldValue("MATRIXSIZE");"8x8"==o&&(e=i=8),"16x16"==o&&(e=i=16),"8x5"==o&&(i=8,e=5),o=Blockly.Arduino.valueToCode(this,"X",Blockly.Arduino.ORDER_ATOMIC);var n=Blockly.Arduino.valueToCode(this,"Y",Blockly.Arduino.ORDER_ATOMIC);o<1&&(o=1),n<1&&(o=1),i<o&&(o=i),e<n&&(n=e);var t=this.getFieldValue("COLOR");return"neo_pixel.setPixelColor((("+n+"*"+i+")+"+o+"), neo_pixel.Color("+(e=hexToR(t))+","+hexToG(t)+","+(t=hexToB(t))+"));\n"},Blockly.Arduino.neopixel_setdata=function(){var i="",e=this.getFieldValue("DATA");return null!=e&&""!=e&&(Blockly.Arduino.definitions_fnc_.fnc_neopixel_setdata="void neopixel_setdata(const unsigned long *_data){\r\n\tunsigned long _lcount=pgm_read_dword_near(_data);\r\n\tfor(int i=0;i<_lcount;i++){\r\n\t\tunsigned long _dd=pgm_read_dword_near(&_data[i+1]);\r\n\t\tneo_pixel.setPixelColor(i,_dd);\r\n\t}\r\n}\r\n",Blockly.Arduino.definitions_["var_neopixeldata_"+Blockly.Arduino.neopixel_count]="const unsigned long neopixel_data_"+Blockly.Arduino.neopixel_count+"[] PROGMEM = {"+e+"};\r\n",i="neopixel_setdata(neopixel_data_"+Blockly.Arduino.neopixel_count+");\n",Blockly.Arduino.neopixel_count++),i},Blockly.Arduino.neopixel_show=function(){return"neo_pixel.show();\n"},Blockly.Arduino.oled={},Blockly.Arduino.oled_init=function(){var i=this.getFieldValue("ADDR"),e=this.getFieldValue("ID");return Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_adafruit_gfx="#include <Adafruit_GFX.h>",Blockly.Arduino.definitions_.define_oled="#include <Adafruit_SSD1306.h>",Blockly.Arduino.definitions_["var_oled_"+e]="Adafruit_SSD1306 oled_"+e+"(128,64, &Wire,-1);",Blockly.Arduino.setups_["setup_oled_"+e]="\toled_"+e+".begin(SSD1306_SWITCHCAPVCC,"+i+");\n",""},Blockly.Arduino.oled_init_EP=Blockly.Arduino.oled_init,Blockly.Arduino.oled_clear=function(){var i=this.getFieldValue("ID");return"oled_"+i+".clearDisplay(); oled_"+i+".display();\n"},Blockly.Arduino.oled_clear_EP=Blockly.Arduino.oled_clear,Blockly.Arduino.oled_drawpixel=function(){var i=this.getFieldValue("ID");return"oled_"+i+".drawPixel("+Blockly.Arduino.valueToCode(this,"X",Blockly.Arduino.ORDER_ATOMIC)+","+Blockly.Arduino.valueToCode(this,"Y",Blockly.Arduino.ORDER_ATOMIC)+","+this.getFieldValue("COL")+"); oled_"+i+".display();\n"},Blockly.Arduino.oled_drawpixel_EP=Blockly.Arduino.oled_drawpixel,Blockly.Arduino.oled_drawline=function(){var i=this.getFieldValue("ID");return"oled_"+i+".drawLine("+Blockly.Arduino.valueToCode(this,"X1",Blockly.Arduino.ORDER_ATOMIC)+","+Blockly.Arduino.valueToCode(this,"Y1",Blockly.Arduino.ORDER_ATOMIC)+","+Blockly.Arduino.valueToCode(this,"X2",Blockly.Arduino.ORDER_ATOMIC)+","+Blockly.Arduino.valueToCode(this,"Y2",Blockly.Arduino.ORDER_ATOMIC)+","+this.getFieldValue("COL")+"); oled_"+i+".display();\n"},Blockly.Arduino.oled_drawline_EP=Blockly.Arduino.oled_drawline,Blockly.Arduino.oled_drawrectangle=function(){var i=this.getFieldValue("ID"),e=Blockly.Arduino.valueToCode(this,"X1",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"Y1",Blockly.Arduino.ORDER_ATOMIC),n=Blockly.Arduino.valueToCode(this,"X2",Blockly.Arduino.ORDER_ATOMIC),t=Blockly.Arduino.valueToCode(this,"Y2",Blockly.Arduino.ORDER_ATOMIC),l=this.getFieldValue("COL"),r="drawRect";return"TRUE"==this.getFieldValue("FILL")&&(r="fillRect"),"oled_"+i+"."+r+"("+e+","+o+","+n+","+t+","+l+"); oled_"+i+".display();\n"},Blockly.Arduino.oled_drawrectangle_EP=Blockly.Arduino.oled_drawrectangle,Blockly.Arduino.oled_drawcircle=function(){var i=this.getFieldValue("ID"),e=Blockly.Arduino.valueToCode(this,"X",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"Y",Blockly.Arduino.ORDER_ATOMIC),n=Blockly.Arduino.valueToCode(this,"R",Blockly.Arduino.ORDER_ATOMIC),t=this.getFieldValue("COL"),l="drawCircle";return"TRUE"==this.getFieldValue("FILL")&&(l="fillCircle"),"oled_"+i+"."+l+"("+e+","+o+","+n+","+t+"); oled_"+i+".display();\n"},Blockly.Arduino.oled_drawcircle_EP=Blockly.Arduino.oled_drawcircle,Blockly.Arduino.oled_drawtext=function(){var i=Blockly.Arduino.valueToCode(this,"TXT",Blockly.Arduino.ORDER_ATOMIC)||"''",e=this.getFieldValue("ID"),o=Blockly.Arduino.valueToCode(this,"X",Blockly.Arduino.ORDER_ATOMIC),n=Blockly.Arduino.valueToCode(this,"Y",Blockly.Arduino.ORDER_ATOMIC);return"oled_"+e+".setTextSize("+this.getFieldValue("SIZE")+"); oled_"+e+".setTextColor("+this.getFieldValue("COL")+"); oled_"+e+".setCursor("+o+","+n+"); oled_"+e+".print("+i+"); oled_"+e+".display();\n"},Blockly.Arduino.oled_drawtext_EP=Blockly.Arduino.oled_drawtext,Blockly.Arduino.oled_drawbitmap=function(){var i=Blockly.Arduino.valueToCode(this,"X",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"Y",Blockly.Arduino.ORDER_ATOMIC),o=this.getFieldValue("DATA"),n=this.getFieldValue("ID");return Blockly.Arduino.definitions_["var_oleddata_"+Blockly.Arduino.oled_count]="esp8266"==profile.default.micro?"static const uint8_t oled_data_"+Blockly.Arduino.oled_count+"[] = {"+o+"};":"static const uint8_t PROGMEM oled_data_"+Blockly.Arduino.oled_count+"[] PROGMEM = {"+o+"};",i="oled_"+n+".clearDisplay(); oled_"+n+".drawBitmap("+i+","+e+",&oled_data_"+Blockly.Arduino.oled_count+"[2],oled_data_"+Blockly.Arduino.oled_count+"[0], oled_data_"+Blockly.Arduino.oled_count+"[1],WHITE); oled_"+n+".display();\n",Blockly.Arduino.oled_count++,i},Blockly.Arduino.oled_drawbitmap_EP=Blockly.Arduino.oled_drawbitmap,Blockly.Arduino.oled_rotation=function(){return"oled_"+this.getFieldValue("ID")+".setRotation("+this.getFieldValue("ROT")+");\n"},Blockly.Arduino.oled_rotation_EP=Blockly.Arduino.oled_rotation,Blockly.Arduino.otto_calibrate=function(){setupOtto();var i=Blockly.Arduino.valueToCode(this,"LEGL",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"LEGR",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"FOOTL",Blockly.Arduino.ORDER_ATOMIC),n=Blockly.Arduino.valueToCode(this,"FOOTR",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_.setup_otto_calibrate="robot_otto.setTrims("+i+","+e+","+o+","+n+");",""},Blockly.Arduino.otto_move=function(){setupOtto();var i=this.getFieldValue("MOV"),e=this.getFieldValue("SPEED"),o=this.getFieldValue("AMPLITUDE"),n="robot_otto.";return"home"==i&&(n+="home();"),"walkF"==i&&(n+="walk(1,"+e+",1);"),"walkB"==i&&(n+="walk(1,"+e+",-1);"),"turnL"==i&&(n+="turn(1,"+e+",1);"),"turnR"==i&&(n+="turn(1,"+e+",-1);"),"jump"==i&&(n+="jump(1,"+e+");"),"bendL"==i&&(n+="bend(1,"+e+",1);"),"bendR"==i&&(n+="bend(1,"+e+",-1);"),"shakeL"==i&&(n+="shakeLeg(1,"+e+",1);"),"shakeR"==i&&(n+="shakeLeg(1,"+e+",-1);"),"updown"==i&&(n+="updown(1,"+e+","+o+");"),"moonwalkerL"==i&&(n+="moonwalker(1,"+e+","+o+",1);"),"moonwalkerR"==i&&(n+="moonwalker(1,"+e+","+o+",-1);"),"swing"==i&&(n+="swing(1,"+e+","+o+");"),"crusaito1"==i&&(n+="crusaito(1,"+e+","+o+",1);"),"crusaito2"==i&&(n+="crusaito(1,"+e+","+o+",-1);"),"flapping1"==i&&(n+="flapping(1,"+e+","+o+",1);"),"flapping2"==i&&(n+="flapping(1,"+e+","+o+",-1);"),"tiptoeswing"==i&&(n+="tiptoeSwing(1,"+e+","+o+");"),"jitter"==i&&(n+="jitter(1,"+e+","+o+");"),"ascendingturn"==i&&(n+="ascendingTurn(1,"+e+","+o+");"),n+"\n"},Blockly.Arduino.otto_sing=function(){return setupOtto(),"robot_otto.sing("+this.getFieldValue("SOUND")+");\n"},Blockly.Arduino.otto_note=function(){return setupOtto(),"robot_otto._playNote("+this.getFieldValue("FREQ")+",(long)"+Blockly.Arduino.valueToCode(this,"DURATION",Blockly.Arduino.ORDER_ATOMIC)+");\n"},Blockly.Arduino.otto_mouth=function(){setupOtto();var i=this.getFieldValue("MOUTH");return i<0?"robot_otto.clearMouth();\n":"robot_otto.putMouth("+i+",true);\n"},Blockly.Arduino.otto_gesture=function(){return setupOtto(),"robot_otto.playGesture("+this.getFieldValue("GESTURE")+");\n"},Blockly.Arduino.otto_distance=function(){return setupOtto(),["robot_otto.getDistance()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.otto_noise=function(){return setupOtto(),["robot_otto.getNoise()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.otto_button=function(){var i=this.getFieldValue("PIN"),e=this.getFieldValue("STATUS");Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",Blockly.Arduino.definitions_.define_button_debounced='#include "ABlocks_Button.h"',Blockly.Arduino.definitions_["var_button_debounced_"+i]="Button button_debounced_"+i+"("+i+",50);\n";var o="";return"pressed"==e&&(o="button_debounced_"+i+".pressed()"),"released"==e&&(o="button_debounced_"+i+".released()"),[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.rfid={},Blockly.Language||(Blockly.Language={}),Blockly.Arduino.rfid_init=function(){setupRFID();var i=this.getFieldValue("CS_PIN"),e=this.getFieldValue("RST_PIN");return Blockly.Arduino.definitions_.var_rfid="MFRC522 mfrc522("+i+","+e+");\n",""},Blockly.Arduino.rfid_newcardpresent=function(){return setupRFID(),["mfrc522.PICC_IsNewCardPresent()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.rfid_readuid=function(){return setupRFID(),["fnc_rfid_readID()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.rtc={},Blockly.Arduino.rtc_set_time=function(){setupRtc();var i=Blockly.Arduino.valueToCode(this,"HOUR",Blockly.Arduino.ORDER_ATOMIC)||"0",e=Blockly.Arduino.valueToCode(this,"MINUTE",Blockly.Arduino.ORDER_ATOMIC)||"0",o=Blockly.Arduino.valueToCode(this,"SECOND",Blockly.Arduino.ORDER_ATOMIC)||"0",n=Blockly.Arduino.valueToCode(this,"DAY",Blockly.Arduino.ORDER_ATOMIC)||"0",t=Blockly.Arduino.valueToCode(this,"MONTH",Blockly.Arduino.ORDER_ATOMIC)||"0",l=Blockly.Arduino.valueToCode(this,"YEAR",Blockly.Arduino.ORDER_ATOMIC)||"0";return 2e3<=l&&(l-=2e3),"rtc.setTime("+o+","+e+","+i+","+n+","+t+","+l+");\n"},Blockly.Arduino.rtc_set_time_EP=Blockly.Arduino.rtc_set_time,Blockly.Arduino.rtc_set=function(){setupRtc();var i=this.getFieldValue("FIELD"),e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ATOMIC)||"0",o="";return"day"==i&&(o="rtc.setTime(rtc.getSecond(),rtc.getMinute(),rtc.getHour(),"+e+",rtc.getMonth(),rtc.getYear());\n"),"month"==i&&(o="rtc.setTime(rtc.getSecond(),rtc.getMinute(),rtc.getHour(),rtc.getDay(),"+e+",rtc.getYear());\n"),"year"==i&&(2e3<=e&&(e-=2e3),o="rtc.setTime(rtc.getSecond(),rtc.getMinute(),rtc.getHour(),rtc.getDay(),rtc.getMonth(),"+e+");\n"),"hour"==i&&(o="rtc.setTime(rtc.getSecond(),rtc.getMinute(),"+e+",rtc.getDay(),rtc.getMonth(),rtc.getYear());\n"),"minute"==i&&(o="rtc.setTime(rtc.getSecond(),"+e+",rtc.getHour(),rtc.getDay(),rtc.getMonth(),rtc.getYear());\n"),"second"==i&&(o="rtc.setTime("+e+",rtc.getMinute(),rtc.getHour(),rtc.getDay(),rtc.getMonth(),rtc.getYear());\n"),o},Blockly.Arduino.rtc_set_EP=Blockly.Arduino.rtc_set,Blockly.Arduino.rtc_get=function(){setupRtc();var i=this.getFieldValue("FIELD"),e="";return"day"==i&&(e="rtc.getDay()"),"month"==i&&(e="rtc.getMonth()"),"year"==i&&(e="(2000+rtc.getYear())"),"hour"==i&&(e="rtc.getHour()"),"minute"==i&&(e="rtc.getMinute()"),"second"==i&&(e="rtc.getSecond()"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.rtc_get_EP=Blockly.Arduino.rtc_get,Blockly.Arduino.rtc_get_time_text=function(){return setupRtc(),Blockly.Arduino.definitions_fnc_.rtc_time_text='\nString rtc_time_text(){\n\tchar rtcbuffer[10];\n\tsprintf(rtcbuffer,"%02d:%02d:%02d", rtc.getHour(), rtc.getMinute(), rtc.getSecond() );\n\treturn String(rtcbuffer);\n}\n',["rtc_time_text()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.rtc_get_time_text_EP=Blockly.Arduino.rtc_get_time_text,Blockly.Arduino.rtc_get_date_text=function(){return setupRtc(),Blockly.Arduino.definitions_fnc_.rtc_date_text='\nString rtc_date_text(){\n\tchar rtcbuffer[12];\n\tsprintf(rtcbuffer,"%02d/%02d/%04d", rtc.getDay(), rtc.getMonth(), (2000+rtc.getYear()) );\n\treturn String(rtcbuffer);\n}\n',["rtc_date_text()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.rtc_get_date_text_EP=Blockly.Arduino.rtc_get_date_text,Blockly.Arduino.sd={},Blockly.Language||(Blockly.Language={}),Blockly.Arduino.sd_init=function(){setupSD();var i=this.getFieldValue("CS");return Blockly.Arduino.setups_.setup_sd="\tSD.begin("+i+");\n",""},Blockly.Arduino.sd_init_EP=Blockly.Arduino.sd_init,Blockly.Arduino.sd_print=function(){setupSD();var i=Blockly.Arduino.valueToCode(this,"FILE",Blockly.Arduino.ORDER_ATOMIC)||"''",e=Blockly.Arduino.valueToCode(this,"STRINGOUTPUT",Blockly.Arduino.ORDER_ATOMIC)||"''",o=this.getFieldValue("NEWLINE");return Blockly.Arduino.definitions_fnc_.fnc_sd_print="void fnc_sd_print(String _f, String _t, boolean _nl){\n\tsd_file = SD.open(_f, FILE_WRITE);\n\tif(sd_file){\n\t\tif(_nl)sd_file.println(_t);\n\t\telse sd_file.print(_t);\n\t\tsd_file.close();\n\t}\n}\n","fnc_sd_print("+i+",String("+e+"),"+("TRUE"==o?"true":"false")+");\n"},Blockly.Arduino.sd_filesize=function(){setupSD();var i=Blockly.Arduino.valueToCode(this,"FILE",Blockly.Arduino.ORDER_ATOMIC)||"''";return Blockly.Arduino.definitions_fnc_.fnc_sd_filesize="unsigned long fnc_sd_filesize(String _f){\n\tunsigned long s=0;\n\tsd_file = SD.open(_f, FILE_READ);\n\tif(sd_file){\n\t\ts=sd_file.size();\n\t\tsd_file.close();\n\t}\n\treturn s;\n}\n",["fnc_sd_filesize("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sd_readbyte=function(){setupSD();var i=Blockly.Arduino.valueToCode(this,"FILE",Blockly.Arduino.ORDER_ATOMIC)||"''",e=Blockly.Arduino.valueToCode(this,"POS",Blockly.Arduino.ORDER_ATOMIC)||0;return Blockly.Arduino.definitions_fnc_.fnc_sd_readbyte="int fnc_sd_readbyte(String _f, unsigned long _p){\n\tint s=-1;\n\tsd_file = SD.open(_f, FILE_READ);\n\tif(sd_file){\n\t\tif(sd_file.seek(_p)){\n\t\t\ts=sd_file.peek();\n\t\t}\n\t\tsd_file.close();\n\t}\n\treturn s;\n}\n",["fnc_sd_readbyte("+i+","+e+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sd_readloop=function(){var i=Blockly.Arduino.valueToCode(this,"FILE",Blockly.Arduino.ORDER_ATOMIC)||"''",e=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);return i="int "+e+";\nsd_file = SD.open("+i+", FILE_READ);\nif(sd_file){\n",i=(i+="\twhile(sd_file.available()){\n")+"\t\t"+e+"=sd_file.read();\n"+Blockly.Arduino.statementToCode(this,"DO")+"\n",i+="\t}\n",(i+="\tsd_file.close();\n")+"}\n"},Blockly.Arduino.sd_writebyte=function(){setupSD();var i=Blockly.Arduino.valueToCode(this,"FILE",Blockly.Arduino.ORDER_ATOMIC)||"''",e=Blockly.Arduino.valueToCode(this,"BYTE",Blockly.Arduino.ORDER_ATOMIC)||0;return Blockly.Arduino.definitions_fnc_.fnc_sd_writebyte="void fnc_sd_writebyte(String _f, int _v){\n\tsd_file = SD.open(_f, FILE_WRITE);\n\tif(sd_file){\n\t\tsd_file.write(_v);\n\t\tsd_file.close();\n\t}\n}\n","fnc_sd_writebyte("+i+","+e+");\n"},Blockly.Arduino.sd_remove=function(){return setupSD(),"SD.remove("+(Blockly.Arduino.valueToCode(this,"FILE",Blockly.Arduino.ORDER_ATOMIC)||"''")+");\n"},Blockly.Arduino.sd_exists=function(){return setupSD(),["SD.exists("+(Blockly.Arduino.valueToCode(this,"FILE",Blockly.Arduino.ORDER_ATOMIC)||"''")+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor={},Blockly.Arduino.sensor_adxl335=function(){var i=this.getFieldValue("PINX"),e=this.getFieldValue("PINY"),o=this.getFieldValue("PINZ");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",Blockly.Arduino.setups_["setup_input_"+e]="pinMode("+e+", INPUT);",Blockly.Arduino.setups_["setup_input_"+o]="pinMode("+o+", INPUT);",Blockly.Arduino.definitions_fnc_.fnc_adxl335="double fnc_adxl335(int _pinx,int _piny,int _pinz,int _type)\n{\n\tint minVal=270;\n\tint maxVal=390;\n\tdouble mvADC=4.8828125; // 5000mV/1024\n\tdouble mvG=550.0; // 3300mV/6g\n\t//raw values\n\tint xRead = analogRead(_pinx);\n\tint yRead = analogRead(_piny);\n\tint zRead = analogRead(_pinz);\n\t//accelerations\n\tdouble aX = ((xRead*mvADC)/mvG)-3.0; // 6 => +-3g\n\tdouble aY = ((yRead*mvADC)/mvG)-3.0;\n\tdouble aZ = ((zRead*mvADC)/mvG)-3.0;\n\tif(_type==0)return aX;\n\tif(_type==1)return aY;\n\tif(_type==2)return aZ;\n\t//angles\n\tint xAng = map(xRead, minVal, maxVal, -90, 90);\n\tint yAng = map(yRead, minVal, maxVal, -90, 90);\n\tint zAng = map(zRead, minVal, maxVal, -90, 90);\n\t//roll, pitch\n\tdouble rX = RAD_TO_DEG * (atan2(-yAng, -zAng) + PI);\n\tdouble pY = RAD_TO_DEG * (atan2(-xAng, -zAng) + PI);\n\tif(_type==3)return rX;\n\tif(_type==4)return pY;\n\treturn 0.0; //invalid type\n}\n",["fnc_adxl335("+i+","+e+","+o+","+this.getFieldValue("TYPE")+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_potentiometer=function(){var i=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);";var e="map(analogRead("+i+"),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(e="analogRead("+i+")"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_potentiometer_EP=Blockly.Arduino.sensor_potentiometer,Blockly.Arduino.sensor_potentiometer_slider_EP=Blockly.Arduino.sensor_potentiometer,Blockly.Arduino.sensor_button=function(){var i=this.getFieldValue("PIN"),e=this.getFieldValue("INVERT");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",i="digitalRead("+i+")","TRUE"==e&&(i="(!"+i+")"),[i,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_crash_EP=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["digitalRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_button_debounced=function(){var i=this.getFieldValue("PIN"),e=this.getFieldValue("STATUS"),o=this.getFieldValue("INVERT");Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",Blockly.Arduino.definitions_.define_button_debounced='#include "ABlocks_Button.h"',Blockly.Arduino.definitions_["var_button_debounced_"+i]="Button button_debounced_"+i+"("+i+",50);\n";var n="";return"pressed"==e&&(n="button_debounced_"+i+".pressed()"),"released"==e&&(n="button_debounced_"+i+".released()"),"TRUE"==o&&(n="(!"+n+")"),[n,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_button_debounced_EP=Blockly.Arduino.sensor_button_debounced,Blockly.Arduino.sensor_touch=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["digitalRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_touch_EP=Blockly.Arduino.sensor_touch,Blockly.Arduino.sensor_pir=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["digitalRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_pir_EP=Blockly.Arduino.sensor_pir,Blockly.Arduino.sensor_dht11=function(){var i=this.getFieldValue("PIN"),e=this.getFieldValue("TYPE");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",Blockly.Arduino.setups_["setup_dht11_"+i]="dht"+i+".begin();",Blockly.Arduino.definitions_.define_dht11='#include "ABlocks_DHT.h"',Blockly.Arduino.definitions_["var_dht11_"+i]="DHT dht"+i+"("+i+",DHT11);",["temperature"==e?"dht"+i+".readTemperature()":"dht"+i+".readHumidity()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_dht11_EP=Blockly.Arduino.sensor_dht11,Blockly.Arduino.sensor_dht22=function(){var i=this.getFieldValue("PIN"),e=this.getFieldValue("TYPE");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",Blockly.Arduino.setups_["setup_dht22_"+i]="dht"+i+".begin();",Blockly.Arduino.definitions_.define_dht22='#include "ABlocks_DHT.h"',Blockly.Arduino.definitions_["var_dht22_"+i]="DHT dht"+i+"("+i+",DHT22);",["temperature"==e?"dht"+i+".readTemperature()":"dht"+i+".readHumidity()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_dht22_EP=Blockly.Arduino.sensor_dht22,Blockly.Arduino.sensor_ultrasonic=function(){var i=this.getFieldValue("TRIGGER_PIN"),e=this.getFieldValue("ECHO_PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", OUTPUT);",Blockly.Arduino.setups_["setup_input_"+e]="pinMode("+e+", INPUT);",setupUltrasonic(),["fnc_ultrasonic_distance("+i+","+e+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_ultrasonic2=function(){var i=this.getFieldValue("TRIGGER_PIN"),e=this.getFieldValue("ECHO_PIN");return Blockly.Arduino.valueToCode(this,"MAXDISTANCE",Blockly.Arduino.ORDER_ATOMIC),Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", OUTPUT);",Blockly.Arduino.setups_["setup_input_"+e]="pinMode("+e+", INPUT);",setupUltrasonic(),["fnc_ultrasonic_distance("+i+","+e+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_ultrasonic_EP=function(){return Blockly.Arduino.setups_.setup_input_3="pinMode(3, OUTPUT);",Blockly.Arduino.setups_.setup_input_4="pinMode(4, INPUT);",setupUltrasonic(),["fnc_ultrasonic_distance(3,4)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_ldr=function(){var i=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);";var e="map(analogRead("+i+"),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(e="analogRead("+i+")"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_ldr_EP=Blockly.Arduino.sensor_ldr,Blockly.Arduino.sensor_ntc=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",Blockly.Arduino.definitions_.define_math="#include <math.h>",Blockly.Arduino.definitions_fnc_.fnc_ntc="double fnc_ntc(int _rawval)\n{\n\tdouble temp;\n\ttemp = log(((10240000/_rawval) - 10000));\n\ttemp = 1 / (0.001129148 + (0.000234125 + (0.0000000876741 * temp * temp ))* temp );\n\ttemp = temp - 273.15;\n\treturn temp;\n}\n",["fnc_ntc(analogRead("+i+"))",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_ntc_EP=Blockly.Arduino.sensor_ntc,Blockly.Arduino.sensor_joystick=function(){var i=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);";var e="map(analogRead("+i+"),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(e="analogRead("+i+")"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_joystick_EP=function(){var i=this.getFieldValue("TYPE"),e=this.getFieldValue("RANGE");Blockly.Arduino.setups_.setup_input_2="pinMode(2, INPUT);",Blockly.Arduino.setups_.setup_input_A6="pinMode(A6, INPUT);",Blockly.Arduino.setups_.setup_input_A7="pinMode(A7, INPUT);";var o=2;return[i="PRESSED"==i?"digitalRead(2)":("X"==i&&(o="A6"),"Y"==i&&(o="A7"),"RAW"==e?"analogRead("+o+")":"map(analogRead("+o+"),0,1023,0,100)"),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_obstacle=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["digitalRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_obstacle_EP=Blockly.Arduino.sensor_obstacle,Blockly.Arduino.sensor_linetracking=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["digitalRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_photoint=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["digitalRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_lm35=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["(analogRead("+i+")*0.48828125)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_lm35_EP=Blockly.Arduino.sensor_lm35,Blockly.Arduino.sensor_lm35=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["(analogRead("+i+")*0.48828125)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_tmp36=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["((analogRead("+i+")*0.48828125)-50.0)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_knock=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["digitalRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_knock_EP=Blockly.Arduino.sensor_knock,Blockly.Arduino.sensor_tilt=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["digitalRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_tilt_EP=Blockly.Arduino.sensor_tilt,Blockly.Arduino.sensor_hall=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["digitalRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_hall_EP=Blockly.Arduino.sensor_hall,Blockly.Arduino.sensor_vibration=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["digitalRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_vibration_EP=Blockly.Arduino.sensor_vibration,Blockly.Arduino.sensor_reed=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["digitalRead("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_reed_EP=Blockly.Arduino.sensor_reed,Blockly.Arduino.sensor_irremote_keys=function(){return["("+this.getFieldValue("KEY")+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_irremote_decode=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.irrx=!0,Blockly.Arduino.setups_.setup_ir_rx="ir_rx.enableIRIn();",Blockly.Arduino.definitions_.define_ir_rx="esp8266"==profile.default.micro?"#include <IRremoteESP8266.h>\n#include <IRrecv.h>\n#include <IRutils.h>\n":'#include "IRremote.h"',Blockly.Arduino.definitions_.var_ir_rx="IRrecv ir_rx("+i+");\ndecode_results ir_rx_results;",Blockly.Arduino.definitions_fnc_.fnc_ir_rx="unsigned long fnc_ir_rx_decode()\n{\n\tbool decoded=false;\n\tif( ir_rx.decode(&ir_rx_results))\n\t{\n\t\tdecoded=true;\n\t\tir_rx.resume();\n\t}\n\t if(decoded) return ir_rx_results.value; else return 0;\n }\n",["(unsigned long)fnc_ir_rx_decode()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_irremote_decode_EP=Blockly.Arduino.sensor_irremote_decode,Blockly.Arduino.sensor_rotary_encoder=function(){return setupEncoder(this.getFieldValue("CLK"),this.getFieldValue("DT")),["encoder_pos",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_rotary_encoder_set=function(){return setupEncoder(profile.default.encoder_clk[0][0],profile.default.encoder_dt[0][0]),"encoder_pos="+Blockly.Arduino.valueToCode(this,"POS",Blockly.Arduino.ORDER_ATOMIC)+";"},Blockly.Arduino.sensor_flame=function(){var i=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);";var e="map(analogRead("+i+"),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(e="analogRead("+i+")"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_flame_EP=function(){var i=this.getFieldValue("PIN");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);",["(!digitalRead("+i+"))",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_sound=function(){var i=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);";var e="map(analogRead("+i+"),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(e="analogRead("+i+")"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_sound_EP=Blockly.Arduino.sensor_sound,Blockly.Arduino.sensor_gas=function(){var i=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);";var e="map(analogRead("+i+"),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(e="analogRead("+i+")"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_gas_EP=function(){Blockly.Arduino.setups_.setup_input_A7="pinMode(A7, INPUT);";var i="map(analogRead(A7),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(i="analogRead(A7)"),[i,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_alcohol=function(){var i=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);";var e="map(analogRead("+i+"),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(e="analogRead("+i+")"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_alcohol_EP=function(){Blockly.Arduino.setups_.setup_input_A7="pinMode(A7, INPUT);";var i="map(analogRead(A7),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(i="analogRead(A7)"),[i,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_air=function(){var i=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);";var e="map(analogRead("+i+"),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(e="analogRead("+i+")"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_air_EP=function(){Blockly.Arduino.setups_.setup_input_A7="pinMode(A7, INPUT);";var i="map(analogRead(A7),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(i="analogRead(A7)"),[i,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_TEMT6000=function(){var i=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);";var e="map(analogRead("+i+"),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(e="analogRead("+i+")"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_TEMT6000_EP=Blockly.Arduino.sensor_TEMT6000,Blockly.Arduino.sensor_soilhumidity=function(){var i=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);";var e="map(analogRead("+i+"),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(e="analogRead("+i+")"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_soilhumidity_EP=Blockly.Arduino.sensor_soilhumidity,Blockly.Arduino.sensor_water=function(){var i=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", INPUT);";var e="map(analogRead("+i+"),0,1023,0,100)";return"RAW"==this.getFieldValue("RANGE")&&(e="analogRead("+i+")"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_water_EP=Blockly.Arduino.sensor_water,Blockly.Arduino.sensor_nunchuk=function(){var i=this.getFieldValue("ID");return Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_nunchuck='#include "ArduinoNunchuk.h"\n',Blockly.Arduino.definitions_.var_nunchuck="ArduinoNunchuk nunchuk = ArduinoNunchuk();",Blockly.Arduino.setups_.setup_nunchuck="nunchuk.init();",Blockly.Arduino.loops_.loop_nunchuck="\tnunchuk.update();",["nunchuk."+i,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_adxl345=function(){var i=this.getFieldValue("ID");return Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_adxl345='#include "ADXL345.h"\n',Blockly.Arduino.definitions_.var_adxl345="ADXL345 adxl345_accel;",Blockly.Arduino.setups_.setup_adxl345="adxl345_accel.begin(); adxl345_accel.setRange(ADXL345_RANGE_16G);",Blockly.Arduino.definitions_fnc_.fnc_adxl345="double fnc_adxl345(int _type)\n{\n\tdouble v=0.0;\n\tif(_type>=1 && _type<=3){\n\t\t//raw data\n\t\tVector data_raw = adxl345_accel.readRaw();\n\t\tif(_type==1)v=data_raw.XAxis;\n\t\tif(_type==2)v=data_raw.YAxis;\n\t\tif(_type==3)v=data_raw.ZAxis;\n\t}\n\telse{\n\t\t//noramlized data g=gravity\n\t\tVector data_norm = adxl345_accel.readNormalize();\n\t\tif(_type>=4 && _type<=6){\n\t\t\tif(_type==4)v=data_norm.XAxis;\n\t\t\tif(_type==5)v=data_norm.YAxis;\n\t\t\tif(_type==6)v=data_norm.ZAxis;\n\t\t}\n\t\telse{\n\t\t\t//pitch,roll degrees\n\t\t\tVector data_filtered = adxl345_accel.lowPassFilter(data_norm, 0.5);\n\t\t\tif(_type==7)v=(atan2(data_filtered.YAxis, data_filtered.ZAxis)*180.0)/M_PI;\n\t\t\tif(_type==8)v=-(atan2(data_filtered.XAxis, sqrt(data_filtered.YAxis*data_filtered.YAxis + data_filtered.ZAxis*data_filtered.ZAxis))*180.0)/M_PI;\n\t\t}\n\t}\n\treturn v;\n}\n",["fnc_adxl345("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_adxl345_EP=Blockly.Arduino.sensor_adxl345,Blockly.Arduino.sensor_pm25=function(){var i=this.getFieldValue("LED"),e=this.getFieldValue("OUT"),o=this.getFieldValue("TYPE");return Blockly.Arduino.setups_["setup_input_"+e]="pinMode("+e+", INPUT);",Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", OUTPUT);",Blockly.Arduino.definitions_fnc_.fnc_pm25="double fnc_pm25(int _ledpin, int _outpin, int _result)\n{\n\tdigitalWrite(_ledpin,LOW);\n\tdelayMicroseconds(280);\n\tdouble voMeasured = analogRead(_outpin);\n\tdelayMicroseconds(40);\n\tdigitalWrite(_ledpin,HIGH);\n\tdelayMicroseconds(9680);\n\tdouble calcVoltage = voMeasured * (5.0 / 1024.0);\n\tdouble dustDensity = 0.172 * calcVoltage - 0.0999;\n\tdouble particlesM3 = float((voMeasured/1024)-0.0356)*120000*0.035;\n\tif(_result==0)return dustDensity;\n\treturn particlesM3;\n}\n",["fnc_pm25("+i+","+e+","+o+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_pm25_EP=function(){var i=this.getFieldValue("TYPE");return Blockly.Arduino.setups_.setup_input_A6="pinMode(A6, INPUT);",Blockly.Arduino.setups_.setup_input_2="pinMode(2, OUTPUT);",Blockly.Arduino.definitions_fnc_.fnc_pm25="double fnc_pm25(int _ledpin, int _outpin, int _result)\n{\n\tdigitalWrite(_ledpin,LOW);\n\tdelayMicroseconds(280);\n\tdouble voMeasured = analogRead(_outpin);\n\tdelayMicroseconds(40);\n\tdigitalWrite(_ledpin,HIGH);\n\tdelayMicroseconds(9680);\n\tdouble calcVoltage = voMeasured * (5.0 / 1024.0);\n\tdouble dustDensity = 0.172 * calcVoltage - 0.0999;\n\tdouble particlesM3 = float((voMeasured/1024)-0.0356)*120000*0.035;\n\tif(_result==0)return dustDensity;\n\treturn particlesM3;\n}\n",["fnc_pm25(2,A6,"+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_mics4514=function(){var i=this.getFieldValue("PRE"),e=this.getFieldValue("NOX"),o=this.getFieldValue("RED"),n=this.getFieldValue("TYPE");return Blockly.Arduino.setups_["setup_input_"+i]="pinMode("+i+", OUTPUT);",Blockly.Arduino.setups_["setup_input_"+e]="pinMode("+e+", INPUT );",Blockly.Arduino.setups_["setup_input_"+o]="pinMode("+o+", INPUT);",Blockly.Arduino.definitions_fnc_.fnc_mics4514_preheat="void fnc_mics4514_preheat(int _prepin)\n{\n\tpinMode(_prepin, OUTPUT);\n\tdigitalWrite(_prepin, 1);\n\tdelay(10 * 1000);\n\tdigitalWrite(_prepin, 0);\n}\n",Blockly.Arduino.setups_.setup_mics4514="fnc_mics4514_preheat("+i+");",Blockly.Arduino.definitions_fnc_.fnc_mics4514="double fnc_mics4514(int _prepin, int _noxpin, int _redpin, int _result)\n{\n\tdouble vnox_value = analogRead(_noxpin);\n\tdouble ppbNO2  = -85.26*log(vnox_value*5.0/1023.0)+121.02; \n\tdouble ugm3NO2  = (ppbNO2/1.88); \n\n\tdouble vred_value = analogRead(_redpin)/409.2;\n\tdouble RsCO = 100000/((5/vred_value) - 1);\n\tdouble ppmCO  = 911.19*pow(2.71828,(-8.577*RsCO/100000));\n\n\tif(_result==0)return ppbNO2;\n\tif(_result==1)return ppmCO;\n\tif(_result==2)return ugm3NO2;\n\treturn 0.0;\n}\n",["fnc_mics4514("+i+","+e+","+o+","+n+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_mics4514_EP=Blockly.Arduino.sensor_mics4514,Blockly.Arduino.sensor_color_tcs34725=function(){return setupColorSensorTCS34725(),this.getFieldValue("TYPE"),"fnc_tcs34725_capturecolor();\n"},Blockly.Arduino.sensor_color_tcs34725_EP=Blockly.Arduino.sensor_color_tcs34725,Blockly.Arduino.sensor_color_tcs34725_value=function(){setupColorSensorTCS34725();var i=this.getFieldValue("TYPE"),e="";return"0"==i&&(e="tcs34725_r"),"1"==i&&(e="tcs34725_g"),"2"==i&&(e="tcs34725_b"),"3"==i&&(e="tcs34725_clear"),"4"==i&&(e="tcs34725_h"),"5"==i&&(e="tcs34725_s"),"6"==i&&(e="tcs34725_v"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_color_tcs34725_value_EP=Blockly.Arduino.sensor_color_tcs34725_value,Blockly.Arduino.sensor_color_tcs34725_iscolor=function(){setupColorSensorTCS34725();var i=this.getFieldValue("COLOR");return Blockly.Arduino.definitions_fnc_.fnc_tcs34725_iscolor="bool fnc_tcs34725_iscolor(int _color)\n{\n\tif(tcs34725_h > 340 || tcs34725_h < 20){ if(_color==2) return true; } //red\n\telse if(tcs34725_h < 45){ if(_color==3) return true; }  //orange\n\telse if(tcs34725_h < 70){ if(_color==4) return true; }  //yellow\n\telse if(tcs34725_h < 150){ if(_color==5) return true; } //green\n\telse if(tcs34725_h < 210){ if(_color==6) return true; } //cyan\n\telse if(tcs34725_h < 265){ if(_color==7) return true; } //blue\n \telse if(tcs34725_h < 340){ if(_color==8) return true; } //violet\n\treturn false;\n}\n",["fnc_tcs34725_iscolor("+i+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_color_tcs34725_iscolor_EP=Blockly.Arduino.sensor_color_tcs34725_iscolor,Blockly.Arduino.sensor_bmp180=function(){this.getFieldValue("PIN");var i=this.getFieldValue("TYPE");Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_bmp180="#include <Adafruit_BMP085.h>",Blockly.Arduino.definitions_.var_bmp180="Adafruit_BMP085 bmp180;\n",Blockly.Arduino.setups_.setup_bmp180="bmp180.begin();";var e="";return"PRESSURE"==i&&(e="(bmp180.readPressure()/100.0)"),"ALTITUDE"==i&&(e="bmp180.readAltitude()"),"TEMPERATURE"==i&&(e="bmp180.readTemperature()"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_bmp180_EP=Blockly.Arduino.sensor_bmp180,Blockly.Arduino.sensor_ds18b20=function(){var i=this.getFieldValue("PIN"),e=this.getFieldValue("INDEX");return Blockly.Arduino.definitions_.define_onewire="#include <OneWire.h>",Blockly.Arduino.definitions_.define_ds18b20="#include <DallasTemperature.h>",Blockly.Arduino.definitions_.var_onewire="OneWire oneWireBus_"+i+"("+i+");\n",Blockly.Arduino.definitions_.var_ds18b20="DallasTemperature ds18b20_"+i+"(&oneWireBus_"+i+");\n",Blockly.Arduino.setups_.setup_ds18b20="ds18b20_"+i+".begin();",Blockly.Arduino.definitions_fnc_.fnc_ds128b20_temp="double fnc_ds128b20_temp(int _index)\n{\n\tds18b20_"+i+".requestTemperatures();\n\treturn ds18b20_"+i+".getTempCByIndex(_index);\n}\n",["fnc_ds128b20_temp("+e+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_ds18b20_EP=Blockly.Arduino.sensor_ds18b20,Blockly.Arduino.sensor_ccs811=function(){var i=this.getFieldValue("TYPE");Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_ccs811="#include <Adafruit_CCS811.h>",Blockly.Arduino.definitions_.var_bmp180="Adafruit_CCS811 ccs811;\n",Blockly.Arduino.setups_.setup_ccs811="ccs811.begin();",Blockly.Arduino.definitions_fnc_.fnc_ccs811_data="double fnc_ccs811_data(int _type)\n{\n\tif(ccs811.available()){\n\t\tif(!ccs811.readData()){\n\t\t\tif(_type==0)return ccs811.geteCO2();\n\t\t\tif(_type==1)return ccs811.getTVOC();\n\t\t}\n\t}\n\treturn 0;\n}\n";var e="";return"CO2"==i&&(e="fnc_ccs811_data(0)"),"TVOC"==i&&(e="fnc_ccs811_data(1)"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_paj7620=function(){return Blockly.Arduino.definitions_.define_wire="#include <Wire.h>",Blockly.Arduino.definitions_.define_ccs811="#include <paj7620.h>",Blockly.Arduino.setups_.setup_paj7620="paj7620Init();",["paj7620ReadGesture()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.sensor_paj7620_gesture=function(){return["("+this.getFieldValue("GESTURE")+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.serial={},Blockly.Arduino.serial_init=function(){var i=this.getFieldValue("BAUD");return Blockly.Arduino.setups_.setup_serial="Serial.begin("+i+");\n",""},Blockly.Arduino.serial_timeout=function(){return setupSerial(),"Serial.setTimeout("+Blockly.Arduino.valueToCode(this,"MS",Blockly.Arduino.ORDER_ATOMIC)+");\n"},Blockly.Arduino.serial_print=function(){setupSerial();var i=Blockly.Arduino.valueToCode(this,"STRINGOUTPUT",Blockly.Arduino.ORDER_ATOMIC)||"''";return"TRUE"==this.getFieldValue("NEWLINE")?"Serial.println("+i+");\n":"Serial.print("+i+");\n"},Blockly.Arduino.serial_println=function(){return setupSerial(),"Serial.println("+(Blockly.Arduino.valueToCode(this,"STRINGOUTPUT",Blockly.Arduino.ORDER_ATOMIC)||"''")+");\n"},Blockly.Arduino.serial_write_byte=function(){return setupSerial(),"Serial.write((byte)"+(Blockly.Arduino.valueToCode(this,"BYTE",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"},Blockly.Arduino.serial_read_float=function(){return setupSerial(),["TRUE"==this.getFieldValue("NEWLINE")?"atof((Serial.readStringUntil('\\n')).c_str())":"Serial.parseFloat()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.serial_read_byte=function(){return setupSerial(),["Serial.read()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.serial_read_string=function(){return setupSerial(),["TRUE"==this.getFieldValue("NEWLINE")?"Serial.readStringUntil('\\n')":"Serial.readString()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.serial_read_string_line=function(){return setupSerial(),code="Serial.readStringUntil('\\n')",[code,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.serial_read_available=function(){return setupSerial(),["(Serial.available()>0)",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.time={},Blockly.Arduino.time_delay=function(){return"delay("+(Blockly.Arduino.valueToCode(this,"DELAY_TIME_MILI",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"},Blockly.Arduino.time_delaymicros=function(){return"delayMicroseconds("+(Blockly.Arduino.valueToCode(this,"DELAY_TIME_MICRO",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"},Blockly.Arduino.time_millis=function(){return["millis()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.time_micros=function(){return["micros()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.infinite_loop=function(){return"while(true);\n"},Blockly.Arduino.time_runeveryms=function(){var i=Blockly.Arduino.statementToCode(this,"DO"),e=Blockly.Arduino.valueToCode(this,"MS",Blockly.Arduino.ORDER_ATOMIC)||"0",o=Blockly.Arduino.variableDB_.getDistinctName("task_time_ms",Blockly.Variables.NAME_TYPE);return Blockly.Arduino.definitions_["var_"+o]="unsigned long "+o+"=0;\n",(i="if((millis()-"+o+")>="+e+"){\n\t"+o+"=millis();\n"+i)+"}\n"},Blockly.Arduino.time_timer=function(){var i=this.getFieldValue("TYPE");Blockly.Arduino.definitions_.var_time_timer="unsigned long time_timer=millis();\n";var e="(millis()-time_timer)";return"s"==i&&(e="((millis()-time_timer)/1000)"),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.time_timer_reset=function(){return Blockly.Arduino.definitions_.var_time_timer="unsigned long time_timer=millis();\n","time_timer=millis();\n"},Blockly.Arduino.time_snooze=function(){var i=Blockly.Arduino.valueToCode(this,"DELAY_TIME_MILI",Blockly.Arduino.ORDER_ATOMIC)||"0";return Blockly.Arduino.definitions_.define_snooze="#include <SnoozeLib.h>","snoozeLib.snooze("+i+");\n"};